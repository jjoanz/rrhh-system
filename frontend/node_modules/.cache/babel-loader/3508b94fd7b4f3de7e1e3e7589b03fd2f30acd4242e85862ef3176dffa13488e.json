{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BarChart,Bar,XAxis,YAxis,Tooltip,Legend,ResponsiveContainer}from'recharts';// ✅ AGREGADO\nimport{Play,Download,Save,TrendingUp,Users,Building,FileText,DollarSign}from'lucide-react';import{useAuth}from'../../../context/AuthContext';// ✅ AGREGADO\n// ✅ AGREGADO: Definir API_URL\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'http://192.168.0.239:5000/api';const ReportesVisualModule=()=>{var _metricas$salarioProm;const{getStoredToken}=useAuth();// ✅ AGREGADO\nconst[tipoReporte,setTipoReporte]=useState('');const[configuracion,setConfiguracion]=useState({});const[data,setData]=useState([]);const[loading,setLoading]=useState(false);const[metricas,setMetricas]=useState(null);// Cargar métricas al inicio\nuseEffect(()=>{cargarMetricas();},[]);const cargarMetricas=async()=>{try{const response=await fetch(`${API_URL}/reportes/metricas`,{headers:{Authorization:`Bearer ${getStoredToken()}`}});const result=await response.json();if(result.success){setMetricas(result.data);}}catch(error){console.error('Error cargando métricas:',error);}};const TIPOS_REPORTES=[{id:'empleados',nombre:'Reporte de Empleados',descripcion:'Información detallada del personal',icono:Users,color:'blue',configuraciones:[{campo:'campos',label:'Información a mostrar',tipo:'multiselect',opciones:[{value:'nombre',label:'Nombre'},{value:'apellido',label:'Apellido'},{value:'email',label:'Email'},{value:'cargo',label:'Cargo'},{value:'salario',label:'Salario'},{value:'fechaIngreso',label:'Fecha de Ingreso'},{value:'departamento',label:'Departamento'},{value:'estado',label:'Estado'},{value:'cedula',label:'Cédula'}],default:['nombre','apellido','cargo','departamento']},{campo:'filtros.estado',label:'Estado del empleado',tipo:'select',opciones:[{value:'todos',label:'Todos'},{value:'activo',label:'Solo Activos'},{value:'inactivo',label:'Solo Inactivos'}],default:'activo'},{campo:'filtros.departamentoId',label:'Departamento',tipo:'select-departamentos',default:null},{campo:'ordenamiento.campo',label:'Ordenar por',tipo:'select',opciones:[{value:'nombre',label:'Nombre'},{value:'apellido',label:'Apellido'},{value:'fechaIngreso',label:'Fecha de Ingreso'},{value:'salario',label:'Salario'}],default:'nombre'},{campo:'ordenamiento.direccion',label:'Dirección',tipo:'select',opciones:[{value:'ASC',label:'Ascendente (A-Z, 0-9)'},{value:'DESC',label:'Descendente (Z-A, 9-0)'}],default:'ASC'}]},{id:'departamentos',nombre:'Reporte de Departamentos',descripcion:'Análisis por departamento',icono:Building,color:'green',configuraciones:[{campo:'incluirEstadisticas',label:'¿Incluir estadísticas de empleados?',tipo:'checkbox',default:true},{campo:'incluirEmpleados',label:'¿Incluir lista de empleados?',tipo:'checkbox',default:false}]},{id:'vacantes',nombre:'Reporte de Vacantes',descripcion:'Estado de vacantes y postulaciones',icono:FileText,color:'purple',configuraciones:[{campo:'estado',label:'Estado de vacantes',tipo:'select',opciones:[{value:'Todas',label:'Todas'},{value:'Abierta',label:'Solo Abiertas'},{value:'Cerrada',label:'Solo Cerradas'}],default:'Abierta'},{campo:'incluirPostulaciones',label:'¿Incluir estadísticas de postulaciones?',tipo:'checkbox',default:true},{campo:'fechaDesde',label:'Desde',tipo:'date',default:null},{campo:'fechaHasta',label:'Hasta',tipo:'date',default:null}]},{id:'nomina',nombre:'Reporte de Nómina',descripcion:'Severance, salarios y aumentos',icono:DollarSign,color:'orange',configuraciones:[{campo:'tipo',label:'Tipo de reporte',tipo:'select',opciones:[{value:'severance',label:'Cálculo de Severance'},{value:'salarios',label:'Análisis de Salarios'},{value:'aumentos',label:'Historial de Aumentos'}],default:'severance'},{campo:'departamentoId',label:'Departamento',tipo:'select-departamentos',default:null},{campo:'fechaReferencia',label:'Fecha de referencia',tipo:'date',default:new Date().toISOString().split('T')[0]}]}];const ejecutarReporte=async()=>{if(!tipoReporte){alert('Selecciona un tipo de reporte');return;}setLoading(true);try{const response=await fetch(`${API_URL}/reportes/${tipoReporte}`,{method:'POST',headers:{'Content-Type':'application/json',Authorization:`Bearer ${getStoredToken()}`},body:JSON.stringify(configuracion)});const result=await response.json();if(result.success){setData(result.data);}else{alert('Error generando reporte: '+(result.error||'Error desconocido'));}}catch(error){console.error('Error:',error);alert('Error ejecutando reporte');}finally{setLoading(false);}};const exportarReporte=async formato=>{if(data.length===0){alert('No hay datos para exportar');return;}try{const response=await fetch(`${API_URL}/reportes/export`,{method:'POST',headers:{'Content-Type':'application/json',Authorization:`Bearer ${getStoredToken()}`},body:JSON.stringify({formato,data,nombre:`reporte_${tipoReporte}_${new Date().toISOString().split('T')[0]}`})});const blob=await response.blob();const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`reporte_${tipoReporte}_${new Date().toISOString().split('T')[0]}.${formato}`;document.body.appendChild(a);a.click();document.body.removeChild(a);window.URL.revokeObjectURL(url);}catch(error){console.error('Error exportando:',error);alert('Error al exportar');}};const reporteSeleccionado=TIPOS_REPORTES.find(r=>r.id===tipoReporte);// Funciones auxiliares\nfunction obtenerValorConfig(config,campo){const campos=campo.split('.');let valor=config;for(const c of campos){var _valor;valor=(_valor=valor)===null||_valor===void 0?void 0:_valor[c];}return valor;}function actualizarConfiguracion(campo,valor){const campos=campo.split('.');const nuevaConfig={...configuracion};let ref=nuevaConfig;for(let i=0;i<campos.length-1;i++){if(!ref[campos[i]])ref[campos[i]]={};ref=ref[campos[i]];}ref[campos[campos.length-1]]=valor;setConfiguracion(nuevaConfig);}function formatearNombreColumna(nombre){return nombre.replace(/([A-Z])/g,' $1').replace(/_/g,' ').replace(/^./,str=>str.toUpperCase()).trim();}function formatearValor(key,value){if(value===null||value===undefined)return'-';// Fechas\nif(key.toLowerCase().includes('fecha')&&value){return new Date(value).toLocaleDateString('es-DO');}// Moneda\nif(key.toLowerCase().includes('salario')||key.toLowerCase().includes('preaviso')||key.toLowerCase().includes('cesantia')||key.toLowerCase().includes('vacaciones')||key.toLowerCase().includes('regalia')||key.toLowerCase().includes('total')||key.toLowerCase().includes('presupuesto')){return`$${parseFloat(value).toLocaleString('es-DO',{minimumFractionDigits:2,maximumFractionDigits:2})}`;}// Números\nif(typeof value==='number'){return value.toLocaleString('es-DO');}return value;}function calcularTotalesSeverance(data){const totales={Preaviso:0,Cesantia:0,Vacaciones:0,Regalia:0,Total:0};data.forEach(emp=>{totales.Preaviso+=emp.Preaviso||0;totales.Cesantia+=emp.Cesantia||0;totales.Vacaciones+=emp.Vacaciones||0;totales.Regalia+=emp.Regalia||0;totales.Total+=emp.Total||0;});return/*#__PURE__*/_jsx(_Fragment,{children:Object.entries(totales).map(_ref=>{let[key,value]=_ref;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-blue-700 font-medium\",children:key}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-blue-900\",children:[\"$\",value.toLocaleString('es-DO',{minimumFractionDigits:2})]})]},key);})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 max-w-7xl mx-auto bg-gray-50 min-h-screen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 mb-2\",children:\"\\uD83D\\uDCCA Reportes RRHH\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Sistema de reporter\\xEDa visual - Sin necesidad de SQL\"})]}),metricas&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-blue-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Total Empleados\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900\",children:metricas.totalEmpleados})]}),/*#__PURE__*/_jsx(Users,{className:\"w-12 h-12 text-blue-500 opacity-20\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-green-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Contrataciones (30d)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900\",children:metricas.contratacionesUltimos30Dias})]}),/*#__PURE__*/_jsx(TrendingUp,{className:\"w-12 h-12 text-green-500 opacity-20\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-purple-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Salario Promedio\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-gray-900\",children:[\"$\",(_metricas$salarioProm=metricas.salarioPromedio)===null||_metricas$salarioProm===void 0?void 0:_metricas$salarioProm.toLocaleString()]})]}),/*#__PURE__*/_jsx(DollarSign,{className:\"w-12 h-12 text-purple-500 opacity-20\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-orange-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Vacantes Abiertas\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900\",children:metricas.vacantesAbiertas})]}),/*#__PURE__*/_jsx(FileText,{className:\"w-12 h-12 text-orange-500 opacity-20\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4 text-gray-800\",children:\"Selecciona el tipo de reporte\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\",children:TIPOS_REPORTES.map(tipo=>{const Icon=tipo.icono;const isSelected=tipoReporte===tipo.id;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setTipoReporte(tipo.id);setConfiguracion({});setData([]);},className:`p-6 rounded-xl border-2 transition-all text-left ${isSelected?`border-${tipo.color}-500 bg-${tipo.color}-50 shadow-lg`:'border-gray-200 hover:border-gray-300 hover:shadow-md'}`,children:[/*#__PURE__*/_jsx(Icon,{className:`w-10 h-10 mb-3 ${isSelected?`text-${tipo.color}-600`:'text-gray-400'}`}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-1\",children:tipo.nombre}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:tipo.descripcion})]},tipo.id);})})]}),reporteSeleccionado&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm p-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold mb-4 text-gray-800\",children:[\"Configurar \",reporteSeleccionado.nombre]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:reporteSeleccionado.configuraciones.map((config,index)=>/*#__PURE__*/_jsx(ConfiguracionCampo,{config:config,valor:obtenerValorConfig(configuracion,config.campo),onChange:valor=>actualizarConfiguracion(config.campo,valor)},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-6 pt-6 border-t\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:ejecutarReporte,disabled:loading,className:`flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-all flex items-center justify-center gap-2 font-medium shadow-lg`,children:[/*#__PURE__*/_jsx(Play,{className:\"w-5 h-5\"}),loading?'Generando...':'Generar Reporte']}),data.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>exportarReporte('excel'),className:\"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-all flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-5 h-5\"}),\"Excel\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>exportarReporte('pdf'),className:\"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-all flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-5 h-5\"}),\"PDF\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>exportarReporte('csv'),className:\"bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-all flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-5 h-5\"}),\"CSV\"]})]})]})]}),data.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-white font-semibold flex items-center gap-2\",children:[\"\\uD83D\\uDCCA Resultados (\",data.length,\" registros)\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[tipoReporte==='departamentos'&&configuracion.incluirEstadisticas&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(GraficoBarras,{data:data,xKey:\"Departamento\",yKey:\"TotalEmpleados\",titulo:\"Empleados por Departamento\"})}),tipoReporte==='nomina'&&configuracion.tipo==='salarios'&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(GraficoBarras,{data:data,xKey:\"Departamento\",yKey:\"SalarioPromedio\",titulo:\"Salario Promedio por Departamento\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{className:\"bg-gray-50\",children:Object.keys(data[0]||{}).map(key=>/*#__PURE__*/_jsx(\"th\",{className:\"border-b-2 border-gray-200 px-4 py-3 text-left text-sm font-semibold text-gray-700\",children:formatearNombreColumna(key)},key))})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map((row,index)=>/*#__PURE__*/_jsx(\"tr\",{className:\"hover:bg-gray-50 transition-colors\",children:Object.entries(row).map((_ref2,cellIndex)=>{let[key,value]=_ref2;return/*#__PURE__*/_jsx(\"td\",{className:\"border-b border-gray-100 px-4 py-3 text-sm text-gray-900\",children:formatearValor(key,value)},cellIndex);})},index))})]})}),tipoReporte==='nomina'&&configuracion.tipo==='severance'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-blue-900 mb-2\",children:\"\\uD83D\\uDCB0 Resumen Total\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-5 gap-4\",children:calcularTotalesSeverance(data)})]})]})]}),!tipoReporte&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm p-12 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(FileText,{className:\"w-10 h-10 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-700 mb-2\",children:\"Selecciona un tipo de reporte para comenzar\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Elige uno de los tipos de reporte disponibles arriba\"})]})]});};// ============================================\n// COMPONENTE: Campo de Configuración\n// ============================================\nconst ConfiguracionCampo=_ref3=>{let{config,valor,onChange}=_ref3;const[departamentos,setDepartamentos]=useState([]);const{getStoredToken}=useAuth();// ✅ AGREGADO\nuseEffect(()=>{if(config.tipo==='select-departamentos'){cargarDepartamentos();}},[config.tipo]);const cargarDepartamentos=async()=>{try{const response=await fetch(`${API_URL}/departamentos`,{headers:{Authorization:`Bearer ${getStoredToken()}`}});const data=await response.json();setDepartamentos(data);}catch(error){console.error('Error cargando departamentos:',error);}};// Multiselect\nif(config.tipo==='multiselect'){const valoresSeleccionados=valor||config.default||[];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium text-gray-700 mb-3\",children:config.label}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-3\",children:config.opciones.map(opcion=>{const isSelected=valoresSeleccionados.includes(opcion.value);return/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const nuevosValores=isSelected?valoresSeleccionados.filter(v=>v!==opcion.value):[...valoresSeleccionados,opcion.value];onChange(nuevosValores);},className:`p-3 rounded-lg border-2 text-sm text-left transition-all ${isSelected?'border-blue-500 bg-blue-50 text-blue-700':'border-gray-200 hover:border-blue-300 text-gray-700'}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:opcion.label}),isSelected&&/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-bold\",children:\"\\u2713\"})]})},opcion.value);})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-2\",children:[valoresSeleccionados.length,\" seleccionado(s)\"]})]});}// Select simple\nif(config.tipo==='select'){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium text-gray-700 mb-2\",children:config.label}),/*#__PURE__*/_jsx(\"select\",{value:valor||config.default,onChange:e=>onChange(e.target.value),className:\"w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",children:config.opciones.map(opcion=>/*#__PURE__*/_jsx(\"option\",{value:opcion.value,children:opcion.label},opcion.value))})]});}// Select de departamentos\nif(config.tipo==='select-departamentos'){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium text-gray-700 mb-2\",children:config.label}),/*#__PURE__*/_jsxs(\"select\",{value:valor||'',onChange:e=>onChange(e.target.value||null),className:\"w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Todos los departamentos\"}),departamentos.map(dept=>/*#__PURE__*/_jsx(\"option\",{value:dept.DepartamentoID,children:dept.Nombre},dept.DepartamentoID))]})]});}// Checkbox\nif(config.tipo==='checkbox'){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:valor!==undefined?valor:config.default,onChange:e=>onChange(e.target.checked),className:\"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-3 font-medium text-gray-700\",children:config.label})]});}// Date\nif(config.tipo==='date'){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium text-gray-700 mb-2\",children:config.label}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:valor||config.default||'',onChange:e=>onChange(e.target.value),className:\"w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"})]});}return null;};// ============================================\n// COMPONENTE: Gráfico de Barras\n// ============================================\nconst GraficoBarras=_ref4=>{let{data,xKey,yKey,titulo}=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-800 mb-4\",children:titulo}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:data,children:[/*#__PURE__*/_jsx(XAxis,{dataKey:xKey}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:yKey,fill:\"#3B82F6\"})]})})]});};export default ReportesVisualModule;","map":{"version":3,"names":["React","useState","useEffect","BarChart","Bar","XAxis","YAxis","Tooltip","Legend","ResponsiveContainer","Play","Download","Save","TrendingUp","Users","Building","FileText","DollarSign","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","process","env","REACT_APP_API_URL","ReportesVisualModule","_metricas$salarioProm","getStoredToken","tipoReporte","setTipoReporte","configuracion","setConfiguracion","data","setData","loading","setLoading","metricas","setMetricas","cargarMetricas","response","fetch","headers","Authorization","result","json","success","error","console","TIPOS_REPORTES","id","nombre","descripcion","icono","color","configuraciones","campo","label","tipo","opciones","value","default","Date","toISOString","split","ejecutarReporte","alert","method","body","JSON","stringify","exportarReporte","formato","length","blob","url","window","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","reporteSeleccionado","find","r","obtenerValorConfig","config","campos","valor","c","_valor","actualizarConfiguracion","nuevaConfig","ref","i","formatearNombreColumna","replace","str","toUpperCase","trim","formatearValor","key","undefined","toLowerCase","includes","toLocaleDateString","parseFloat","toLocaleString","minimumFractionDigits","maximumFractionDigits","calcularTotalesSeverance","totales","Preaviso","Cesantia","Vacaciones","Regalia","Total","forEach","emp","children","Object","entries","map","_ref","className","totalEmpleados","contratacionesUltimos30Dias","salarioPromedio","vacantesAbiertas","Icon","isSelected","onClick","index","ConfiguracionCampo","onChange","disabled","incluirEstadisticas","GraficoBarras","xKey","yKey","titulo","keys","row","_ref2","cellIndex","_ref3","departamentos","setDepartamentos","cargarDepartamentos","valoresSeleccionados","opcion","nuevosValores","filter","v","e","target","dept","DepartamentoID","Nombre","type","checked","_ref4","width","height","dataKey","fill"],"sources":["C:/Users/josemontedeoca/rrhh-system/frontend/src/components/modules/Reportes/ReportesModule.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n  BarChart, \r\n  Bar, \r\n  XAxis, \r\n  YAxis, \r\n  Tooltip, \r\n  Legend, \r\n  ResponsiveContainer \r\n} from 'recharts'; // ✅ AGREGADO\r\nimport { Play, Download, Save, TrendingUp, Users, Building, FileText, DollarSign } from 'lucide-react';\r\nimport { useAuth } from '../../../context/AuthContext'; // ✅ AGREGADO\r\n\r\n// ✅ AGREGADO: Definir API_URL\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://192.168.0.239:5000/api';\r\n\r\nconst ReportesVisualModule = () => {\r\n  const { getStoredToken } = useAuth(); // ✅ AGREGADO\r\n  \r\n  const [tipoReporte, setTipoReporte] = useState('');\r\n  const [configuracion, setConfiguracion] = useState({});\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [metricas, setMetricas] = useState(null);\r\n\r\n  // Cargar métricas al inicio\r\n  useEffect(() => {\r\n    cargarMetricas();\r\n  }, []);\r\n\r\n  const cargarMetricas = async () => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/reportes/metricas`, {\r\n        headers: { Authorization: `Bearer ${getStoredToken()}` }\r\n      });\r\n      const result = await response.json();\r\n      if (result.success) {\r\n        setMetricas(result.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error cargando métricas:', error);\r\n    }\r\n  };\r\n\r\n  const TIPOS_REPORTES = [\r\n    {\r\n      id: 'empleados',\r\n      nombre: 'Reporte de Empleados',\r\n      descripcion: 'Información detallada del personal',\r\n      icono: Users,\r\n      color: 'blue',\r\n      configuraciones: [\r\n        {\r\n          campo: 'campos',\r\n          label: 'Información a mostrar',\r\n          tipo: 'multiselect',\r\n          opciones: [\r\n            { value: 'nombre', label: 'Nombre' },\r\n            { value: 'apellido', label: 'Apellido' },\r\n            { value: 'email', label: 'Email' },\r\n            { value: 'cargo', label: 'Cargo' },\r\n            { value: 'salario', label: 'Salario' },\r\n            { value: 'fechaIngreso', label: 'Fecha de Ingreso' },\r\n            { value: 'departamento', label: 'Departamento' },\r\n            { value: 'estado', label: 'Estado' },\r\n            { value: 'cedula', label: 'Cédula' }\r\n          ],\r\n          default: ['nombre', 'apellido', 'cargo', 'departamento']\r\n        },\r\n        {\r\n          campo: 'filtros.estado',\r\n          label: 'Estado del empleado',\r\n          tipo: 'select',\r\n          opciones: [\r\n            { value: 'todos', label: 'Todos' },\r\n            { value: 'activo', label: 'Solo Activos' },\r\n            { value: 'inactivo', label: 'Solo Inactivos' }\r\n          ],\r\n          default: 'activo'\r\n        },\r\n        {\r\n          campo: 'filtros.departamentoId',\r\n          label: 'Departamento',\r\n          tipo: 'select-departamentos',\r\n          default: null\r\n        },\r\n        {\r\n          campo: 'ordenamiento.campo',\r\n          label: 'Ordenar por',\r\n          tipo: 'select',\r\n          opciones: [\r\n            { value: 'nombre', label: 'Nombre' },\r\n            { value: 'apellido', label: 'Apellido' },\r\n            { value: 'fechaIngreso', label: 'Fecha de Ingreso' },\r\n            { value: 'salario', label: 'Salario' }\r\n          ],\r\n          default: 'nombre'\r\n        },\r\n        {\r\n          campo: 'ordenamiento.direccion',\r\n          label: 'Dirección',\r\n          tipo: 'select',\r\n          opciones: [\r\n            { value: 'ASC', label: 'Ascendente (A-Z, 0-9)' },\r\n            { value: 'DESC', label: 'Descendente (Z-A, 9-0)' }\r\n          ],\r\n          default: 'ASC'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'departamentos',\r\n      nombre: 'Reporte de Departamentos',\r\n      descripcion: 'Análisis por departamento',\r\n      icono: Building,\r\n      color: 'green',\r\n      configuraciones: [\r\n        {\r\n          campo: 'incluirEstadisticas',\r\n          label: '¿Incluir estadísticas de empleados?',\r\n          tipo: 'checkbox',\r\n          default: true\r\n        },\r\n        {\r\n          campo: 'incluirEmpleados',\r\n          label: '¿Incluir lista de empleados?',\r\n          tipo: 'checkbox',\r\n          default: false\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'vacantes',\r\n      nombre: 'Reporte de Vacantes',\r\n      descripcion: 'Estado de vacantes y postulaciones',\r\n      icono: FileText,\r\n      color: 'purple',\r\n      configuraciones: [\r\n        {\r\n          campo: 'estado',\r\n          label: 'Estado de vacantes',\r\n          tipo: 'select',\r\n          opciones: [\r\n            { value: 'Todas', label: 'Todas' },\r\n            { value: 'Abierta', label: 'Solo Abiertas' },\r\n            { value: 'Cerrada', label: 'Solo Cerradas' }\r\n          ],\r\n          default: 'Abierta'\r\n        },\r\n        {\r\n          campo: 'incluirPostulaciones',\r\n          label: '¿Incluir estadísticas de postulaciones?',\r\n          tipo: 'checkbox',\r\n          default: true\r\n        },\r\n        {\r\n          campo: 'fechaDesde',\r\n          label: 'Desde',\r\n          tipo: 'date',\r\n          default: null\r\n        },\r\n        {\r\n          campo: 'fechaHasta',\r\n          label: 'Hasta',\r\n          tipo: 'date',\r\n          default: null\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'nomina',\r\n      nombre: 'Reporte de Nómina',\r\n      descripcion: 'Severance, salarios y aumentos',\r\n      icono: DollarSign,\r\n      color: 'orange',\r\n      configuraciones: [\r\n        {\r\n          campo: 'tipo',\r\n          label: 'Tipo de reporte',\r\n          tipo: 'select',\r\n          opciones: [\r\n            { value: 'severance', label: 'Cálculo de Severance' },\r\n            { value: 'salarios', label: 'Análisis de Salarios' },\r\n            { value: 'aumentos', label: 'Historial de Aumentos' }\r\n          ],\r\n          default: 'severance'\r\n        },\r\n        {\r\n          campo: 'departamentoId',\r\n          label: 'Departamento',\r\n          tipo: 'select-departamentos',\r\n          default: null\r\n        },\r\n        {\r\n          campo: 'fechaReferencia',\r\n          label: 'Fecha de referencia',\r\n          tipo: 'date',\r\n          default: new Date().toISOString().split('T')[0]\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  const ejecutarReporte = async () => {\r\n    if (!tipoReporte) {\r\n      alert('Selecciona un tipo de reporte');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${API_URL}/reportes/${tipoReporte}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${getStoredToken()}`\r\n        },\r\n        body: JSON.stringify(configuracion)\r\n      });\r\n\r\n      const result = await response.json();\r\n      if (result.success) {\r\n        setData(result.data);\r\n      } else {\r\n        alert('Error generando reporte: ' + (result.error || 'Error desconocido'));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      alert('Error ejecutando reporte');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const exportarReporte = async (formato) => {\r\n    if (data.length === 0) {\r\n      alert('No hay datos para exportar');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`${API_URL}/reportes/export`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${getStoredToken()}`\r\n        },\r\n        body: JSON.stringify({\r\n          formato,\r\n          data,\r\n          nombre: `reporte_${tipoReporte}_${new Date().toISOString().split('T')[0]}`\r\n        })\r\n      });\r\n\r\n      const blob = await response.blob();\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `reporte_${tipoReporte}_${new Date().toISOString().split('T')[0]}.${formato}`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      window.URL.revokeObjectURL(url);\r\n    } catch (error) {\r\n      console.error('Error exportando:', error);\r\n      alert('Error al exportar');\r\n    }\r\n  };\r\n\r\n  const reporteSeleccionado = TIPOS_REPORTES.find(r => r.id === tipoReporte);\r\n\r\n  // Funciones auxiliares\r\n  function obtenerValorConfig(config, campo) {\r\n    const campos = campo.split('.');\r\n    let valor = config;\r\n    for (const c of campos) {\r\n      valor = valor?.[c];\r\n    }\r\n    return valor;\r\n  }\r\n\r\n  function actualizarConfiguracion(campo, valor) {\r\n    const campos = campo.split('.');\r\n    const nuevaConfig = { ...configuracion };\r\n    \r\n    let ref = nuevaConfig;\r\n    for (let i = 0; i < campos.length - 1; i++) {\r\n      if (!ref[campos[i]]) ref[campos[i]] = {};\r\n      ref = ref[campos[i]];\r\n    }\r\n    \r\n    ref[campos[campos.length - 1]] = valor;\r\n    setConfiguracion(nuevaConfig);\r\n  }\r\n\r\n  function formatearNombreColumna(nombre) {\r\n    return nombre\r\n      .replace(/([A-Z])/g, ' $1')\r\n      .replace(/_/g, ' ')\r\n      .replace(/^./, str => str.toUpperCase())\r\n      .trim();\r\n  }\r\n\r\n  function formatearValor(key, value) {\r\n    if (value === null || value === undefined) return '-';\r\n    \r\n    // Fechas\r\n    if (key.toLowerCase().includes('fecha') && value) {\r\n      return new Date(value).toLocaleDateString('es-DO');\r\n    }\r\n    \r\n    // Moneda\r\n    if (key.toLowerCase().includes('salario') || \r\n        key.toLowerCase().includes('preaviso') ||\r\n        key.toLowerCase().includes('cesantia') ||\r\n        key.toLowerCase().includes('vacaciones') ||\r\n        key.toLowerCase().includes('regalia') ||\r\n        key.toLowerCase().includes('total') ||\r\n        key.toLowerCase().includes('presupuesto')) {\r\n      return `$${parseFloat(value).toLocaleString('es-DO', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\r\n    }\r\n    \r\n    // Números\r\n    if (typeof value === 'number') {\r\n      return value.toLocaleString('es-DO');\r\n    }\r\n    \r\n    return value;\r\n  }\r\n\r\n  function calcularTotalesSeverance(data) {\r\n    const totales = {\r\n      Preaviso: 0,\r\n      Cesantia: 0,\r\n      Vacaciones: 0,\r\n      Regalia: 0,\r\n      Total: 0\r\n    };\r\n\r\n    data.forEach(emp => {\r\n      totales.Preaviso += emp.Preaviso || 0;\r\n      totales.Cesantia += emp.Cesantia || 0;\r\n      totales.Vacaciones += emp.Vacaciones || 0;\r\n      totales.Regalia += emp.Regalia || 0;\r\n      totales.Total += emp.Total || 0;\r\n    });\r\n\r\n    return (\r\n      <>\r\n        {Object.entries(totales).map(([key, value]) => (\r\n          <div key={key}>\r\n            <div className=\"text-xs text-blue-700 font-medium\">{key}</div>\r\n            <div className=\"text-lg font-bold text-blue-900\">\r\n              ${value.toLocaleString('es-DO', { minimumFractionDigits: 2 })}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-7xl mx-auto bg-gray-50 min-h-screen\">\r\n      {/* Header */}\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">📊 Reportes RRHH</h1>\r\n        <p className=\"text-gray-600\">Sistema de reportería visual - Sin necesidad de SQL</p>\r\n      </div>\r\n\r\n      {/* Dashboard de Métricas */}\r\n      {metricas && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\r\n          <div className=\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-blue-500\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-gray-600 text-sm\">Total Empleados</p>\r\n                <p className=\"text-3xl font-bold text-gray-900\">{metricas.totalEmpleados}</p>\r\n              </div>\r\n              <Users className=\"w-12 h-12 text-blue-500 opacity-20\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-green-500\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-gray-600 text-sm\">Contrataciones (30d)</p>\r\n                <p className=\"text-3xl font-bold text-gray-900\">{metricas.contratacionesUltimos30Dias}</p>\r\n              </div>\r\n              <TrendingUp className=\"w-12 h-12 text-green-500 opacity-20\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-purple-500\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-gray-600 text-sm\">Salario Promedio</p>\r\n                <p className=\"text-3xl font-bold text-gray-900\">\r\n                  ${metricas.salarioPromedio?.toLocaleString()}\r\n                </p>\r\n              </div>\r\n              <DollarSign className=\"w-12 h-12 text-purple-500 opacity-20\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-orange-500\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-gray-600 text-sm\">Vacantes Abiertas</p>\r\n                <p className=\"text-3xl font-bold text-gray-900\">{metricas.vacantesAbiertas}</p>\r\n              </div>\r\n              <FileText className=\"w-12 h-12 text-orange-500 opacity-20\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Selección de Tipo de Reporte */}\r\n      <div className=\"bg-white rounded-xl shadow-sm p-6 mb-6\">\r\n        <h2 className=\"text-xl font-semibold mb-4 text-gray-800\">Selecciona el tipo de reporte</h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          {TIPOS_REPORTES.map(tipo => {\r\n            const Icon = tipo.icono;\r\n            const isSelected = tipoReporte === tipo.id;\r\n            return (\r\n              <button\r\n                key={tipo.id}\r\n                onClick={() => {\r\n                  setTipoReporte(tipo.id);\r\n                  setConfiguracion({});\r\n                  setData([]);\r\n                }}\r\n                className={`p-6 rounded-xl border-2 transition-all text-left ${\r\n                  isSelected\r\n                    ? `border-${tipo.color}-500 bg-${tipo.color}-50 shadow-lg`\r\n                    : 'border-gray-200 hover:border-gray-300 hover:shadow-md'\r\n                }`}\r\n              >\r\n                <Icon className={`w-10 h-10 mb-3 ${isSelected ? `text-${tipo.color}-600` : 'text-gray-400'}`} />\r\n                <h3 className=\"font-semibold text-gray-900 mb-1\">{tipo.nombre}</h3>\r\n                <p className=\"text-sm text-gray-600\">{tipo.descripcion}</p>\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Configuración del Reporte */}\r\n      {reporteSeleccionado && (\r\n        <div className=\"bg-white rounded-xl shadow-sm p-6 mb-6\">\r\n          <h2 className=\"text-xl font-semibold mb-4 text-gray-800\">\r\n            Configurar {reporteSeleccionado.nombre}\r\n          </h2>\r\n          \r\n          <div className=\"space-y-6\">\r\n            {reporteSeleccionado.configuraciones.map((config, index) => (\r\n              <ConfiguracionCampo\r\n                key={index}\r\n                config={config}\r\n                valor={obtenerValorConfig(configuracion, config.campo)}\r\n                onChange={(valor) => actualizarConfiguracion(config.campo, valor)}\r\n              />\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"flex gap-3 mt-6 pt-6 border-t\">\r\n            <button\r\n              onClick={ejecutarReporte}\r\n              disabled={loading}\r\n              className={`flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-all flex items-center justify-center gap-2 font-medium shadow-lg`}\r\n            >\r\n              <Play className=\"w-5 h-5\" />\r\n              {loading ? 'Generando...' : 'Generar Reporte'}\r\n            </button>\r\n            \r\n            {data.length > 0 && (\r\n              <>\r\n                <button\r\n                  onClick={() => exportarReporte('excel')}\r\n                  className=\"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-all flex items-center gap-2\"\r\n                >\r\n                  <Download className=\"w-5 h-5\" />\r\n                  Excel\r\n                </button>\r\n                <button\r\n                  onClick={() => exportarReporte('pdf')}\r\n                  className=\"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-all flex items-center gap-2\"\r\n                >\r\n                  <Download className=\"w-5 h-5\" />\r\n                  PDF\r\n                </button>\r\n                <button\r\n                  onClick={() => exportarReporte('csv')}\r\n                  className=\"bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-all flex items-center gap-2\"\r\n                >\r\n                  <Download className=\"w-5 h-5\" />\r\n                  CSV\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Resultados */}\r\n      {data.length > 0 && (\r\n        <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\r\n          <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4\">\r\n            <h3 className=\"text-white font-semibold flex items-center gap-2\">\r\n              📊 Resultados ({data.length} registros)\r\n            </h3>\r\n          </div>\r\n          \r\n          <div className=\"p-6\">\r\n            {/* Gráficos si aplica */}\r\n            {tipoReporte === 'departamentos' && configuracion.incluirEstadisticas && (\r\n              <div className=\"mb-6\">\r\n                <GraficoBarras \r\n                  data={data}\r\n                  xKey=\"Departamento\"\r\n                  yKey=\"TotalEmpleados\"\r\n                  titulo=\"Empleados por Departamento\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {tipoReporte === 'nomina' && configuracion.tipo === 'salarios' && (\r\n              <div className=\"mb-6\">\r\n                <GraficoBarras \r\n                  data={data}\r\n                  xKey=\"Departamento\"\r\n                  yKey=\"SalarioPromedio\"\r\n                  titulo=\"Salario Promedio por Departamento\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* Tabla de datos */}\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full border-collapse\">\r\n                <thead>\r\n                  <tr className=\"bg-gray-50\">\r\n                    {Object.keys(data[0] || {}).map((key) => (\r\n                      <th key={key} className=\"border-b-2 border-gray-200 px-4 py-3 text-left text-sm font-semibold text-gray-700\">\r\n                        {formatearNombreColumna(key)}\r\n                      </th>\r\n                    ))}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {data.map((row, index) => (\r\n                    <tr key={index} className=\"hover:bg-gray-50 transition-colors\">\r\n                      {Object.entries(row).map(([key, value], cellIndex) => (\r\n                        <td key={cellIndex} className=\"border-b border-gray-100 px-4 py-3 text-sm text-gray-900\">\r\n                          {formatearValor(key, value)}\r\n                        </td>\r\n                      ))}\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n\r\n            {/* Resumen si es reporte de nómina */}\r\n            {tipoReporte === 'nomina' && configuracion.tipo === 'severance' && (\r\n              <div className=\"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200\">\r\n                <h4 className=\"font-semibold text-blue-900 mb-2\">💰 Resumen Total</h4>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\r\n                  {calcularTotalesSeverance(data)}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Estado vacío */}\r\n      {!tipoReporte && (\r\n        <div className=\"bg-white rounded-xl shadow-sm p-12 text-center\">\r\n          <div className=\"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n            <FileText className=\"w-10 h-10 text-gray-400\" />\r\n          </div>\r\n          <h3 className=\"text-xl font-semibold text-gray-700 mb-2\">\r\n            Selecciona un tipo de reporte para comenzar\r\n          </h3>\r\n          <p className=\"text-gray-500\">\r\n            Elige uno de los tipos de reporte disponibles arriba\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ============================================\r\n// COMPONENTE: Campo de Configuración\r\n// ============================================\r\n\r\nconst ConfiguracionCampo = ({ config, valor, onChange }) => {\r\n  const [departamentos, setDepartamentos] = useState([]);\r\n  const { getStoredToken } = useAuth(); // ✅ AGREGADO\r\n\r\n  useEffect(() => {\r\n    if (config.tipo === 'select-departamentos') {\r\n      cargarDepartamentos();\r\n    }\r\n  }, [config.tipo]);\r\n\r\n  const cargarDepartamentos = async () => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/departamentos`, {\r\n        headers: { Authorization: `Bearer ${getStoredToken()}` }\r\n      });\r\n      const data = await response.json();\r\n      setDepartamentos(data);\r\n    } catch (error) {\r\n      console.error('Error cargando departamentos:', error);\r\n    }\r\n  };\r\n\r\n  // Multiselect\r\n  if (config.tipo === 'multiselect') {\r\n    const valoresSeleccionados = valor || config.default || [];\r\n    \r\n    return (\r\n      <div>\r\n        <label className=\"block font-medium text-gray-700 mb-3\">{config.label}</label>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\r\n          {config.opciones.map(opcion => {\r\n            const isSelected = valoresSeleccionados.includes(opcion.value);\r\n            return (\r\n              <button\r\n                key={opcion.value}\r\n                onClick={() => {\r\n                  const nuevosValores = isSelected\r\n                    ? valoresSeleccionados.filter(v => v !== opcion.value)\r\n                    : [...valoresSeleccionados, opcion.value];\r\n                  onChange(nuevosValores);\r\n                }}\r\n                className={`p-3 rounded-lg border-2 text-sm text-left transition-all ${\r\n                  isSelected\r\n                    ? 'border-blue-500 bg-blue-50 text-blue-700'\r\n                    : 'border-gray-200 hover:border-blue-300 text-gray-700'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span>{opcion.label}</span>\r\n                  {isSelected && (\r\n                    <span className=\"text-blue-600 font-bold\">✓</span>\r\n                  )}\r\n                </div>\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n        <p className=\"text-xs text-gray-500 mt-2\">\r\n          {valoresSeleccionados.length} seleccionado(s)\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Select simple\r\n  if (config.tipo === 'select') {\r\n    return (\r\n      <div>\r\n        <label className=\"block font-medium text-gray-700 mb-2\">{config.label}</label>\r\n        <select\r\n          value={valor || config.default}\r\n          onChange={(e) => onChange(e.target.value)}\r\n          className=\"w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n        >\r\n          {config.opciones.map(opcion => (\r\n            <option key={opcion.value} value={opcion.value}>\r\n              {opcion.label}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Select de departamentos\r\n  if (config.tipo === 'select-departamentos') {\r\n    return (\r\n      <div>\r\n        <label className=\"block font-medium text-gray-700 mb-2\">{config.label}</label>\r\n        <select\r\n          value={valor || ''}\r\n          onChange={(e) => onChange(e.target.value || null)}\r\n          className=\"w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n        >\r\n          <option value=\"\">Todos los departamentos</option>\r\n          {departamentos.map(dept => (\r\n            <option key={dept.DepartamentoID} value={dept.DepartamentoID}>\r\n              {dept.Nombre}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Checkbox\r\n  if (config.tipo === 'checkbox') {\r\n    return (\r\n      <div className=\"flex items-center\">\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={valor !== undefined ? valor : config.default}\r\n          onChange={(e) => onChange(e.target.checked)}\r\n          className=\"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n        />\r\n        <label className=\"ml-3 font-medium text-gray-700\">{config.label}</label>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Date\r\n  if (config.tipo === 'date') {\r\n    return (\r\n      <div>\r\n        <label className=\"block font-medium text-gray-700 mb-2\">{config.label}</label>\r\n        <input\r\n          type=\"date\"\r\n          value={valor || config.default || ''}\r\n          onChange={(e) => onChange(e.target.value)}\r\n          className=\"w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n// ============================================\r\n// COMPONENTE: Gráfico de Barras\r\n// ============================================\r\n\r\nconst GraficoBarras = ({ data, xKey, yKey, titulo }) => {\r\n  return (\r\n    <div className=\"bg-gray-50 p-6 rounded-lg\">\r\n      <h4 className=\"font-semibold text-gray-800 mb-4\">{titulo}</h4>\r\n      <ResponsiveContainer width=\"100%\" height={300}>\r\n        <BarChart data={data}>\r\n          <XAxis dataKey={xKey} />\r\n          <YAxis />\r\n          <Tooltip />\r\n          <Legend />\r\n          <Bar dataKey={yKey} fill=\"#3B82F6\" />\r\n        </BarChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportesVisualModule;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
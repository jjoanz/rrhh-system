{"ast":null,"code":"import React,{useState,useEffect,useMemo}from\"react\";import{DndProvider,useDrag,useDrop}from\"react-dnd\";import{HTML5Backend}from\"react-dnd-html5-backend\";import{BarChart,Bar,XAxis,YAxis,Tooltip,Legend,ResponsiveContainer,LineChart,Line,PieChart,Pie,Cell}from\"recharts\";import{Download,Play,Save,Plus,Edit,Trash2,Database,DragDropIcon,Filter,Eye,FileText,BarChart3}from\"lucide-react\";import{GripVertical}from\"lucide-react\";// Simulaci贸n del contexto de autenticaci贸n\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const useAuth=()=>({user:{id:1,name:\"Usuario Demo\"},getStoredToken:()=>\"demo-token-12345\",logout:()=>console.log(\"Logout simulado\")});// Datos de ejemplo para la demostraci贸n\nconst mockMetadata={empleados:[\"EmpleadoID\",\"Nombre\",\"Apellido\",\"Email\",\"Puesto\",\"Salario\",\"FechaIngreso\",\"DepartamentoID\"],departamentos:[\"DepartamentoID\",\"Nombre\",\"Descripcion\",\"GerenteID\"],proyectos:[\"ProyectoID\",\"Nombre\",\"FechaInicio\",\"FechaFin\",\"Presupuesto\",\"Estado\"],ventas:[\"VentaID\",\"ProductoID\",\"Cantidad\",\"Precio\",\"FechaVenta\",\"ClienteID\"]};const mockReportesGuardados=[{id:1,nombre:\"Empleados por Departamento\",origen:\"empleados\",fechaCreacion:\"2024-01-15\",fechaModificacion:\"2024-01-20\",modificadoPor:\"Admin\",descripcion:\"Reporte de distribuci贸n de empleados por departamento\"},{id:2,nombre:\"Ventas Mensuales\",origen:\"ventas\",fechaCreacion:\"2024-01-10\",fechaModificacion:\"2024-01-25\",modificadoPor:\"Usuario1\",descripcion:\"An谩lisis de ventas por mes\"}];// Componente para elementos arrastrables\nconst DraggableField=_ref=>{let{name,table,type=\"text\"}=_ref;const[{isDragging},drag]=useDrag(()=>({type:\"FIELD\",item:{name,table,type},collect:monitor=>({isDragging:!!monitor.isDragging()})}));const getTypeIcon=type=>{if(type!==null&&type!==void 0&&type.toLowerCase().includes('id')||type!==null&&type!==void 0&&type.toLowerCase().includes('int'))return'';if(type!==null&&type!==void 0&&type.toLowerCase().includes('date')||type!==null&&type!==void 0&&type.toLowerCase().includes('time'))return'';if(type!==null&&type!==void 0&&type.toLowerCase().includes('decimal')||type!==null&&type!==void 0&&type.toLowerCase().includes('float'))return'';return'';};return/*#__PURE__*/_jsxs(\"div\",{ref:drag,className:`flex items-center gap-2 p-2 m-1 border rounded-lg shadow-sm cursor-move bg-white hover:bg-gray-50 transition-all ${isDragging?\"opacity-50 scale-95\":\"opacity-100\"}`,title:`${table}.${name} (${type||'text'})`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:getTypeIcon(type)}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-600 font-mono\",children:[table,\".\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:name})]});};// Zona de drop para filas, columnas y m茅tricas\nconst DropZone=_ref2=>{let{title,fields,onDrop,onRemove,icon,color=\"blue\"}=_ref2;const[{isOver},drop]=useDrop(()=>({accept:\"FIELD\",drop:item=>onDrop(item),collect:monitor=>({isOver:!!monitor.isOver()})}));const colorClasses={blue:\"border-blue-300 bg-blue-50\",green:\"border-green-300 bg-green-50\",purple:\"border-purple-300 bg-purple-50\"};return/*#__PURE__*/_jsxs(\"div\",{ref:drop,className:`min-h-[100px] p-3 rounded-lg border-2 border-dashed transition-all ${isOver?`${colorClasses[color]} border-${color}-500`:\"border-gray-300 bg-gray-50\"}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-3\",children:[icon,/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-700\",children:title}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500\",children:[\"(\",fields.length,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:fields.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 italic\",children:\"Arrastra campos aqu\\xED\"}):fields.map((field,index)=>/*#__PURE__*/_jsxs(\"div\",{className:`flex items-center gap-2 px-3 py-1 bg-${color}-100 border border-${color}-200 rounded-full text-sm`,children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-mono text-xs text-gray-600\",children:[field.table,\".\"]}),/*#__PURE__*/_jsx(\"span\",{children:field.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onRemove(index),className:\"text-red-500 hover:text-red-700 ml-1\",title:\"Eliminar campo\",children:\"\\xD7\"})]},`${field.table}-${field.name}-${index}`))})]});};// Modal para nuevo reporte\nconst NuevoReporteModal=_ref3=>{let{show,onClose,onSave,metadata}=_ref3;const[formData,setFormData]=useState({nombre:\"\",origen:\"\",descripcion:\"\",predeterminado:false,eliminarDuplicados:false});const handleSave=()=>{if(!formData.nombre.trim()||!formData.origen){alert(\"Nombre y origen son requeridos\");return;}onSave(formData);setFormData({nombre:\"\",origen:\"\",descripcion:\"\",predeterminado:false,eliminarDuplicados:false});};if(!show)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl w-96 max-w-90vw\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5 text-green-600\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold\",children:\"Nuevo Reporte\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"Nombre del reporte *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.nombre,onChange:e=>setFormData({...formData,nombre:e.target.value}),className:\"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent\",placeholder:\"Ej: Ventas por regi\\xF3n\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"Origen del informe *\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.origen,onChange:e=>setFormData({...formData,origen:e.target.value}),className:\"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar fuente de datos\"}),Object.keys(metadata).map(table=>/*#__PURE__*/_jsx(\"option\",{value:table,children:table},table))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-1\",children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.descripcion,onChange:e=>setFormData({...formData,descripcion:e.target.value}),className:\"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-500\",rows:3,placeholder:\"Describe brevemente este reporte...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.predeterminado,onChange:()=>setFormData({...formData,predeterminado:!formData.predeterminado}),className:\"w-4 h-4 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Incluir configuraci\\xF3n predeterminada\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.eliminarDuplicados,onChange:()=>setFormData({...formData,eliminarDuplicados:!formData.eliminarDuplicados}),className:\"w-4 h-4 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Eliminar filas duplicadas\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors\",children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,className:\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),\"Crear Reporte\"]})]})]})});};// Componente principal\nconst ReportesModule=()=>{const{user}=useAuth();const[metadata,setMetadata]=useState(mockMetadata);const[reportesGuardados,setReportesGuardados]=useState(mockReportesGuardados);const[showNuevoModal,setShowNuevoModal]=useState(false);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);// Estado del constructor de reportes\nconst[rows,setRows]=useState([]);const[columns,setColumns]=useState([]);const[metrics,setMetrics]=useState([]);const[sqlQuery,setSqlQuery]=useState(\"\");const[customSql,setCustomSql]=useState(\"\");const[data,setData]=useState([]);const[chartType,setChartType]=useState(\"bar\");// Generar SQL autom谩ticamente\nconst generateSQL=useMemo(()=>{if(rows.length===0&&columns.length===0&&metrics.length===0)return\"\";const allFields=[...rows,...columns,...metrics];const tables=[...new Set(allFields.map(f=>f.table))];const selectFields=allFields.map(f=>`${f.table}.${f.name}`).join(\", \");let query=`SELECT ${selectFields}\\nFROM ${tables.join(\", \")}`;if(rows.length>0||columns.length>0){const groupBy=[...rows,...columns].map(f=>`${f.table}.${f.name}`).join(\", \");query+=`\\nGROUP BY ${groupBy}`;}query+=\"\\nORDER BY \"+(metrics.length>0?`${metrics[0].table}.${metrics[0].name} DESC`:\"1\");return query;},[rows,columns,metrics]);useEffect(()=>{setSqlQuery(generateSQL);},[generateSQL]);// Funciones para manejar drag & drop\nconst addField=(targetArray,setter)=>field=>{const exists=targetArray.some(f=>f.table===field.table&&f.name===field.name);if(!exists){setter([...targetArray,field]);}};const removeField=(targetArray,setter)=>index=>{setter(targetArray.filter((_,i)=>i!==index));};// Ejecutar reporte\nconst ejecutarReporte=async()=>{const query=customSql||sqlQuery;if(!query.trim()){setError(\"No hay consulta para ejecutar\");return;}setLoading(true);setError(null);try{// Simulaci贸n de datos (en producci贸n esto vendr铆a del backend)\nawait new Promise(resolve=>setTimeout(resolve,1000));const mockData=[{departamento:\"Ventas\",empleados:25,promedio_salario:45000},{departamento:\"Marketing\",empleados:18,promedio_salario:42000},{departamento:\"IT\",empleados:32,promedio_salario:55000},{departamento:\"RRHH\",empleados:12,promedio_salario:48000}];setData(mockData);}catch(err){setError(\"Error al ejecutar el reporte: \"+err.message);}finally{setLoading(false);}};// Guardar reporte\nconst guardarReporte=nuevoReporte=>{const reporte={...nuevoReporte,id:Date.now(),fechaCreacion:new Date().toISOString().split('T')[0],fechaModificacion:new Date().toISOString().split('T')[0],modificadoPor:user.name,configuracion:{rows,columns,metrics,sqlQuery:customSql||sqlQuery}};setReportesGuardados([...reportesGuardados,reporte]);setShowNuevoModal(false);alert(\"Reporte guardado exitosamente\");};// Exportar datos\nconst exportarDatos=formato=>{if(data.length===0){alert(\"No hay datos para exportar\");return;}if(formato==='csv'){const csv=[Object.keys(data[0]).join(','),...data.map(row=>Object.values(row).join(','))].join('\\n');const blob=new Blob([csv],{type:'text/csv'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='reporte.csv';a.click();URL.revokeObjectURL(url);}else if(formato==='json'){const json=JSON.stringify(data,null,2);const blob=new Blob([json],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='reporte.json';a.click();URL.revokeObjectURL(url);}};// Renderizar gr谩fico\nconst renderChart=()=>{if(data.length===0)return null;const chartProps={width:\"100%\",height:300,data:data.slice(0,10)// Limitar a 10 elementos para mejor visualizaci贸n\n};switch(chartType){case\"line\":return/*#__PURE__*/_jsxs(LineChart,{...chartProps,children:[/*#__PURE__*/_jsx(XAxis,{dataKey:Object.keys(data[0])[0]}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:Object.keys(data[0])[1],stroke:\"#8884d8\"})]});case\"pie\":return/*#__PURE__*/_jsxs(PieChart,{...chartProps,children:[/*#__PURE__*/_jsx(Pie,{dataKey:Object.keys(data[0])[1],nameKey:Object.keys(data[0])[0],cx:\"50%\",cy:\"50%\",fill:\"#8884d8\",label:true}),/*#__PURE__*/_jsx(Tooltip,{})]});default:return/*#__PURE__*/_jsxs(BarChart,{...chartProps,children:[/*#__PURE__*/_jsx(XAxis,{dataKey:Object.keys(data[0])[0]}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:Object.keys(data[0])[1],fill:\"#8884d8\"})]});}};return/*#__PURE__*/_jsx(DndProvider,{backend:HTML5Backend,children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-800 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-7 h-7 text-blue-600\"}),\"Generador de Reportes\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Crea y gestiona reportes personalizados con drag & drop\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowNuevoModal(true),className:\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),\"Nuevo Reporte\"]})]})}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-700\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setError(null),className:\"text-red-500 hover:text-red-700\",children:\"\\xD7\"})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-700\",children:\"Procesando...\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FileText,{className:\"w-5 h-5 text-gray-600\"}),\"Reportes Guardados (\",reportesGuardados.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Origen\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Creado\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Modificado\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Por\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200\",children:reportesGuardados.map(reporte=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 font-medium text-gray-900\",children:reporte.nombre}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-sm text-gray-600\",children:reporte.origen}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-sm text-gray-600\",children:reporte.descripcion||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-sm text-gray-600\",children:reporte.fechaCreacion}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-sm text-gray-600\",children:reporte.fechaModificacion}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-sm text-gray-600\",children:reporte.modificadoPor}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"p-1 text-blue-600 hover:bg-blue-50 rounded\",title:\"Ver\",children:/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"p-1 text-green-600 hover:bg-green-50 rounded\",title:\"Editar\",children:/*#__PURE__*/_jsx(Edit,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"p-1 text-red-600 hover:bg-red-50 rounded\",title:\"Eliminar\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})})]},reporte.id))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Database,{className:\"w-5 h-5 text-gray-600\"}),\"Editor SQL\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2\",children:\"SQL Generado autom\\xE1ticamente:\"}),/*#__PURE__*/_jsx(\"textarea\",{value:sqlQuery,readOnly:true,className:\"w-full h-32 p-3 border rounded bg-gray-50 font-mono text-sm resize-none\",placeholder:\"El SQL se genera autom\\xE1ticamente...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2\",children:\"SQL Personalizado:\"}),/*#__PURE__*/_jsx(\"textarea\",{value:customSql,onChange:e=>setCustomSql(e.target.value),className:\"w-full h-32 p-3 border rounded font-mono text-sm\",placeholder:\"Escribe tu SQL personalizado aqu\\xED...\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:ejecutarReporte,disabled:loading,className:\"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Play,{className:\"w-4 h-4\"}),\"Ejecutar Reporte\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(DragDropIcon,{className:\"w-5 h-5 text-gray-600\"}),\"Campos Disponibles\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-48 overflow-y-auto\",children:Object.entries(metadata).map(_ref4=>{let[table,fields]=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-gray-700 mb-2 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Database,{className:\"w-4 h-4\"}),table]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-1\",children:fields.map(field=>/*#__PURE__*/_jsx(DraggableField,{table:table,name:field,type:\"text\"},field))})]},table);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-4\",children:\"Constructor Visual\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(DropZone,{title:\"Filas\",fields:rows,onDrop:addField(rows,setRows),onRemove:removeField(rows,setRows),icon:/*#__PURE__*/_jsx(Filter,{className:\"w-4 h-4 text-blue-600\"}),color:\"blue\"}),/*#__PURE__*/_jsx(DropZone,{title:\"Columnas\",fields:columns,onDrop:addField(columns,setColumns),onRemove:removeField(columns,setColumns),icon:/*#__PURE__*/_jsx(BarChart3,{className:\"w-4 h-4 text-green-600\"}),color:\"green\"}),/*#__PURE__*/_jsx(DropZone,{title:\"M\\xE9tricas\",fields:metrics,onDrop:addField(metrics,setMetrics),onRemove:removeField(metrics,setMetrics),icon:/*#__PURE__*/_jsx(Database,{className:\"w-4 h-4 text-purple-600\"}),color:\"purple\"})]})]})]})]}),data.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold\",children:[\"Resultados (\",data.length,\" registros)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(\"select\",{value:chartType,onChange:e=>setChartType(e.target.value),className:\"border rounded px-3 py-1 text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"bar\",children:\"Barras\"}),/*#__PURE__*/_jsx(\"option\",{value:\"line\",children:\"L\\xEDneas\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pie\",children:\"Circular\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>exportarDatos('csv'),className:\"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-3 h-3\"}),\"CSV\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>exportarDatos('json'),className:\"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-3 h-3\"}),\"JSON\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 h-80\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:renderChart()})}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsx(\"tr\",{children:Object.keys(data[0]).map(key=>/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 px-4 py-2 text-left font-medium\",children:key},key))})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.slice(0,50).map((row,index)=>/*#__PURE__*/_jsx(\"tr\",{className:\"hover:bg-gray-50\",children:Object.values(row).map((value,cellIndex)=>/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 px-4 py-2\",children:value},cellIndex))},index))})]}),data.length>50&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mt-2 text-center\",children:[\"Mostrando primeros 50 de \",data.length,\" registros\"]})]})]})]}),/*#__PURE__*/_jsx(NuevoReporteModal,{show:showNuevoModal,onClose:()=>setShowNuevoModal(false),onSave:guardarReporte,metadata:metadata})]})});};export default ReportesModule;","map":{"version":3,"names":["React","useState","useEffect","useMemo","DndProvider","useDrag","useDrop","HTML5Backend","BarChart","Bar","XAxis","YAxis","Tooltip","Legend","ResponsiveContainer","LineChart","Line","PieChart","Pie","Cell","Download","Play","Save","Plus","Edit","Trash2","Database","DragDropIcon","Filter","Eye","FileText","BarChart3","GripVertical","jsx","_jsx","jsxs","_jsxs","useAuth","user","id","name","getStoredToken","logout","console","log","mockMetadata","empleados","departamentos","proyectos","ventas","mockReportesGuardados","nombre","origen","fechaCreacion","fechaModificacion","modificadoPor","descripcion","DraggableField","_ref","table","type","isDragging","drag","item","collect","monitor","getTypeIcon","toLowerCase","includes","ref","className","title","children","DropZone","_ref2","fields","onDrop","onRemove","icon","color","isOver","drop","accept","colorClasses","blue","green","purple","length","map","field","index","onClick","NuevoReporteModal","_ref3","show","onClose","onSave","metadata","formData","setFormData","predeterminado","eliminarDuplicados","handleSave","trim","alert","value","onChange","e","target","placeholder","Object","keys","rows","checked","ReportesModule","setMetadata","reportesGuardados","setReportesGuardados","showNuevoModal","setShowNuevoModal","loading","setLoading","error","setError","setRows","columns","setColumns","metrics","setMetrics","sqlQuery","setSqlQuery","customSql","setCustomSql","data","setData","chartType","setChartType","generateSQL","allFields","tables","Set","f","selectFields","join","query","groupBy","addField","targetArray","setter","exists","some","removeField","filter","_","i","ejecutarReporte","Promise","resolve","setTimeout","mockData","departamento","promedio_salario","err","message","guardarReporte","nuevoReporte","reporte","Date","now","toISOString","split","configuracion","exportarDatos","formato","csv","row","values","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","json","JSON","stringify","renderChart","chartProps","width","height","slice","dataKey","stroke","nameKey","cx","cy","fill","label","backend","readOnly","disabled","entries","_ref4","key","cellIndex"],"sources":["C:/Users/josemontedeoca/rrhh-system/frontend/src/components/modules/Reportes/ReportesModule.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from \"react\";\r\nimport { DndProvider, useDrag, useDrop } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { BarChart, Bar, XAxis, YAxis, Tooltip, Legend, ResponsiveContainer, LineChart, Line, PieChart, Pie, Cell } from \"recharts\";\r\nimport { Download, Play, Save, Plus, Edit, Trash2, Database, DragDropIcon, Filter, Eye, FileText, BarChart3 } from \"lucide-react\";\r\nimport { GripVertical } from \"lucide-react\";\r\n\r\n// Simulaci贸n del contexto de autenticaci贸n\r\nconst useAuth = () => ({\r\n  user: { id: 1, name: \"Usuario Demo\" },\r\n  getStoredToken: () => \"demo-token-12345\",\r\n  logout: () => console.log(\"Logout simulado\")\r\n});\r\n\r\n// Datos de ejemplo para la demostraci贸n\r\nconst mockMetadata = {\r\n  empleados: [\"EmpleadoID\", \"Nombre\", \"Apellido\", \"Email\", \"Puesto\", \"Salario\", \"FechaIngreso\", \"DepartamentoID\"],\r\n  departamentos: [\"DepartamentoID\", \"Nombre\", \"Descripcion\", \"GerenteID\"],\r\n  proyectos: [\"ProyectoID\", \"Nombre\", \"FechaInicio\", \"FechaFin\", \"Presupuesto\", \"Estado\"],\r\n  ventas: [\"VentaID\", \"ProductoID\", \"Cantidad\", \"Precio\", \"FechaVenta\", \"ClienteID\"]\r\n};\r\n\r\nconst mockReportesGuardados = [\r\n  { \r\n    id: 1, \r\n    nombre: \"Empleados por Departamento\", \r\n    origen: \"empleados\", \r\n    fechaCreacion: \"2024-01-15\", \r\n    fechaModificacion: \"2024-01-20\", \r\n    modificadoPor: \"Admin\",\r\n    descripcion: \"Reporte de distribuci贸n de empleados por departamento\"\r\n  },\r\n  { \r\n    id: 2, \r\n    nombre: \"Ventas Mensuales\", \r\n    origen: \"ventas\", \r\n    fechaCreacion: \"2024-01-10\", \r\n    fechaModificacion: \"2024-01-25\", \r\n    modificadoPor: \"Usuario1\",\r\n    descripcion: \"An谩lisis de ventas por mes\"\r\n  }\r\n];\r\n\r\n// Componente para elementos arrastrables\r\nconst DraggableField = ({ name, table, type = \"text\" }) => {\r\n  const [{ isDragging }, drag] = useDrag(() => ({\r\n    type: \"FIELD\",\r\n    item: { name, table, type },\r\n    collect: (monitor) => ({ isDragging: !!monitor.isDragging() }),\r\n  }));\r\n\r\n  const getTypeIcon = (type) => {\r\n    if (type?.toLowerCase().includes('id') || type?.toLowerCase().includes('int')) return '';\r\n    if (type?.toLowerCase().includes('date') || type?.toLowerCase().includes('time')) return '';\r\n    if (type?.toLowerCase().includes('decimal') || type?.toLowerCase().includes('float')) return '';\r\n    return '';\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={drag}\r\n      className={`flex items-center gap-2 p-2 m-1 border rounded-lg shadow-sm cursor-move bg-white hover:bg-gray-50 transition-all ${\r\n        isDragging ? \"opacity-50 scale-95\" : \"opacity-100\"\r\n      }`}\r\n      title={`${table}.${name} (${type || 'text'})`}\r\n    >\r\n      <span className=\"text-sm\">{getTypeIcon(type)}</span>\r\n      <span className=\"text-xs text-gray-600 font-mono\">{table}.</span>\r\n      <span className=\"text-sm font-medium\">{name}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Zona de drop para filas, columnas y m茅tricas\r\nconst DropZone = ({ title, fields, onDrop, onRemove, icon, color = \"blue\" }) => {\r\n  const [{ isOver }, drop] = useDrop(() => ({\r\n    accept: \"FIELD\",\r\n    drop: (item) => onDrop(item),\r\n    collect: (monitor) => ({ isOver: !!monitor.isOver() }),\r\n  }));\r\n\r\n  const colorClasses = {\r\n    blue: \"border-blue-300 bg-blue-50\",\r\n    green: \"border-green-300 bg-green-50\",\r\n    purple: \"border-purple-300 bg-purple-50\"\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={drop}\r\n      className={`min-h-[100px] p-3 rounded-lg border-2 border-dashed transition-all ${\r\n        isOver ? `${colorClasses[color]} border-${color}-500` : \"border-gray-300 bg-gray-50\"\r\n      }`}\r\n    >\r\n      <div className=\"flex items-center gap-2 mb-3\">\r\n        {icon}\r\n        <h4 className=\"font-semibold text-gray-700\">{title}</h4>\r\n        <span className=\"text-xs text-gray-500\">({fields.length})</span>\r\n      </div>\r\n      \r\n      <div className=\"flex flex-wrap gap-2\">\r\n        {fields.length === 0 ? (\r\n          <p className=\"text-sm text-gray-400 italic\">Arrastra campos aqu铆</p>\r\n        ) : (\r\n          fields.map((field, index) => (\r\n            <div\r\n              key={`${field.table}-${field.name}-${index}`}\r\n              className={`flex items-center gap-2 px-3 py-1 bg-${color}-100 border border-${color}-200 rounded-full text-sm`}\r\n            >\r\n              <span className=\"font-mono text-xs text-gray-600\">{field.table}.</span>\r\n              <span>{field.name}</span>\r\n              <button\r\n                onClick={() => onRemove(index)}\r\n                className=\"text-red-500 hover:text-red-700 ml-1\"\r\n                title=\"Eliminar campo\"\r\n              >\r\n                \r\n              </button>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Modal para nuevo reporte\r\nconst NuevoReporteModal = ({ show, onClose, onSave, metadata }) => {\r\n  const [formData, setFormData] = useState({\r\n    nombre: \"\",\r\n    origen: \"\",\r\n    descripcion: \"\",\r\n    predeterminado: false,\r\n    eliminarDuplicados: false\r\n  });\r\n\r\n  const handleSave = () => {\r\n    if (!formData.nombre.trim() || !formData.origen) {\r\n      alert(\"Nombre y origen son requeridos\");\r\n      return;\r\n    }\r\n    onSave(formData);\r\n    setFormData({\r\n      nombre: \"\",\r\n      origen: \"\",\r\n      descripcion: \"\",\r\n      predeterminado: false,\r\n      eliminarDuplicados: false\r\n    });\r\n  };\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\">\r\n      <div className=\"bg-white p-6 rounded-lg shadow-xl w-96 max-w-90vw\">\r\n        <div className=\"flex items-center gap-2 mb-4\">\r\n          <Plus className=\"w-5 h-5 text-green-600\" />\r\n          <h3 className=\"text-lg font-bold\">Nuevo Reporte</h3>\r\n        </div>\r\n        \r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block font-medium mb-1\">Nombre del reporte *</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.nombre}\r\n              onChange={(e) => setFormData({...formData, nombre: e.target.value})}\r\n              className=\"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"Ej: Ventas por regi贸n\"\r\n            />\r\n          </div>\r\n          \r\n          <div>\r\n            <label className=\"block font-medium mb-1\">Origen del informe *</label>\r\n            <select\r\n              value={formData.origen}\r\n              onChange={(e) => setFormData({...formData, origen: e.target.value})}\r\n              className=\"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              <option value=\"\">Seleccionar fuente de datos</option>\r\n              {Object.keys(metadata).map(table => (\r\n                <option key={table} value={table}>{table}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          \r\n          <div>\r\n            <label className=\"block font-medium mb-1\">Descripci贸n</label>\r\n            <textarea\r\n              value={formData.descripcion}\r\n              onChange={(e) => setFormData({...formData, descripcion: e.target.value})}\r\n              className=\"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-500\"\r\n              rows={3}\r\n              placeholder=\"Describe brevemente este reporte...\"\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"space-y-2\">\r\n            <label className=\"flex items-center gap-2\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={formData.predeterminado}\r\n                onChange={() => setFormData({...formData, predeterminado: !formData.predeterminado})}\r\n                className=\"w-4 h-4 text-blue-600\"\r\n              />\r\n              <span className=\"text-sm\">Incluir configuraci贸n predeterminada</span>\r\n            </label>\r\n            <label className=\"flex items-center gap-2\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={formData.eliminarDuplicados}\r\n                onChange={() => setFormData({...formData, eliminarDuplicados: !formData.eliminarDuplicados})}\r\n                className=\"w-4 h-4 text-blue-600\"\r\n              />\r\n              <span className=\"text-sm\">Eliminar filas duplicadas</span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex justify-end gap-2 mt-6\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors\"\r\n          >\r\n            Cancelar\r\n          </button>\r\n          <button\r\n            onClick={handleSave}\r\n            className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors flex items-center gap-2\"\r\n          >\r\n            <Save className=\"w-4 h-4\" />\r\n            Crear Reporte\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Componente principal\r\nconst ReportesModule = () => {\r\n  const { user } = useAuth();\r\n  const [metadata, setMetadata] = useState(mockMetadata);\r\n  const [reportesGuardados, setReportesGuardados] = useState(mockReportesGuardados);\r\n  const [showNuevoModal, setShowNuevoModal] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  \r\n  // Estado del constructor de reportes\r\n  const [rows, setRows] = useState([]);\r\n  const [columns, setColumns] = useState([]);\r\n  const [metrics, setMetrics] = useState([]);\r\n  const [sqlQuery, setSqlQuery] = useState(\"\");\r\n  const [customSql, setCustomSql] = useState(\"\");\r\n  const [data, setData] = useState([]);\r\n  const [chartType, setChartType] = useState(\"bar\");\r\n\r\n  // Generar SQL autom谩ticamente\r\n  const generateSQL = useMemo(() => {\r\n    if (rows.length === 0 && columns.length === 0 && metrics.length === 0) return \"\";\r\n    \r\n    const allFields = [...rows, ...columns, ...metrics];\r\n    const tables = [...new Set(allFields.map(f => f.table))];\r\n    const selectFields = allFields.map(f => `${f.table}.${f.name}`).join(\", \");\r\n    \r\n    let query = `SELECT ${selectFields}\\nFROM ${tables.join(\", \")}`;\r\n    \r\n    if (rows.length > 0 || columns.length > 0) {\r\n      const groupBy = [...rows, ...columns].map(f => `${f.table}.${f.name}`).join(\", \");\r\n      query += `\\nGROUP BY ${groupBy}`;\r\n    }\r\n    \r\n    query += \"\\nORDER BY \" + (metrics.length > 0 ? `${metrics[0].table}.${metrics[0].name} DESC` : \"1\");\r\n    \r\n    return query;\r\n  }, [rows, columns, metrics]);\r\n\r\n  useEffect(() => {\r\n    setSqlQuery(generateSQL);\r\n  }, [generateSQL]);\r\n\r\n  // Funciones para manejar drag & drop\r\n  const addField = (targetArray, setter) => (field) => {\r\n    const exists = targetArray.some(f => f.table === field.table && f.name === field.name);\r\n    if (!exists) {\r\n      setter([...targetArray, field]);\r\n    }\r\n  };\r\n\r\n  const removeField = (targetArray, setter) => (index) => {\r\n    setter(targetArray.filter((_, i) => i !== index));\r\n  };\r\n\r\n  // Ejecutar reporte\r\n  const ejecutarReporte = async () => {\r\n    const query = customSql || sqlQuery;\r\n    if (!query.trim()) {\r\n      setError(\"No hay consulta para ejecutar\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // Simulaci贸n de datos (en producci贸n esto vendr铆a del backend)\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      const mockData = [\r\n        { departamento: \"Ventas\", empleados: 25, promedio_salario: 45000 },\r\n        { departamento: \"Marketing\", empleados: 18, promedio_salario: 42000 },\r\n        { departamento: \"IT\", empleados: 32, promedio_salario: 55000 },\r\n        { departamento: \"RRHH\", empleados: 12, promedio_salario: 48000 },\r\n      ];\r\n      \r\n      setData(mockData);\r\n    } catch (err) {\r\n      setError(\"Error al ejecutar el reporte: \" + err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Guardar reporte\r\n  const guardarReporte = (nuevoReporte) => {\r\n    const reporte = {\r\n      ...nuevoReporte,\r\n      id: Date.now(),\r\n      fechaCreacion: new Date().toISOString().split('T')[0],\r\n      fechaModificacion: new Date().toISOString().split('T')[0],\r\n      modificadoPor: user.name,\r\n      configuracion: {\r\n        rows,\r\n        columns,\r\n        metrics,\r\n        sqlQuery: customSql || sqlQuery\r\n      }\r\n    };\r\n    \r\n    setReportesGuardados([...reportesGuardados, reporte]);\r\n    setShowNuevoModal(false);\r\n    alert(\"Reporte guardado exitosamente\");\r\n  };\r\n\r\n  // Exportar datos\r\n  const exportarDatos = (formato) => {\r\n    if (data.length === 0) {\r\n      alert(\"No hay datos para exportar\");\r\n      return;\r\n    }\r\n\r\n    if (formato === 'csv') {\r\n      const csv = [\r\n        Object.keys(data[0]).join(','),\r\n        ...data.map(row => Object.values(row).join(','))\r\n      ].join('\\n');\r\n      \r\n      const blob = new Blob([csv], { type: 'text/csv' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = 'reporte.csv';\r\n      a.click();\r\n      URL.revokeObjectURL(url);\r\n    } else if (formato === 'json') {\r\n      const json = JSON.stringify(data, null, 2);\r\n      const blob = new Blob([json], { type: 'application/json' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = 'reporte.json';\r\n      a.click();\r\n      URL.revokeObjectURL(url);\r\n    }\r\n  };\r\n\r\n  // Renderizar gr谩fico\r\n  const renderChart = () => {\r\n    if (data.length === 0) return null;\r\n\r\n    const chartProps = {\r\n      width: \"100%\",\r\n      height: 300,\r\n      data: data.slice(0, 10) // Limitar a 10 elementos para mejor visualizaci贸n\r\n    };\r\n\r\n    switch (chartType) {\r\n      case \"line\":\r\n        return (\r\n          <LineChart {...chartProps}>\r\n            <XAxis dataKey={Object.keys(data[0])[0]} />\r\n            <YAxis />\r\n            <Tooltip />\r\n            <Legend />\r\n            <Line type=\"monotone\" dataKey={Object.keys(data[0])[1]} stroke=\"#8884d8\" />\r\n          </LineChart>\r\n        );\r\n      case \"pie\":\r\n        return (\r\n          <PieChart {...chartProps}>\r\n            <Pie\r\n              dataKey={Object.keys(data[0])[1]}\r\n              nameKey={Object.keys(data[0])[0]}\r\n              cx=\"50%\"\r\n              cy=\"50%\"\r\n              fill=\"#8884d8\"\r\n              label\r\n            />\r\n            <Tooltip />\r\n          </PieChart>\r\n        );\r\n      default:\r\n        return (\r\n          <BarChart {...chartProps}>\r\n            <XAxis dataKey={Object.keys(data[0])[0]} />\r\n            <YAxis />\r\n            <Tooltip />\r\n            <Legend />\r\n            <Bar dataKey={Object.keys(data[0])[1]} fill=\"#8884d8\" />\r\n          </BarChart>\r\n        );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DndProvider backend={HTML5Backend}>\r\n      <div className=\"min-h-screen bg-gray-50 p-6\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          {/* Header */}\r\n          <div className=\"bg-white rounded-lg shadow-sm p-6 mb-6\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <div>\r\n                <h1 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\r\n                  <BarChart3 className=\"w-7 h-7 text-blue-600\" />\r\n                  Generador de Reportes\r\n                </h1>\r\n                <p className=\"text-gray-600 mt-1\">Crea y gestiona reportes personalizados con drag & drop</p>\r\n              </div>\r\n              <button\r\n                onClick={() => setShowNuevoModal(true)}\r\n                className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2\"\r\n              >\r\n                <Plus className=\"w-4 h-4\" />\r\n                Nuevo Reporte\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Mensajes de estado */}\r\n          {error && (\r\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center justify-between\">\r\n              <span className=\"text-red-700\">{error}</span>\r\n              <button onClick={() => setError(null)} className=\"text-red-500 hover:text-red-700\"></button>\r\n            </div>\r\n          )}\r\n\r\n          {loading && (\r\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600\"></div>\r\n                <span className=\"text-blue-700\">Procesando...</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Reportes guardados */}\r\n          <div className=\"bg-white rounded-lg shadow-sm mb-6\">\r\n            <div className=\"p-6 border-b\">\r\n              <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n                <FileText className=\"w-5 h-5 text-gray-600\" />\r\n                Reportes Guardados ({reportesGuardados.length})\r\n              </h3>\r\n            </div>\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Nombre</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Origen</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Descripci贸n</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Creado</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Modificado</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Por</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Acciones</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-gray-200\">\r\n                  {reportesGuardados.map((reporte) => (\r\n                    <tr key={reporte.id} className=\"hover:bg-gray-50\">\r\n                      <td className=\"px-6 py-4 font-medium text-gray-900\">{reporte.nombre}</td>\r\n                      <td className=\"px-6 py-4 text-sm text-gray-600\">{reporte.origen}</td>\r\n                      <td className=\"px-6 py-4 text-sm text-gray-600\">{reporte.descripcion || \"-\"}</td>\r\n                      <td className=\"px-6 py-4 text-sm text-gray-600\">{reporte.fechaCreacion}</td>\r\n                      <td className=\"px-6 py-4 text-sm text-gray-600\">{reporte.fechaModificacion}</td>\r\n                      <td className=\"px-6 py-4 text-sm text-gray-600\">{reporte.modificadoPor}</td>\r\n                      <td className=\"px-6 py-4 text-sm\">\r\n                        <div className=\"flex gap-1\">\r\n                          <button className=\"p-1 text-blue-600 hover:bg-blue-50 rounded\" title=\"Ver\">\r\n                            <Eye className=\"w-4 h-4\" />\r\n                          </button>\r\n                          <button className=\"p-1 text-green-600 hover:bg-green-50 rounded\" title=\"Editar\">\r\n                            <Edit className=\"w-4 h-4\" />\r\n                          </button>\r\n                          <button className=\"p-1 text-red-600 hover:bg-red-50 rounded\" title=\"Eliminar\">\r\n                            <Trash2 className=\"w-4 h-4\" />\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Constructor de reportes */}\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\">\r\n            {/* SQL Editor */}\r\n            <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n              <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                <Database className=\"w-5 h-5 text-gray-600\" />\r\n                Editor SQL\r\n              </h3>\r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-sm font-medium mb-2\">SQL Generado autom谩ticamente:</label>\r\n                <textarea\r\n                  value={sqlQuery}\r\n                  readOnly\r\n                  className=\"w-full h-32 p-3 border rounded bg-gray-50 font-mono text-sm resize-none\"\r\n                  placeholder=\"El SQL se genera autom谩ticamente...\"\r\n                />\r\n              </div>\r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-sm font-medium mb-2\">SQL Personalizado:</label>\r\n                <textarea\r\n                  value={customSql}\r\n                  onChange={(e) => setCustomSql(e.target.value)}\r\n                  className=\"w-full h-32 p-3 border rounded font-mono text-sm\"\r\n                  placeholder=\"Escribe tu SQL personalizado aqu铆...\"\r\n                />\r\n              </div>\r\n              <button\r\n                onClick={ejecutarReporte}\r\n                disabled={loading}\r\n                className=\"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2\"\r\n              >\r\n                <Play className=\"w-4 h-4\" />\r\n                Ejecutar Reporte\r\n              </button>\r\n            </div>\r\n\r\n            {/* Constructor Visual */}\r\n            <div className=\"lg:col-span-2 space-y-6\">\r\n              {/* Campos disponibles */}\r\n              <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n                <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\r\n                  <DragDropIcon className=\"w-5 h-5 text-gray-600\" />\r\n                  Campos Disponibles\r\n                </h3>\r\n                <div className=\"max-h-48 overflow-y-auto\">\r\n                  {Object.entries(metadata).map(([table, fields]) => (\r\n                    <div key={table} className=\"mb-4\">\r\n                      <h4 className=\"font-medium text-gray-700 mb-2 flex items-center gap-2\">\r\n                        <Database className=\"w-4 h-4\" />\r\n                        {table}\r\n                      </h4>\r\n                      <div className=\"grid grid-cols-2 gap-1\">\r\n                        {fields.map((field) => (\r\n                          <DraggableField key={field} table={table} name={field} type=\"text\" />\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Drop Zones */}\r\n              <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n                <h3 className=\"font-semibold mb-4\">Constructor Visual</h3>\r\n                <div className=\"space-y-4\">\r\n                  <DropZone\r\n                    title=\"Filas\"\r\n                    fields={rows}\r\n                    onDrop={addField(rows, setRows)}\r\n                    onRemove={removeField(rows, setRows)}\r\n                    icon={<Filter className=\"w-4 h-4 text-blue-600\" />}\r\n                    color=\"blue\"\r\n                  />\r\n                  <DropZone\r\n                    title=\"Columnas\"\r\n                    fields={columns}\r\n                    onDrop={addField(columns, setColumns)}\r\n                    onRemove={removeField(columns, setColumns)}\r\n                    icon={<BarChart3 className=\"w-4 h-4 text-green-600\" />}\r\n                    color=\"green\"\r\n                  />\r\n                  <DropZone\r\n                    title=\"M茅tricas\"\r\n                    fields={metrics}\r\n                    onDrop={addField(metrics, setMetrics)}\r\n                    onRemove={removeField(metrics, setMetrics)}\r\n                    icon={<Database className=\"w-4 h-4 text-purple-600\" />}\r\n                    color=\"purple\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Resultados */}\r\n          {data.length > 0 && (\r\n            <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n              <div className=\"flex justify-between items-center mb-6\">\r\n                <h3 className=\"text-lg font-semibold\">Resultados ({data.length} registros)</h3>\r\n                <div className=\"flex gap-2\">\r\n                  <select\r\n                    value={chartType}\r\n                    onChange={(e) => setChartType(e.target.value)}\r\n                    className=\"border rounded px-3 py-1 text-sm\"\r\n                  >\r\n                    <option value=\"bar\">Barras</option>\r\n                    <option value=\"line\">L铆neas</option>\r\n                    <option value=\"pie\">Circular</option>\r\n                  </select>\r\n                  <button\r\n                    onClick={() => exportarDatos('csv')}\r\n                    className=\"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 flex items-center gap-1\"\r\n                  >\r\n                    <Download className=\"w-3 h-3\" />\r\n                    CSV\r\n                  </button>\r\n                  <button\r\n                    onClick={() => exportarDatos('json')}\r\n                    className=\"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 flex items-center gap-1\"\r\n                  >\r\n                    <Download className=\"w-3 h-3\" />\r\n                    JSON\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Gr谩fico */}\r\n              <div className=\"mb-6 h-80\">\r\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                  {renderChart()}\r\n                </ResponsiveContainer>\r\n              </div>\r\n\r\n              {/* Tabla de datos */}\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full border-collapse border border-gray-300\">\r\n                  <thead className=\"bg-gray-50\">\r\n                    <tr>\r\n                      {Object.keys(data[0]).map((key) => (\r\n                        <th key={key} className=\"border border-gray-300 px-4 py-2 text-left font-medium\">\r\n                          {key}\r\n                        </th>\r\n                      ))}\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {data.slice(0, 50).map((row, index) => (\r\n                      <tr key={index} className=\"hover:bg-gray-50\">\r\n                        {Object.values(row).map((value, cellIndex) => (\r\n                          <td key={cellIndex} className=\"border border-gray-300 px-4 py-2\">\r\n                            {value}\r\n                          </td>\r\n                        ))}\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n                {data.length > 50 && (\r\n                  <p className=\"text-sm text-gray-500 mt-2 text-center\">\r\n                    Mostrando primeros 50 de {data.length} registros\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Modal */}\r\n        <NuevoReporteModal\r\n          show={showNuevoModal}\r\n          onClose={() => setShowNuevoModal(false)}\r\n          onSave={guardarReporte}\r\n          metadata={metadata}\r\n        />\r\n      </div>\r\n    </DndProvider>\r\n  );\r\n};\r\n\r\nexport default ReportesModule;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Users,Settings,Shield,Check,X,Save,AlertCircle,Eye,Plus,Edit,Trash2,EyeOff}from'lucide-react';// ðŸ”‘ URLs de API\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL='http://localhost:5000/api';const AUTH_API_URL=`${API_BASE_URL}/auth`;const ADMIN_API_URL=`${API_BASE_URL}/admin`;// âœ… FunciÃ³n para obtener el token\nconst getToken=()=>{return localStorage.getItem('token')||localStorage.getItem('rrhh_token');};// ðŸ“‹ MÃ³dulos predefinidos del sistema\nconst MODULOS_SISTEMA=[{id:1,nombre:'empleados',descripcion:'GestiÃ³n de empleados'},{id:2,nombre:'vacantes',descripcion:'GestiÃ³n de vacantes'},{id:3,nombre:'postulaciones',descripcion:'GestiÃ³n de postulaciones'},{id:4,nombre:'nomina',descripcion:'GestiÃ³n de nÃ³mina'},{id:5,nombre:'vacaciones',descripcion:'GestiÃ³n de vacaciones'},{id:6,nombre:'capacitaciones',descripcion:'GestiÃ³n de capacitaciones'},{id:7,nombre:'asistencia',descripcion:'Control de asistencias'},{id:8,nombre:'departamentos',descripcion:'GestiÃ³n de departamentos'},{id:9,nombre:'puestos',descripciÃ³n:'GestiÃ³n de puestos'},{id:10,nombre:'reportes',descripcion:'Reportes del sistema'},{id:11,nombre:'admin',descripcion:'AdministraciÃ³n de usuarios y permisos'}];const AdminPermissions=()=>{const[activeTab,setActiveTab]=useState('usuarios');const[usuarios,setUsuarios]=useState([]);const[roles,setRoles]=useState([]);const[selectedRol,setSelectedRol]=useState(null);const[selectedRolName,setSelectedRolName]=useState('');const[permisos,setPermisos]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[message,setMessage]=useState({type:'',text:''});const[changedRoles,setChangedRoles]=useState({});// Lista de roles disponibles\nconst rolesDisponibles=['colaborador','gerente','director','rrhh','gerente_rrhh','director_rrhh','admin'];// --- FunciÃ³n helper para manejar errores de API ---\nconst handleApiError=(error,response)=>{console.error('Error de API:',{error,status:response===null||response===void 0?void 0:response.status});if((response===null||response===void 0?void 0:response.status)===401){setError('SesiÃ³n expirada. Por favor, inicia sesiÃ³n nuevamente.');}else if((response===null||response===void 0?void 0:response.status)===403){setError('No tienes permisos para realizar esta acciÃ³n.');}else if((response===null||response===void 0?void 0:response.status)===404){setError('Endpoint no encontrado. Verifica la configuraciÃ³n del servidor.');}else{setError(error.message||'Error interno del servidor');}};// --- Debug de token ---\nconst debugToken=()=>{const token=getToken();console.log('ðŸ” Token encontrado:',token?'SÃ':'NO');if(token){try{const payload=JSON.parse(atob(token.split('.')[1]));console.log('ðŸ“‹ Payload del token:',payload);}catch(e){console.error('âŒ Token malformado:',e);}}};// --- Inicializar permisos para un rol ---\nconst initializePermisosForRole=()=>{return MODULOS_SISTEMA.map((modulo,index)=>({PermisoID:`temp_${index}`,ModuloID:modulo.id,NombreModulo:modulo.nombre,DescripcionModulo:modulo.descripcion,EstaVisible:true,PuedeVer:false,PuedeCrear:false,PuedeEditar:false,PuedeEliminar:false}));};// --- Cargar usuarios (CORREGIDO) ---\nconst loadUsuarios=async()=>{setLoading(true);setError(null);debugToken();// Debug del token\ntry{// Intentar mÃºltiples endpoints hasta encontrar uno que funcione\nconst endpoints=[`${AUTH_API_URL}/users`,`${API_BASE_URL}/usuarios`,`${ADMIN_API_URL}/users`,`${API_BASE_URL}/admin/usuarios`];let res=null;let usedEndpoint=null;for(const endpoint of endpoints){console.log('ðŸ“¡ Intentando endpoint:',endpoint);try{res=await fetch(endpoint,{method:'GET',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'}});if(res.ok){usedEndpoint=endpoint;console.log('âœ… Endpoint funciona:',endpoint);break;}else{console.log(`âŒ Endpoint ${endpoint} fallÃ³ con status:`,res.status);}}catch(err){console.log(`ðŸ’¥ Error en endpoint ${endpoint}:`,err.message);continue;}}if(!res||!res.ok){const errorText=res?await res.text():'NingÃºn endpoint funcionÃ³';console.error('âŒ Todos los endpoints fallaron:',errorText);handleApiError(new Error(`No se pudo conectar: ${errorText}`),res);return;}console.log('ðŸ“Š Usando endpoint exitoso:',usedEndpoint);console.log('ðŸ“Š Respuesta del servidor:',{status:res.status,statusText:res.statusText,ok:res.ok});const data=await res.json();console.log('ðŸ“‹ Datos recibidos:',data);// Mapear la respuesta a la estructura esperada\nlet usuariosData=[];if(data.usuarios){// Si viene en formato { usuarios: [...] } - TU CASO\nusuariosData=data.usuarios;console.log('ðŸŽ¯ Usando data.usuarios:',usuariosData.length);}else if(data.users){// Si viene en formato { users: [...] }\nusuariosData=data.users;console.log('ðŸŽ¯ Usando data.users:',usuariosData.length);}else if(Array.isArray(data)){// Si viene directamente como array\nusuariosData=data;console.log('ðŸŽ¯ Usando data directamente:',usuariosData.length);}else if(data.recordset){// Si viene en formato de recordset de SQL Server\nusuariosData=data.recordset;console.log('ðŸŽ¯ Usando data.recordset:',usuariosData.length);}console.log('ðŸ“Š usuariosData antes de normalizar:',usuariosData);// Normalizar la estructura de datos\nconst usuariosNormalizados=usuariosData.map(user=>({id:user.UsuarioID||user.id,username:user.Username||user.username,email:user.Email||user.email,rol:user.Rol||user.role||user.rol,estado:user.Estado||user.estado||1,empleadoId:user.EmpleadoID||user.empleadoId}));console.log('ðŸ‘¥ Usuarios normalizados:',usuariosNormalizados);// Obtener nombres completos de empleados\nconst usuariosConNombres=await Promise.all(usuariosNormalizados.map(async usuario=>{if(usuario.empleadoId){try{const resEmpleado=await fetch(`${API_BASE_URL}/empleados/${usuario.empleadoId}`,{headers:{'Authorization':`Bearer ${getToken()}`}});if(resEmpleado.ok){const empleadoData=await resEmpleado.json();const empleado=empleadoData.empleado||empleadoData;return{...usuario,nombreCompleto:`${empleado.NOMBRE} ${empleado.APELLIDO}`.trim(),nombre:empleado.NOMBRE,apellido:empleado.APELLIDO};}}catch(err){console.error(`Error obteniendo empleado ${usuario.empleadoId}:`,err);}}return usuario;}));setUsuarios(usuariosConNombres);}catch(err){console.error('ðŸ’¥ Error cargando usuarios:',err);handleApiError(err);}finally{setLoading(false);}};// --- Cargar roles ---\nconst loadRoles=async()=>{setLoading(true);setError(null);try{console.log('ðŸ“¡ Cargando roles desde:',`${ADMIN_API_URL}/roles`);const res=await fetch(`${ADMIN_API_URL}/roles`,{headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'}});console.log('ðŸ“Š Respuesta roles:',{status:res.status,ok:res.ok});// Si no existe el endpoint, usar roles por defecto\nif(!res.ok&&res.status===404){console.log('âš ï¸ Endpoint de roles no encontrado, usando roles por defecto');const defaultRoles=rolesDisponibles.map((rol,index)=>({RolID:index+1,NombreRol:rol,Descripcion:`Rol de ${rol.replace('_',' ')}`}));setRoles(defaultRoles);return;}if(!res.ok){handleApiError(new Error(`Error ${res.status}: ${res.statusText}`),res);return;}const data=await res.json();console.log('ðŸ“‹ Datos de roles:',data);let rolesData=data.roles||data.recordset||data;setRoles(rolesData);}catch(err){console.error('ðŸ’¥ Error cargando roles:',err);// Usar roles por defecto en caso de error\nconst defaultRoles=rolesDisponibles.map((rol,index)=>({RolID:index+1,NombreRol:rol,Descripcion:`Rol de ${rol.replace('_',' ')}`}));setRoles(defaultRoles);}finally{setLoading(false);}};// --- Cargar permisos de un rol especÃ­fico ---\nconst loadPermisos=async rolId=>{if(!rolId)return;setLoading(true);try{console.log('ðŸ“¡ Cargando permisos para rol:',rolId);const res=await fetch(`${ADMIN_API_URL}/permisos/${rolId}`,{headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'}});console.log('ðŸ“Š Respuesta permisos:',{status:res.status,ok:res.ok});if(!res.ok&&res.status!==404){handleApiError(new Error(`Error ${res.status}: ${res.statusText}`),res);return;}let data={permisos:[]};if(res.ok){data=await res.json();console.log('ðŸ“‹ Permisos recibidos:',data);}// Si no hay permisos existentes, inicializar con todos los mÃ³dulos\nif(!data.permisos||data.permisos.length===0){console.log('âš ï¸ No hay permisos, inicializando por defecto');setPermisos(initializePermisosForRole());}else{// Combinar permisos existentes con mÃ³dulos del sistema\nconst permisosExistentes=data.permisos;const permisosCompletos=MODULOS_SISTEMA.map((modulo,index)=>{const permisoExistente=permisosExistentes.find(p=>p.ModuloID===modulo.id||p.NombreModulo===modulo.nombre);return{PermisoID:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PermisoID)||`temp_${index}`,ModuloID:modulo.id,NombreModulo:modulo.nombre,DescripcionModulo:modulo.descripcion,EstaVisible:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.EstaVisible)!==false,PuedeVer:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PuedeVer)||false,PuedeCrear:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PuedeCrear)||false,PuedeEditar:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PuedeEditar)||false,PuedeEliminar:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PuedeEliminar)||false};});setPermisos(permisosCompletos);}}catch(err){console.error('ðŸ’¥ Error cargando permisos:',err);setPermisos(initializePermisosForRole());}finally{setLoading(false);}};// --- Manejar cambio temporal de rol ---\nconst handleRoleChange=(userId,nuevoRol)=>{setChangedRoles(prev=>({...prev,[userId]:nuevoRol}));};// --- Actualizar rol de usuario ---\nconst updateUserRole=async(userId,nuevoRol)=>{console.log('ðŸ”„ Actualizando rol:',{userId,nuevoRol});try{const usuario=usuarios.find(u=>u.id===userId);if(!usuario){throw new Error('Usuario no encontrado');}const res=await fetch(`${AUTH_API_URL}/users/${userId}`,{method:'PUT',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'},body:JSON.stringify({username:usuario.username,email:usuario.email,role:nuevoRol,estado:usuario.estado})});if(!res.ok){const errorText=await res.text();throw new Error(`Error ${res.status}: ${errorText}`);}setMessage({type:'success',text:'Rol actualizado correctamente'});// Limpiar cambios pendientes para este usuario\nsetChangedRoles(prev=>{const newChanges={...prev};delete newChanges[userId];return newChanges;});// Recargar usuarios\nawait loadUsuarios();}catch(err){console.error('ðŸ’¥ Error actualizando rol:',err);setMessage({type:'error',text:err.message});}};// --- Guardar todos los cambios de roles ---\nconst saveAllRoleChanges=async()=>{const changeCount=Object.keys(changedRoles).length;if(changeCount===0){setMessage({type:'error',text:'No hay cambios pendientes para guardar'});return;}setLoading(true);let successCount=0;let errorCount=0;try{for(const[userId,nuevoRol]of Object.entries(changedRoles)){try{await updateUserRole(parseInt(userId),nuevoRol);successCount++;}catch(error){errorCount++;console.error(`Error actualizando usuario ${userId}:`,error);}}if(errorCount===0){setMessage({type:'success',text:`Se actualizaron ${successCount} roles correctamente`});setChangedRoles({});}else{setMessage({type:'error',text:`${successCount} exitosos, ${errorCount} fallaron`});}}finally{setLoading(false);}};// --- Cancelar cambios ---\nconst cancelRoleChanges=()=>{setChangedRoles({});setMessage({type:'success',text:'Cambios cancelados'});};// --- Obtener el rol actual (con cambios pendientes) ---\nconst getCurrentRole=usuario=>{return changedRoles[usuario.id]||usuario.rol;};// --- Actualizar permisos ---\nconst updatePermisos=async()=>{if(!selectedRol)return;try{const permisosData=permisos.map(p=>({moduloId:p.ModuloID,nombreModulo:p.NombreModulo,descripcionModulo:p.DescripcionModulo,estaVisible:p.EstaVisible,puedeVer:p.PuedeVer,puedeCrear:p.PuedeCrear,puedeEditar:p.PuedeEditar,puedeEliminar:p.PuedeEliminar}));const res=await fetch(`${ADMIN_API_URL}/permisos/${selectedRol}`,{method:'PUT',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'},body:JSON.stringify({permisos:permisosData})});if(!res.ok){const errorText=await res.text();throw new Error(`Error ${res.status}: ${errorText}`);}setMessage({type:'success',text:'Permisos actualizados correctamente'});}catch(err){console.error('ðŸ’¥ Error actualizando permisos:',err);setMessage({type:'error',text:err.message});}};// --- Cambiar permiso especÃ­fico ---\nconst togglePermiso=(permisoId,campo)=>{setPermisos(prev=>prev.map(p=>p.PermisoID===permisoId?{...p,[campo]:!p[campo]}:p));};// --- Toggle visibilidad del mÃ³dulo ---\nconst toggleVisibilidad=permisoId=>{setPermisos(prev=>prev.map(p=>p.PermisoID===permisoId?{...p,EstaVisible:!p.EstaVisible,PuedeVer:!p.EstaVisible?p.PuedeVer:false,PuedeCrear:!p.EstaVisible?p.PuedeCrear:false,PuedeEditar:!p.EstaVisible?p.PuedeEditar:false,PuedeEliminar:!p.EstaVisible?p.PuedeEliminar:false}:p));};// --- Seleccionar rol para editar permisos ---\nconst selectRol=(rolId,rolName)=>{setSelectedRol(rolId);setSelectedRolName(rolName);loadPermisos(rolId);};// --- Cargar datos al inicio ---\nuseEffect(()=>{console.log('ðŸš€ Componente montado, tab activo:',activeTab);if(activeTab==='usuarios'){loadUsuarios();}else if(activeTab==='permisos'){loadRoles();}},[activeTab]);// Limpiar mensajes despuÃ©s de 5 segundos\nuseEffect(()=>{if(message.text){const timer=setTimeout(()=>{setMessage({type:'',text:''});},5000);return()=>clearTimeout(timer);}},[message]);if(loading&&usuarios.length===0&&roles.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Cargando...\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 p-4 sm:p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-b border-gray-200 px-6 py-4\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(Shield,{className:\"mr-3 h-7 w-7 text-blue-600\"}),\"Gesti\\xF3n de Roles y Permisos\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Administra usuarios, roles y permisos del sistema\"})]}),message.text&&/*#__PURE__*/_jsxs(\"div\",{className:`mx-6 mt-4 p-4 rounded-md flex items-center ${message.type==='success'?'bg-green-50 border border-green-200 text-green-800':'bg-red-50 border border-red-200 text-red-800'}`,children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"mr-2 h-5 w-5\"}),message.text]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mx-6 mt-4 p-4 rounded-md bg-red-50 border border-red-200 text-red-800 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"mr-2 h-5 w-5\"}),\"Error: \",error]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"flex px-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('usuarios'),className:`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${activeTab==='usuarios'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,children:[/*#__PURE__*/_jsx(Users,{className:\"inline-block mr-2 h-4 w-4\"}),\"Gesti\\xF3n de Usuarios\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('permisos'),className:`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${activeTab==='permisos'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,children:[/*#__PURE__*/_jsx(Settings,{className:\"inline-block mr-2 h-4 w-4\"}),\"Configuraci\\xF3n de Permisos\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('info'),className:`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${activeTab==='info'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,children:[/*#__PURE__*/_jsx(Eye,{className:\"inline-block mr-2 h-4 w-4\"}),\"Informaci\\xF3n del Sistema\"]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[activeTab==='usuarios'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Usuarios del Sistema\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium\",children:[usuarios.length,\" usuarios\"]}),Object.keys(changedRoles).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium\",children:[Object.keys(changedRoles).length,\" cambios pendientes\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:saveAllRoleChanges,disabled:loading,className:\"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50\",children:[/*#__PURE__*/_jsx(Save,{className:\"mr-1.5 h-4 w-4\"}),\"Guardar Todo\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:cancelRoleChanges,disabled:loading,className:\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\",children:[/*#__PURE__*/_jsx(X,{className:\"mr-1.5 h-4 w-4\"}),\"Cancelar\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Usuario\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Rol Actual\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Estado\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:usuarios.map(usuario=>{var _usuario$username,_usuario$username$cha;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 h-10 w-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium text-sm\",children:((_usuario$username=usuario.username)===null||_usuario$username===void 0?void 0:(_usuario$username$cha=_usuario$username.charAt(0))===null||_usuario$username$cha===void 0?void 0:_usuario$username$cha.toUpperCase())||'U'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:usuario.email?usuario.email.split('@')[0]:usuario.username}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"ID: \",usuario.id]})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:usuario.email||'Sin email'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${changedRoles[usuario.id]?'bg-yellow-100 text-yellow-800 border border-yellow-300':'bg-blue-100 text-blue-800'}`,children:getCurrentRole(usuario)}),changedRoles[usuario.id]&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs text-yellow-600 font-medium\",children:\"(Pendiente)\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${usuario.estado==='activo'||usuario.estado===1||usuario.estado===true?'bg-green-100 text-green-800':'bg-red-100 text-red-800'}`,children:usuario.estado==='activo'||usuario.estado===1||usuario.estado===true?'Activo':'Inactivo'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"select\",{value:getCurrentRole(usuario),onChange:e=>handleRoleChange(usuario.id,e.target.value),disabled:loading,className:`border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${loading?'opacity-50 cursor-not-allowed':'hover:border-gray-400'} ${changedRoles[usuario.id]?'border-yellow-400 bg-yellow-50':''}`,children:rolesDisponibles.map(rol=>/*#__PURE__*/_jsx(\"option\",{value:rol,children:rol.charAt(0).toUpperCase()+rol.slice(1).replace('_',' ')},rol))}),changedRoles[usuario.id]&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateUserRole(usuario.id,changedRoles[usuario.id]),disabled:loading,className:\"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50\",title:\"Guardar este cambio\",children:/*#__PURE__*/_jsx(Check,{className:\"h-3 w-3\"})})]})})]},usuario.id);})})]}),usuarios.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Users,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No hay usuarios\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"No se encontraron usuarios en el sistema.\"})]})]})]}),activeTab==='permisos'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Configuraci\\xF3n de Permisos por Rol\"}),selectedRol&&/*#__PURE__*/_jsxs(\"button\",{onClick:updatePermisos,className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\",children:[/*#__PURE__*/_jsx(Save,{className:\"mr-2 h-4 w-4\"}),\"Guardar Cambios\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-900 mb-4\",children:\"Seleccionar Rol\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:roles.map(rol=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>selectRol(rol.RolID,rol.NombreRol),className:`w-full text-left px-4 py-3 rounded-md text-sm font-medium transition-colors ${selectedRol===rol.RolID?'bg-blue-100 text-blue-700 border border-blue-300 shadow-sm':'bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 hover:border-gray-300'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:rol.NombreRol}),selectedRol===rol.RolID&&/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4 text-blue-600\"})]}),rol.Descripcion&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:rol.Descripcion})]},rol.RolID))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2\",children:selectedRol?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-medium text-gray-900 mb-4\",children:[\"Permisos para: \",/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600\",children:selectedRolName})]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Cargando permisos...\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"M\\xF3dulo\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(EyeOff,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Visible\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Ver\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Crear\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(Edit,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Editar\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(Trash2,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Eliminar\"})]})})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:permisos.map(permiso=>/*#__PURE__*/_jsxs(\"tr\",{className:`hover:bg-gray-50 transition-colors ${!permiso.EstaVisible?'bg-gray-100 opacity-60':''}`,children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:`${!permiso.EstaVisible?'line-through text-gray-500':''}`,children:permiso.NombreModulo}),!permiso.EstaVisible&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs bg-red-100 text-red-600 px-2 py-1 rounded\",children:\"OCULTO\"})]}),/*#__PURE__*/_jsx(\"div\",{className:`text-sm ${!permiso.EstaVisible?'text-gray-400 line-through':'text-gray-500'}`,children:permiso.DescripcionModulo})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleVisibilidad(permiso.PermisoID),className:`p-2 rounded-full transition-colors ${permiso.EstaVisible?'text-green-600 bg-green-100 hover:bg-green-200':'text-red-600 bg-red-100 hover:bg-red-200'}`,title:permiso.EstaVisible?'MÃ³dulo visible - Click para ocultar':'MÃ³dulo oculto - Click para mostrar',children:permiso.EstaVisible?/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(EyeOff,{className:\"h-4 w-4\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePermiso(permiso.PermisoID,'PuedeVer'),disabled:!permiso.EstaVisible,className:`p-2 rounded-full transition-colors ${!permiso.EstaVisible?'text-gray-300 bg-gray-100 cursor-not-allowed':permiso.PuedeVer?'text-green-600 bg-green-100 hover:bg-green-200':'text-gray-400 bg-gray-100 hover:bg-gray-200'}`,title:!permiso.EstaVisible?'MÃ³dulo oculto':permiso.PuedeVer?'Permitido':'No permitido',children:permiso.PuedeVer?/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePermiso(permiso.PermisoID,'PuedeCrear'),disabled:!permiso.EstaVisible,className:`p-2 rounded-full transition-colors ${!permiso.EstaVisible?'text-gray-300 bg-gray-100 cursor-not-allowed':permiso.PuedeCrear?'text-green-600 bg-green-100 hover:bg-green-200':'text-gray-400 bg-gray-100 hover:bg-gray-200'}`,title:!permiso.EstaVisible?'MÃ³dulo oculto':permiso.PuedeCrear?'Permitido':'No permitido',children:permiso.PuedeCrear?/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePermiso(permiso.PermisoID,'PuedeEditar'),disabled:!permiso.EstaVisible,className:`p-2 rounded-full transition-colors ${!permiso.EstaVisible?'text-gray-300 bg-gray-100 cursor-not-allowed':permiso.PuedeEditar?'text-green-600 bg-green-100 hover:bg-green-200':'text-gray-400 bg-gray-100 hover:bg-gray-200'}`,title:!permiso.EstaVisible?'MÃ³dulo oculto':permiso.PuedeEditar?'Permitido':'No permitido',children:permiso.PuedeEditar?/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePermiso(permiso.PermisoID,'PuedeEliminar'),disabled:!permiso.EstaVisible,className:`p-2 rounded-full transition-colors ${!permiso.EstaVisible?'text-gray-300 bg-gray-100 cursor-not-allowed':permiso.PuedeEliminar?'text-green-600 bg-green-100 hover:bg-green-200':'text-gray-400 bg-gray-100 hover:bg-gray-200'}`,title:!permiso.EstaVisible?'MÃ³dulo oculto':permiso.PuedeEliminar?'Permitido':'No permitido',children:permiso.PuedeEliminar?/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})})]},permiso.PermisoID))})]}),permisos.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(Settings,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"Cargando m\\xF3dulos del sistema\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Preparando todos los m\\xF3dulos para este rol...\"})]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-16 text-gray-500\",children:[/*#__PURE__*/_jsx(Shield,{className:\"mx-auto h-16 w-16 text-gray-300 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Selecciona un rol\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Elige un rol de la lista para ver y editar sus permisos\"})]})})]})]}),activeTab==='info'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(Settings,{className:\"h-5 w-5 text-purple-600 mr-2\"}),/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:[\"M\\xF3dulos del Sistema (\",MODULOS_SISTEMA.length,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-5 w-5 text-blue-600 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-800 font-medium\",children:\"Informaci\\xF3n del Sistema\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-700 mt-2 text-sm\",children:\"Todos los roles tienen acceso a estos m\\xF3dulos por defecto. Como administrador, puedes controlar la visibilidad y permisos espec\\xEDficos de cada m\\xF3dulo para cada rol.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\",children:MODULOS_SISTEMA.map(modulo=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-50 to-purple-100 border border-purple-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-purple-800\",children:modulo.nombre}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-purple-600 bg-purple-200 px-2 py-1 rounded\",children:\"Sistema\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-700\",children:modulo.descripcion})]},modulo.id))})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(Shield,{className:\"h-5 w-5 text-blue-600 mr-2\"}),/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:[\"Roles del Sistema (\",roles.length,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\",children:roles.map(rol=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-green-50 to-green-100 border border-green-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-green-800\",children:rol.NombreRol}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-green-600 bg-green-200 px-2 py-1 rounded\",children:[\"ID: \",rol.RolID]})]}),rol.Descripcion&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-700\",children:rol.Descripcion})]},rol.RolID))})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(Eye,{className:\"h-5 w-5 text-indigo-600 mr-2\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Estad\\xEDsticas del Sistema\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-blue-600\",children:usuarios.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 mt-1\",children:\"Usuarios Totales\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-green-600\",children:roles.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 mt-1\",children:\"Roles Configurados\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-purple-600\",children:MODULOS_SISTEMA.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 mt-1\",children:\"M\\xF3dulos del Sistema\"})]})]})]})]})]})})]})});};export default AdminPermissions;","map":{"version":3,"names":["React","useEffect","useState","Users","Settings","Shield","Check","X","Save","AlertCircle","Eye","Plus","Edit","Trash2","EyeOff","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","AUTH_API_URL","ADMIN_API_URL","getToken","localStorage","getItem","MODULOS_SISTEMA","id","nombre","descripcion","descripciÃ³n","AdminPermissions","activeTab","setActiveTab","usuarios","setUsuarios","roles","setRoles","selectedRol","setSelectedRol","selectedRolName","setSelectedRolName","permisos","setPermisos","loading","setLoading","error","setError","message","setMessage","type","text","changedRoles","setChangedRoles","rolesDisponibles","handleApiError","response","console","status","debugToken","token","log","payload","JSON","parse","atob","split","e","initializePermisosForRole","map","modulo","index","PermisoID","ModuloID","NombreModulo","DescripcionModulo","EstaVisible","PuedeVer","PuedeCrear","PuedeEditar","PuedeEliminar","loadUsuarios","endpoints","res","usedEndpoint","endpoint","fetch","method","headers","ok","err","errorText","Error","statusText","data","json","usuariosData","length","users","Array","isArray","recordset","usuariosNormalizados","user","UsuarioID","username","Username","email","Email","rol","Rol","role","estado","Estado","empleadoId","EmpleadoID","usuariosConNombres","Promise","all","usuario","resEmpleado","empleadoData","empleado","nombreCompleto","NOMBRE","APELLIDO","trim","apellido","loadRoles","defaultRoles","RolID","NombreRol","Descripcion","replace","rolesData","loadPermisos","rolId","permisosExistentes","permisosCompletos","permisoExistente","find","p","handleRoleChange","userId","nuevoRol","prev","updateUserRole","u","body","stringify","newChanges","saveAllRoleChanges","changeCount","Object","keys","successCount","errorCount","entries","parseInt","cancelRoleChanges","getCurrentRole","updatePermisos","permisosData","moduloId","nombreModulo","descripcionModulo","estaVisible","puedeVer","puedeCrear","puedeEditar","puedeEliminar","togglePermiso","permisoId","campo","toggleVisibilidad","selectRol","rolName","timer","setTimeout","clearTimeout","className","children","onClick","disabled","_usuario$username","_usuario$username$cha","charAt","toUpperCase","value","onChange","target","slice","title","permiso"],"sources":["C:/Users/josemontedeoca/rrhh-system/frontend/src/components/Admin/AdminPermissions.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Users, Settings, Shield, Check, X, Save, AlertCircle, Eye, Plus, Edit, Trash2, EyeOff } from 'lucide-react';\r\n\r\n// ðŸ”‘ URLs de API\r\nconst API_BASE_URL = 'http://localhost:5000/api';\r\nconst AUTH_API_URL = `${API_BASE_URL}/auth`;\r\nconst ADMIN_API_URL = `${API_BASE_URL}/admin`;\r\n\r\n// âœ… FunciÃ³n para obtener el token\r\nconst getToken = () => {\r\n  return localStorage.getItem('token') || localStorage.getItem('rrhh_token');\r\n};\r\n\r\n// ðŸ“‹ MÃ³dulos predefinidos del sistema\r\nconst MODULOS_SISTEMA = [\r\n  { id: 1, nombre: 'empleados', descripcion: 'GestiÃ³n de empleados' },\r\n  { id: 2, nombre: 'vacantes', descripcion: 'GestiÃ³n de vacantes' },\r\n  { id: 3, nombre: 'postulaciones', descripcion: 'GestiÃ³n de postulaciones' },\r\n  { id: 4, nombre: 'nomina', descripcion: 'GestiÃ³n de nÃ³mina' },\r\n  { id: 5, nombre: 'vacaciones', descripcion: 'GestiÃ³n de vacaciones' },\r\n  { id: 6, nombre: 'capacitaciones', descripcion: 'GestiÃ³n de capacitaciones' },\r\n  { id: 7, nombre: 'asistencia', descripcion: 'Control de asistencias' },\r\n  { id: 8, nombre: 'departamentos', descripcion: 'GestiÃ³n de departamentos' },\r\n  { id: 9, nombre: 'puestos', descripciÃ³n: 'GestiÃ³n de puestos' },\r\n  { id: 10, nombre: 'reportes', descripcion: 'Reportes del sistema' },\r\n  { id: 11, nombre: 'admin', descripcion: 'AdministraciÃ³n de usuarios y permisos' }\r\n];\r\n\r\nconst AdminPermissions = () => {\r\n  const [activeTab, setActiveTab] = useState('usuarios');\r\n  const [usuarios, setUsuarios] = useState([]);\r\n  const [roles, setRoles] = useState([]);\r\n  const [selectedRol, setSelectedRol] = useState(null);\r\n  const [selectedRolName, setSelectedRolName] = useState('');\r\n  const [permisos, setPermisos] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n  const [changedRoles, setChangedRoles] = useState({});\r\n\r\n  // Lista de roles disponibles\r\n  const rolesDisponibles = [\r\n    'colaborador',\r\n    'gerente', \r\n    'director',\r\n    'rrhh',\r\n    'gerente_rrhh',\r\n    'director_rrhh',\r\n    'admin'\r\n  ];\r\n\r\n  // --- FunciÃ³n helper para manejar errores de API ---\r\n  const handleApiError = (error, response) => {\r\n    console.error('Error de API:', { error, status: response?.status });\r\n    \r\n    if (response?.status === 401) {\r\n      setError('SesiÃ³n expirada. Por favor, inicia sesiÃ³n nuevamente.');\r\n    } else if (response?.status === 403) {\r\n      setError('No tienes permisos para realizar esta acciÃ³n.');\r\n    } else if (response?.status === 404) {\r\n      setError('Endpoint no encontrado. Verifica la configuraciÃ³n del servidor.');\r\n    } else {\r\n      setError(error.message || 'Error interno del servidor');\r\n    }\r\n  };\r\n\r\n  // --- Debug de token ---\r\n  const debugToken = () => {\r\n    const token = getToken();\r\n    console.log('ðŸ” Token encontrado:', token ? 'SÃ' : 'NO');\r\n    if (token) {\r\n      try {\r\n        const payload = JSON.parse(atob(token.split('.')[1]));\r\n        console.log('ðŸ“‹ Payload del token:', payload);\r\n      } catch (e) {\r\n        console.error('âŒ Token malformado:', e);\r\n      }\r\n    }\r\n  };\r\n\r\n  // --- Inicializar permisos para un rol ---\r\n  const initializePermisosForRole = () => {\r\n    return MODULOS_SISTEMA.map((modulo, index) => ({\r\n      PermisoID: `temp_${index}`,\r\n      ModuloID: modulo.id,\r\n      NombreModulo: modulo.nombre,\r\n      DescripcionModulo: modulo.descripcion,\r\n      EstaVisible: true,\r\n      PuedeVer: false,\r\n      PuedeCrear: false,\r\n      PuedeEditar: false,\r\n      PuedeEliminar: false\r\n    }));\r\n  };\r\n\r\n  // --- Cargar usuarios (CORREGIDO) ---\r\n  const loadUsuarios = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    debugToken(); // Debug del token\r\n    \r\n    try {\r\n      // Intentar mÃºltiples endpoints hasta encontrar uno que funcione\r\n      const endpoints = [\r\n        `${AUTH_API_URL}/users`,\r\n        `${API_BASE_URL}/usuarios`, \r\n        `${ADMIN_API_URL}/users`,\r\n        `${API_BASE_URL}/admin/usuarios`\r\n      ];\r\n      \r\n      let res = null;\r\n      let usedEndpoint = null;\r\n      \r\n      for (const endpoint of endpoints) {\r\n        console.log('ðŸ“¡ Intentando endpoint:', endpoint);\r\n        try {\r\n          res = await fetch(endpoint, {\r\n            method: 'GET',\r\n            headers: {\r\n              'Authorization': `Bearer ${getToken()}`,\r\n              'Content-Type': 'application/json'\r\n            }\r\n          });\r\n          \r\n          if (res.ok) {\r\n            usedEndpoint = endpoint;\r\n            console.log('âœ… Endpoint funciona:', endpoint);\r\n            break;\r\n          } else {\r\n            console.log(`âŒ Endpoint ${endpoint} fallÃ³ con status:`, res.status);\r\n          }\r\n        } catch (err) {\r\n          console.log(`ðŸ’¥ Error en endpoint ${endpoint}:`, err.message);\r\n          continue;\r\n        }\r\n      }\r\n      \r\n      if (!res || !res.ok) {\r\n        const errorText = res ? await res.text() : 'NingÃºn endpoint funcionÃ³';\r\n        console.error('âŒ Todos los endpoints fallaron:', errorText);\r\n        handleApiError(new Error(`No se pudo conectar: ${errorText}`), res);\r\n        return;\r\n      }\r\n\r\n      console.log('ðŸ“Š Usando endpoint exitoso:', usedEndpoint);\r\n      console.log('ðŸ“Š Respuesta del servidor:', {\r\n        status: res.status,\r\n        statusText: res.statusText,\r\n        ok: res.ok\r\n      });\r\n\r\n      const data = await res.json();\r\n      console.log('ðŸ“‹ Datos recibidos:', data);\r\n\r\n      // Mapear la respuesta a la estructura esperada\r\n      let usuariosData = [];\r\n      \r\n      if (data.usuarios) {\r\n        // Si viene en formato { usuarios: [...] } - TU CASO\r\n        usuariosData = data.usuarios;\r\n        console.log('ðŸŽ¯ Usando data.usuarios:', usuariosData.length);\r\n      } else if (data.users) {\r\n        // Si viene en formato { users: [...] }\r\n        usuariosData = data.users;\r\n        console.log('ðŸŽ¯ Usando data.users:', usuariosData.length);\r\n      } else if (Array.isArray(data)) {\r\n        // Si viene directamente como array\r\n        usuariosData = data;\r\n        console.log('ðŸŽ¯ Usando data directamente:', usuariosData.length);\r\n      } else if (data.recordset) {\r\n        // Si viene en formato de recordset de SQL Server\r\n        usuariosData = data.recordset;\r\n        console.log('ðŸŽ¯ Usando data.recordset:', usuariosData.length);\r\n      }\r\n\r\n      console.log('ðŸ“Š usuariosData antes de normalizar:', usuariosData);\r\n\r\n      // Normalizar la estructura de datos\r\n      const usuariosNormalizados = usuariosData.map(user => ({\r\n        id: user.UsuarioID || user.id,\r\n        username: user.Username || user.username,\r\n        email: user.Email || user.email,\r\n        rol: user.Rol || user.role || user.rol,\r\n        estado: user.Estado || user.estado || 1,\r\n        empleadoId: user.EmpleadoID || user.empleadoId\r\n      }));\r\n\r\n      console.log('ðŸ‘¥ Usuarios normalizados:', usuariosNormalizados);\r\n     // Obtener nombres completos de empleados\r\n        const usuariosConNombres = await Promise.all(\r\n          usuariosNormalizados.map(async (usuario) => {\r\n            if (usuario.empleadoId) {\r\n              try {\r\n                const resEmpleado = await fetch(`${API_BASE_URL}/empleados/${usuario.empleadoId}`, {\r\n                  headers: { 'Authorization': `Bearer ${getToken()}` }\r\n                });\r\n                if (resEmpleado.ok) {\r\n                  const empleadoData = await resEmpleado.json();\r\n                  const empleado = empleadoData.empleado || empleadoData;\r\n                  return {\r\n                    ...usuario,\r\n                    nombreCompleto: `${empleado.NOMBRE} ${empleado.APELLIDO}`.trim(),\r\n                    nombre: empleado.NOMBRE,\r\n                    apellido: empleado.APELLIDO\r\n                  };\r\n                }\r\n              } catch (err) {\r\n                console.error(`Error obteniendo empleado ${usuario.empleadoId}:`, err);\r\n              }\r\n            }\r\n            return usuario;\r\n          })\r\n        );\r\n\r\n        setUsuarios(usuariosConNombres);\r\n\r\n    } catch (err) {\r\n      console.error('ðŸ’¥ Error cargando usuarios:', err);\r\n      handleApiError(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Cargar roles ---\r\n  const loadRoles = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      console.log('ðŸ“¡ Cargando roles desde:', `${ADMIN_API_URL}/roles`);\r\n      \r\n      const res = await fetch(`${ADMIN_API_URL}/roles`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      console.log('ðŸ“Š Respuesta roles:', { status: res.status, ok: res.ok });\r\n\r\n      // Si no existe el endpoint, usar roles por defecto\r\n      if (!res.ok && res.status === 404) {\r\n        console.log('âš ï¸ Endpoint de roles no encontrado, usando roles por defecto');\r\n        const defaultRoles = rolesDisponibles.map((rol, index) => ({\r\n          RolID: index + 1,\r\n          NombreRol: rol,\r\n          Descripcion: `Rol de ${rol.replace('_', ' ')}`\r\n        }));\r\n        setRoles(defaultRoles);\r\n        return;\r\n      }\r\n\r\n      if (!res.ok) {\r\n        handleApiError(new Error(`Error ${res.status}: ${res.statusText}`), res);\r\n        return;\r\n      }\r\n\r\n      const data = await res.json();\r\n      console.log('ðŸ“‹ Datos de roles:', data);\r\n      \r\n      let rolesData = data.roles || data.recordset || data;\r\n      setRoles(rolesData);\r\n      \r\n    } catch (err) {\r\n      console.error('ðŸ’¥ Error cargando roles:', err);\r\n      // Usar roles por defecto en caso de error\r\n      const defaultRoles = rolesDisponibles.map((rol, index) => ({\r\n        RolID: index + 1,\r\n        NombreRol: rol,\r\n        Descripcion: `Rol de ${rol.replace('_', ' ')}`\r\n      }));\r\n      setRoles(defaultRoles);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Cargar permisos de un rol especÃ­fico ---\r\n  const loadPermisos = async (rolId) => {\r\n    if (!rolId) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      console.log('ðŸ“¡ Cargando permisos para rol:', rolId);\r\n      \r\n      const res = await fetch(`${ADMIN_API_URL}/permisos/${rolId}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n      \r\n      console.log('ðŸ“Š Respuesta permisos:', { status: res.status, ok: res.ok });\r\n      \r\n      if (!res.ok && res.status !== 404) {\r\n        handleApiError(new Error(`Error ${res.status}: ${res.statusText}`), res);\r\n        return;\r\n      }\r\n\r\n      let data = { permisos: [] };\r\n      if (res.ok) {\r\n        data = await res.json();\r\n        console.log('ðŸ“‹ Permisos recibidos:', data);\r\n      }\r\n      \r\n      // Si no hay permisos existentes, inicializar con todos los mÃ³dulos\r\n      if (!data.permisos || data.permisos.length === 0) {\r\n        console.log('âš ï¸ No hay permisos, inicializando por defecto');\r\n        setPermisos(initializePermisosForRole());\r\n      } else {\r\n        // Combinar permisos existentes con mÃ³dulos del sistema\r\n        const permisosExistentes = data.permisos;\r\n        const permisosCompletos = MODULOS_SISTEMA.map((modulo, index) => {\r\n          const permisoExistente = permisosExistentes.find(p => \r\n            p.ModuloID === modulo.id || p.NombreModulo === modulo.nombre\r\n          );\r\n          \r\n          return {\r\n            PermisoID: permisoExistente?.PermisoID || `temp_${index}`,\r\n            ModuloID: modulo.id,\r\n            NombreModulo: modulo.nombre,\r\n            DescripcionModulo: modulo.descripcion,\r\n            EstaVisible: permisoExistente?.EstaVisible !== false,\r\n            PuedeVer: permisoExistente?.PuedeVer || false,\r\n            PuedeCrear: permisoExistente?.PuedeCrear || false,\r\n            PuedeEditar: permisoExistente?.PuedeEditar || false,\r\n            PuedeEliminar: permisoExistente?.PuedeEliminar || false\r\n          };\r\n        });\r\n        \r\n        setPermisos(permisosCompletos);\r\n      }\r\n    } catch (err) {\r\n      console.error('ðŸ’¥ Error cargando permisos:', err);\r\n      setPermisos(initializePermisosForRole());\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Manejar cambio temporal de rol ---\r\n  const handleRoleChange = (userId, nuevoRol) => {\r\n    setChangedRoles(prev => ({\r\n      ...prev,\r\n      [userId]: nuevoRol\r\n    }));\r\n  };\r\n\r\n  // --- Actualizar rol de usuario ---\r\n  const updateUserRole = async (userId, nuevoRol) => {\r\n    console.log('ðŸ”„ Actualizando rol:', { userId, nuevoRol });\r\n    try {\r\n      const usuario = usuarios.find(u => u.id === userId);\r\n      if (!usuario) {\r\n        throw new Error('Usuario no encontrado');\r\n      }\r\n\r\n      const res = await fetch(`${AUTH_API_URL}/users/${userId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ \r\n          username: usuario.username,\r\n          email: usuario.email,\r\n          role: nuevoRol,\r\n          estado: usuario.estado\r\n        })\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const errorText = await res.text();\r\n        throw new Error(`Error ${res.status}: ${errorText}`);\r\n      }\r\n      \r\n      setMessage({ type: 'success', text: 'Rol actualizado correctamente' });\r\n      \r\n      // Limpiar cambios pendientes para este usuario\r\n      setChangedRoles(prev => {\r\n        const newChanges = { ...prev };\r\n        delete newChanges[userId];\r\n        return newChanges;\r\n      });\r\n      \r\n      // Recargar usuarios\r\n      await loadUsuarios();\r\n    } catch (err) {\r\n      console.error('ðŸ’¥ Error actualizando rol:', err);\r\n      setMessage({ type: 'error', text: err.message });\r\n    }\r\n  };\r\n\r\n  // --- Guardar todos los cambios de roles ---\r\n  const saveAllRoleChanges = async () => {\r\n    const changeCount = Object.keys(changedRoles).length;\r\n    if (changeCount === 0) {\r\n      setMessage({ type: 'error', text: 'No hay cambios pendientes para guardar' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    let successCount = 0;\r\n    let errorCount = 0;\r\n\r\n    try {\r\n      for (const [userId, nuevoRol] of Object.entries(changedRoles)) {\r\n        try {\r\n          await updateUserRole(parseInt(userId), nuevoRol);\r\n          successCount++;\r\n        } catch (error) {\r\n          errorCount++;\r\n          console.error(`Error actualizando usuario ${userId}:`, error);\r\n        }\r\n      }\r\n\r\n      if (errorCount === 0) {\r\n        setMessage({ type: 'success', text: `Se actualizaron ${successCount} roles correctamente` });\r\n        setChangedRoles({});\r\n      } else {\r\n        setMessage({ type: 'error', text: `${successCount} exitosos, ${errorCount} fallaron` });\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Cancelar cambios ---\r\n  const cancelRoleChanges = () => {\r\n    setChangedRoles({});\r\n    setMessage({ type: 'success', text: 'Cambios cancelados' });\r\n  };\r\n\r\n  // --- Obtener el rol actual (con cambios pendientes) ---\r\n  const getCurrentRole = (usuario) => {\r\n    return changedRoles[usuario.id] || usuario.rol;\r\n  };\r\n\r\n  // --- Actualizar permisos ---\r\n  const updatePermisos = async () => {\r\n    if (!selectedRol) return;\r\n\r\n    try {\r\n      const permisosData = permisos.map(p => ({\r\n        moduloId: p.ModuloID,\r\n        nombreModulo: p.NombreModulo,\r\n        descripcionModulo: p.DescripcionModulo,\r\n        estaVisible: p.EstaVisible,\r\n        puedeVer: p.PuedeVer,\r\n        puedeCrear: p.PuedeCrear,\r\n        puedeEditar: p.PuedeEditar,\r\n        puedeEliminar: p.PuedeEliminar\r\n      }));\r\n\r\n      const res = await fetch(`${ADMIN_API_URL}/permisos/${selectedRol}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ permisos: permisosData })\r\n      });\r\n      \r\n      if (!res.ok) {\r\n        const errorText = await res.text();\r\n        throw new Error(`Error ${res.status}: ${errorText}`);\r\n      }\r\n      \r\n      setMessage({ type: 'success', text: 'Permisos actualizados correctamente' });\r\n    } catch (err) {\r\n      console.error('ðŸ’¥ Error actualizando permisos:', err);\r\n      setMessage({ type: 'error', text: err.message });\r\n    }\r\n  };\r\n\r\n  // --- Cambiar permiso especÃ­fico ---\r\n  const togglePermiso = (permisoId, campo) => {\r\n    setPermisos(prev => \r\n      prev.map(p => \r\n        p.PermisoID === permisoId \r\n          ? { ...p, [campo]: !p[campo] }\r\n          : p\r\n      )\r\n    );\r\n  };\r\n\r\n  // --- Toggle visibilidad del mÃ³dulo ---\r\n  const toggleVisibilidad = (permisoId) => {\r\n    setPermisos(prev => \r\n      prev.map(p => \r\n        p.PermisoID === permisoId \r\n          ? { \r\n              ...p, \r\n              EstaVisible: !p.EstaVisible,\r\n              PuedeVer: !p.EstaVisible ? p.PuedeVer : false,\r\n              PuedeCrear: !p.EstaVisible ? p.PuedeCrear : false,\r\n              PuedeEditar: !p.EstaVisible ? p.PuedeEditar : false,\r\n              PuedeEliminar: !p.EstaVisible ? p.PuedeEliminar : false\r\n            }\r\n          : p\r\n      )\r\n    );\r\n  };\r\n\r\n  // --- Seleccionar rol para editar permisos ---\r\n  const selectRol = (rolId, rolName) => {\r\n    setSelectedRol(rolId);\r\n    setSelectedRolName(rolName);\r\n    loadPermisos(rolId);\r\n  };\r\n\r\n  // --- Cargar datos al inicio ---\r\n  useEffect(() => {\r\n    console.log('ðŸš€ Componente montado, tab activo:', activeTab);\r\n    \r\n    if (activeTab === 'usuarios') {\r\n      loadUsuarios();\r\n    } else if (activeTab === 'permisos') {\r\n      loadRoles();\r\n    }\r\n  }, [activeTab]);\r\n\r\n  // Limpiar mensajes despuÃ©s de 5 segundos\r\n  useEffect(() => {\r\n    if (message.text) {\r\n      const timer = setTimeout(() => {\r\n        setMessage({ type: '', text: '' });\r\n      }, 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [message]);\r\n\r\n  if (loading && usuarios.length === 0 && roles.length === 0) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Cargando...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 p-4 sm:p-6\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"bg-white rounded-lg shadow-sm mb-6\">\r\n          <div className=\"border-b border-gray-200 px-6 py-4\">\r\n            <h1 className=\"text-2xl font-bold text-gray-900 flex items-center\">\r\n              <Shield className=\"mr-3 h-7 w-7 text-blue-600\" />\r\n              GestiÃ³n de Roles y Permisos\r\n            </h1>\r\n            <p className=\"text-gray-600 mt-1\">Administra usuarios, roles y permisos del sistema</p>\r\n          </div>\r\n\r\n          {/* Debug Info */}\r\n          \r\n\r\n          {/* Mensaje de estado */}\r\n          {message.text && (\r\n            <div className={`mx-6 mt-4 p-4 rounded-md flex items-center ${\r\n              message.type === 'success' \r\n                ? 'bg-green-50 border border-green-200 text-green-800' \r\n                : 'bg-red-50 border border-red-200 text-red-800'\r\n            }`}>\r\n              <AlertCircle className=\"mr-2 h-5 w-5\" />\r\n              {message.text}\r\n            </div>\r\n          )}\r\n\r\n          {/* Error global */}\r\n          {error && (\r\n            <div className=\"mx-6 mt-4 p-4 rounded-md bg-red-50 border border-red-200 text-red-800 flex items-center\">\r\n              <AlertCircle className=\"mr-2 h-5 w-5\" />\r\n              Error: {error}\r\n            </div>\r\n          )}\r\n\r\n          {/* Tabs */}\r\n          <div className=\"border-b border-gray-200\">\r\n            <nav className=\"flex px-6\">\r\n              <button\r\n                onClick={() => setActiveTab('usuarios')}\r\n                className={`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${\r\n                  activeTab === 'usuarios'\r\n                    ? 'border-blue-500 text-blue-600'\r\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                }`}\r\n              >\r\n                <Users className=\"inline-block mr-2 h-4 w-4\" />\r\n                GestiÃ³n de Usuarios\r\n              </button>\r\n              <button\r\n                onClick={() => setActiveTab('permisos')}\r\n                className={`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${\r\n                  activeTab === 'permisos'\r\n                    ? 'border-blue-500 text-blue-600'\r\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                }`}\r\n              >\r\n                <Settings className=\"inline-block mr-2 h-4 w-4\" />\r\n                ConfiguraciÃ³n de Permisos\r\n              </button>\r\n              <button\r\n                onClick={() => setActiveTab('info')}\r\n                className={`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${\r\n                  activeTab === 'info'\r\n                    ? 'border-blue-500 text-blue-600'\r\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                }`}\r\n              >\r\n                <Eye className=\"inline-block mr-2 h-4 w-4\" />\r\n                InformaciÃ³n del Sistema\r\n              </button>\r\n            </nav>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Contenido principal */}\r\n        <div className=\"bg-white rounded-lg shadow-sm\">\r\n          <div className=\"p-6\">\r\n            {/* Tab Usuarios */}\r\n            {activeTab === 'usuarios' && (\r\n              <div>\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                  <h2 className=\"text-xl font-semibold text-gray-900\">\r\n                    Usuarios del Sistema\r\n                  </h2>\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <span className=\"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium\">\r\n                      {usuarios.length} usuarios\r\n                    </span>\r\n                    \r\n                    {/* Botones para cambios pendientes */}\r\n                    {Object.keys(changedRoles).length > 0 && (\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium\">\r\n                          {Object.keys(changedRoles).length} cambios pendientes\r\n                        </span>\r\n                        <button\r\n                          onClick={saveAllRoleChanges}\r\n                          disabled={loading}\r\n                          className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50\"\r\n                        >\r\n                          <Save className=\"mr-1.5 h-4 w-4\" />\r\n                          Guardar Todo\r\n                        </button>\r\n                        <button\r\n                          onClick={cancelRoleChanges}\r\n                          disabled={loading}\r\n                          className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\"\r\n                        >\r\n                          <X className=\"mr-1.5 h-4 w-4\" />\r\n                          Cancelar\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"min-w-full divide-y divide-gray-200\">\r\n                    <thead className=\"bg-gray-50\">\r\n                      <tr>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Usuario\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Email\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Rol Actual\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Estado\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Acciones\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                      {usuarios.map((usuario) => (\r\n                        <tr key={usuario.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"flex items-center\">\r\n                              <div className=\"flex-shrink-0 h-10 w-10\">\r\n                                <div className=\"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium text-sm\">\r\n                                  {usuario.username?.charAt(0)?.toUpperCase() || 'U'}\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"ml-4\">\r\n                                <div className=\"text-sm font-medium text-gray-900\">\r\n                                 {usuario.email ? usuario.email.split('@')[0] : usuario.username}\r\n                                </div>\r\n                                <div className=\"text-sm text-gray-500\">\r\n                                  ID: {usuario.id}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            {usuario.email || 'Sin email'}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"flex items-center\">\r\n                              <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n                                changedRoles[usuario.id] \r\n                                  ? 'bg-yellow-100 text-yellow-800 border border-yellow-300' \r\n                                  : 'bg-blue-100 text-blue-800'\r\n                              }`}>\r\n                                {getCurrentRole(usuario)}\r\n                              </span>\r\n                              {changedRoles[usuario.id] && (\r\n                                <span className=\"ml-2 text-xs text-yellow-600 font-medium\">\r\n                                  (Pendiente)\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n                             usuario.estado === 'activo' || usuario.estado === 1 || usuario.estado === true\r\n                              ? 'bg-green-100 text-green-800' \r\n                              : 'bg-red-100 text-red-800'\r\n                          }`}>\r\n                            {usuario.estado === 'activo' || usuario.estado === 1 || usuario.estado === true ? 'Activo' : 'Inactivo'}\r\n                          </span>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <select\r\n                                value={getCurrentRole(usuario)}\r\n                                onChange={(e) => handleRoleChange(usuario.id, e.target.value)}\r\n                                disabled={loading}\r\n                                className={`border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                                  loading ? 'opacity-50 cursor-not-allowed' : 'hover:border-gray-400'\r\n                                } ${\r\n                                  changedRoles[usuario.id] ? 'border-yellow-400 bg-yellow-50' : ''\r\n                                }`}\r\n                              >\r\n                                {rolesDisponibles.map(rol => (\r\n                                  <option key={rol} value={rol}>\r\n                                    {rol.charAt(0).toUpperCase() + rol.slice(1).replace('_', ' ')}\r\n                                  </option>\r\n                                ))}\r\n                              </select>\r\n                              \r\n                              {changedRoles[usuario.id] && (\r\n                                <button\r\n                                  onClick={() => updateUserRole(usuario.id, changedRoles[usuario.id])}\r\n                                  disabled={loading}\r\n                                  className=\"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50\"\r\n                                  title=\"Guardar este cambio\"\r\n                                >\r\n                                  <Check className=\"h-3 w-3\" />\r\n                                </button>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n\r\n                  {usuarios.length === 0 && (\r\n                    <div className=\"text-center py-12\">\r\n                      <Users className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n                      <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No hay usuarios</h3>\r\n                      <p className=\"mt-1 text-sm text-gray-500\">No se encontraron usuarios en el sistema.</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Tab Permisos */}\r\n            {activeTab === 'permisos' && (\r\n              <div>\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                  <h2 className=\"text-xl font-semibold text-gray-900\">\r\n                    ConfiguraciÃ³n de Permisos por Rol\r\n                  </h2>\r\n                  {selectedRol && (\r\n                    <button\r\n                      onClick={updatePermisos}\r\n                      className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\"\r\n                    >\r\n                      <Save className=\"mr-2 h-4 w-4\" />\r\n                      Guardar Cambios\r\n                    </button>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                  {/* Lista de Roles */}\r\n                  <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                    <h3 className=\"text-sm font-medium text-gray-900 mb-4\">\r\n                      Seleccionar Rol\r\n                    </h3>\r\n                    <div className=\"space-y-2\">\r\n                      {roles.map((rol) => (\r\n                        <button\r\n                          key={rol.RolID}\r\n                          onClick={() => selectRol(rol.RolID, rol.NombreRol)}\r\n                          className={`w-full text-left px-4 py-3 rounded-md text-sm font-medium transition-colors ${\r\n                            selectedRol === rol.RolID\r\n                              ? 'bg-blue-100 text-blue-700 border border-blue-300 shadow-sm'\r\n                              : 'bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 hover:border-gray-300'\r\n                          }`}\r\n                        >\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <span>{rol.NombreRol}</span>\r\n                            {selectedRol === rol.RolID && (\r\n                              <Check className=\"h-4 w-4 text-blue-600\" />\r\n                            )}\r\n                          </div>\r\n                          {rol.Descripcion && (\r\n                            <p className=\"text-xs text-gray-500 mt-1\">{rol.Descripcion}</p>\r\n                          )}\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Tabla de Permisos */}\r\n                  <div className=\"lg:col-span-2\">\r\n                    {selectedRol ? (\r\n                      <div>\r\n                        <h3 className=\"text-sm font-medium text-gray-900 mb-4\">\r\n                          Permisos para: <span className=\"text-blue-600\">{selectedRolName}</span>\r\n                        </h3>\r\n                        {loading ? (\r\n                          <div className=\"text-center py-8\">\r\n                            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2\"></div>\r\n                            <p className=\"text-gray-600\">Cargando permisos...</p>\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"overflow-x-auto\">\r\n                            <table className=\"min-w-full divide-y divide-gray-200\">\r\n                              <thead className=\"bg-gray-50\">\r\n                                <tr>\r\n                                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    MÃ³dulo\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <EyeOff className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Visible</span>\r\n                                    </div>\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <Eye className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Ver</span>\r\n                                    </div>\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <Plus className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Crear</span>\r\n                                    </div>\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <Edit className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Editar</span>\r\n                                    </div>\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <Trash2 className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Eliminar</span>\r\n                                    </div>\r\n                                  </th>\r\n                                </tr>\r\n                              </thead>\r\n                              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                                {permisos.map((permiso) => (\r\n                                  <tr key={permiso.PermisoID} className={`hover:bg-gray-50 transition-colors ${\r\n                                    !permiso.EstaVisible ? 'bg-gray-100 opacity-60' : ''\r\n                                  }`}>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap\">\r\n                                      <div className=\"text-sm font-medium text-gray-900 flex items-center\">\r\n                                        <span className={`${!permiso.EstaVisible ? 'line-through text-gray-500' : ''}`}>\r\n                                          {permiso.NombreModulo}\r\n                                        </span>\r\n                                        {!permiso.EstaVisible && (\r\n                                          <span className=\"ml-2 text-xs bg-red-100 text-red-600 px-2 py-1 rounded\">\r\n                                            OCULTO\r\n                                          </span>\r\n                                        )}\r\n                                      </div>\r\n                                      <div className={`text-sm ${!permiso.EstaVisible ? 'text-gray-400 line-through' : 'text-gray-500'}`}>\r\n                                        {permiso.DescripcionModulo}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => toggleVisibilidad(permiso.PermisoID)}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          permiso.EstaVisible \r\n                                            ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                            : 'text-red-600 bg-red-100 hover:bg-red-200'\r\n                                        }`}\r\n                                        title={permiso.EstaVisible ? 'MÃ³dulo visible - Click para ocultar' : 'MÃ³dulo oculto - Click para mostrar'}\r\n                                      >\r\n                                        {permiso.EstaVisible ? <Eye className=\"h-4 w-4\" /> : <EyeOff className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => togglePermiso(permiso.PermisoID, 'PuedeVer')}\r\n                                        disabled={!permiso.EstaVisible}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          !permiso.EstaVisible \r\n                                            ? 'text-gray-300 bg-gray-100 cursor-not-allowed'\r\n                                            : permiso.PuedeVer \r\n                                              ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                              : 'text-gray-400 bg-gray-100 hover:bg-gray-200'\r\n                                        }`}\r\n                                        title={!permiso.EstaVisible ? 'MÃ³dulo oculto' : permiso.PuedeVer ? 'Permitido' : 'No permitido'}\r\n                                      >\r\n                                        {permiso.PuedeVer ? <Check className=\"h-4 w-4\" /> : <X className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => togglePermiso(permiso.PermisoID, 'PuedeCrear')}\r\n                                        disabled={!permiso.EstaVisible}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          !permiso.EstaVisible \r\n                                            ? 'text-gray-300 bg-gray-100 cursor-not-allowed'\r\n                                            : permiso.PuedeCrear \r\n                                              ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                              : 'text-gray-400 bg-gray-100 hover:bg-gray-200'\r\n                                        }`}\r\n                                        title={!permiso.EstaVisible ? 'MÃ³dulo oculto' : permiso.PuedeCrear ? 'Permitido' : 'No permitido'}\r\n                                      >\r\n                                        {permiso.PuedeCrear ? <Check className=\"h-4 w-4\" /> : <X className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => togglePermiso(permiso.PermisoID, 'PuedeEditar')}\r\n                                        disabled={!permiso.EstaVisible}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          !permiso.EstaVisible \r\n                                            ? 'text-gray-300 bg-gray-100 cursor-not-allowed'\r\n                                            : permiso.PuedeEditar \r\n                                              ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                              : 'text-gray-400 bg-gray-100 hover:bg-gray-200'\r\n                                        }`}\r\n                                        title={!permiso.EstaVisible ? 'MÃ³dulo oculto' : permiso.PuedeEditar ? 'Permitido' : 'No permitido'}\r\n                                      >\r\n                                        {permiso.PuedeEditar ? <Check className=\"h-4 w-4\" /> : <X className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => togglePermiso(permiso.PermisoID, 'PuedeEliminar')}\r\n                                        disabled={!permiso.EstaVisible}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          !permiso.EstaVisible \r\n                                            ? 'text-gray-300 bg-gray-100 cursor-not-allowed'\r\n                                            : permiso.PuedeEliminar \r\n                                              ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                              : 'text-gray-400 bg-gray-100 hover:bg-gray-200'\r\n                                        }`}\r\n                                        title={!permiso.EstaVisible ? 'MÃ³dulo oculto' : permiso.PuedeEliminar ? 'Permitido' : 'No permitido'}\r\n                                      >\r\n                                        {permiso.PuedeEliminar ? <Check className=\"h-4 w-4\" /> : <X className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                  </tr>\r\n                                ))}\r\n                              </tbody>\r\n                            </table>\r\n\r\n                            {permisos.length === 0 && (\r\n                              <div className=\"text-center py-8\">\r\n                                <Settings className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n                                <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Cargando mÃ³dulos del sistema</h3>\r\n                                <p className=\"mt-1 text-sm text-gray-500\">Preparando todos los mÃ³dulos para este rol...</p>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"text-center py-16 text-gray-500\">\r\n                        <Shield className=\"mx-auto h-16 w-16 text-gray-300 mb-4\" />\r\n                        <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Selecciona un rol</h3>\r\n                        <p className=\"text-sm\">Elige un rol de la lista para ver y editar sus permisos</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Tab InformaciÃ³n */}\r\n            {activeTab === 'info' && (\r\n              <div className=\"space-y-8\">\r\n                {/* MÃ³dulos del Sistema */}\r\n                <section>\r\n                  <div className=\"flex items-center mb-4\">\r\n                    <Settings className=\"h-5 w-5 text-purple-600 mr-2\" />\r\n                    <h2 className=\"text-lg font-semibold text-gray-900\">\r\n                      MÃ³dulos del Sistema ({MODULOS_SISTEMA.length})\r\n                    </h2>\r\n                  </div>\r\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\r\n                    <div className=\"flex items-center\">\r\n                      <AlertCircle className=\"h-5 w-5 text-blue-600 mr-2\" />\r\n                      <span className=\"text-blue-800 font-medium\">InformaciÃ³n del Sistema</span>\r\n                    </div>\r\n                    <p className=\"text-blue-700 mt-2 text-sm\">\r\n                      Todos los roles tienen acceso a estos mÃ³dulos por defecto. Como administrador, puedes controlar la visibilidad y permisos especÃ­ficos de cada mÃ³dulo para cada rol.\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {MODULOS_SISTEMA.map((modulo) => (\r\n                      <div key={modulo.id} className=\"bg-gradient-to-r from-purple-50 to-purple-100 border border-purple-200 rounded-lg p-4\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <span className=\"font-semibold text-purple-800\">\r\n                            {modulo.nombre}\r\n                          </span>\r\n                          <span className=\"text-xs text-purple-600 bg-purple-200 px-2 py-1 rounded\">\r\n                            Sistema\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-sm text-purple-700\">{modulo.descripcion}</p>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </section>\r\n\r\n                {/* Roles */}\r\n                <section>\r\n                  <div className=\"flex items-center mb-4\">\r\n                    <Shield className=\"h-5 w-5 text-blue-600 mr-2\" />\r\n                    <h2 className=\"text-lg font-semibold text-gray-900\">\r\n                      Roles del Sistema ({roles.length})\r\n                    </h2>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {roles.map((rol) => (\r\n                      <div key={rol.RolID} className=\"bg-gradient-to-r from-green-50 to-green-100 border border-green-200 rounded-lg p-4\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <span className=\"font-semibold text-green-800\">\r\n                            {rol.NombreRol}\r\n                          </span>\r\n                          <span className=\"text-xs text-green-600 bg-green-200 px-2 py-1 rounded\">\r\n                            ID: {rol.RolID}\r\n                          </span>\r\n                        </div>\r\n                        {rol.Descripcion && (\r\n                          <p className=\"text-sm text-green-700\">{rol.Descripcion}</p>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </section>\r\n\r\n                {/* EstadÃ­sticas del Sistema */}\r\n                <section>\r\n                  <div className=\"flex items-center mb-4\">\r\n                    <Eye className=\"h-5 w-5 text-indigo-600 mr-2\" />\r\n                    <h2 className=\"text-lg font-semibold text-gray-900\">\r\n                      EstadÃ­sticas del Sistema\r\n                    </h2>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-6\">\r\n                    <div className=\"bg-white border border-gray-200 rounded-lg p-6 text-center\">\r\n                      <div className=\"text-3xl font-bold text-blue-600\">{usuarios.length}</div>\r\n                      <div className=\"text-sm text-gray-500 mt-1\">Usuarios Totales</div>\r\n                    </div>\r\n                    <div className=\"bg-white border border-gray-200 rounded-lg p-6 text-center\">\r\n                      <div className=\"text-3xl font-bold text-green-600\">{roles.length}</div>\r\n                      <div className=\"text-sm text-gray-500 mt-1\">Roles Configurados</div>\r\n                    </div>\r\n                    <div className=\"bg-white border border-gray-200 rounded-lg p-6 text-center\">\r\n                      <div className=\"text-3xl font-bold text-purple-600\">{MODULOS_SISTEMA.length}</div>\r\n                      <div className=\"text-sm text-gray-500 mt-1\">MÃ³dulos del Sistema</div>\r\n                    </div>\r\n                  </div>\r\n                </section>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPermissions;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Users,Settings,Shield,Check,X,Save,AlertCircle,Eye,Plus,Edit,Trash2,EyeOff}from'lucide-react';// üîë URLs de API actualizadas\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_URL||'http://192.168.0.239:5000/api';const AUTH_API_URL=`${API_BASE_URL}/auth`;const ADMIN_API_URL=`${API_BASE_URL}/admin`;// ‚úÖ Funci√≥n para obtener el token\nconst getToken=()=>{return localStorage.getItem('token')||localStorage.getItem('rrhh_token');};// üìã M√≥dulos predefinidos del sistema\nconst MODULOS_SISTEMA=[{id:1,nombre:'empleados',descripcion:'Gesti√≥n de empleados'},{id:2,nombre:'vacantes',descripcion:'Gesti√≥n de vacantes'},{id:3,nombre:'postulaciones',descripcion:'Gesti√≥n de postulaciones'},{id:4,nombre:'nomina',descripcion:'Gesti√≥n de n√≥mina'},{id:5,nombre:'vacaciones',descripcion:'Gesti√≥n de vacaciones'},{id:6,nombre:'capacitaciones',descripcion:'Gesti√≥n de capacitaciones'},{id:7,nombre:'asistencia',descripcion:'Control de asistencias'},{id:8,nombre:'departamentos',descripcion:'Gesti√≥n de departamentos'},{id:9,nombre:'puestos',descripci√≥n:'Gesti√≥n de puestos'},{id:10,nombre:'reportes',descripcion:'Reportes del sistema'},{id:11,nombre:'admin',descripcion:'Administraci√≥n de usuarios y permisos'},{id:12,nombre:'acciones_personal',descripcion:'Acciones de personal y documentos'}];const AdminPermissions=()=>{const[activeTab,setActiveTab]=useState('usuarios');const[usuarios,setUsuarios]=useState([]);const[roles,setRoles]=useState([]);const[selectedRol,setSelectedRol]=useState(null);const[selectedRolName,setSelectedRolName]=useState('');const[permisos,setPermisos]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[message,setMessage]=useState({type:'',text:''});const[changedRoles,setChangedRoles]=useState({});// ‚¨áÔ∏è omponente AdminPermissions nuevo user ‚¨áÔ∏è\nconst[showCreateUserModal,setShowCreateUserModal]=useState(false);const[showCreateEmpleadoModal,setShowCreateEmpleadoModal]=useState(false);const[empleadosDisponibles,setEmpleadosDisponibles]=useState([]);const[nuevoUsuario,setNuevoUsuario]=useState({empleadoId:'',username:'',email:'',password:'',confirmPassword:'',rol:'colaborador'});const[nuevoEmpleado,setNuevoEmpleado]=useState({nombre:'',apellido:'',cedula:'',email:'',telefono:'',direccion:'',ciudad:'',provincia:'',fechaNacimiento:'',genero:'',estadoCivil:'',departamentoId:'',puestoId:'',fechaIngreso:new Date().toISOString().split('T')[0],salario:'',tipoContrato:'Indefinido',username:'',password:'',confirmPassword:'',rol:'colaborador'});// Lista de roles disponibles\nconst rolesDisponibles=['colaborador','gerente','director','rrhh','gerente_rrhh','director_rrhh','admin'];// --- Funci√≥n helper para manejar errores de API ---\nconst handleApiError=(error,response)=>{console.error('Error de API:',{error,status:response===null||response===void 0?void 0:response.status});if((response===null||response===void 0?void 0:response.status)===401){setError('Sesi√≥n expirada. Por favor, inicia sesi√≥n nuevamente.');}else if((response===null||response===void 0?void 0:response.status)===403){setError('No tienes permisos para realizar esta acci√≥n.');}else if((response===null||response===void 0?void 0:response.status)===404){setError('Endpoint no encontrado. Verifica la configuraci√≥n del servidor.');}else{setError(error.message||'Error interno del servidor');}};// Nueva funci√≥n para cargar empleados sin usuario\nconst loadEmpleadosSinUsuario=async()=>{try{const res=await fetch(`${API_BASE_URL}/empleados`,{headers:{'Authorization':`Bearer ${getToken()}`}});if(res.ok){const data=await res.json();const empleados=data.empleados||data;const empleadosConUsuario=usuarios.map(u=>u.empleadoId);const sinUsuario=empleados.filter(emp=>!empleadosConUsuario.includes(emp.EMPLEADO_ID));setEmpleadosDisponibles(sinUsuario);}}catch(err){console.error('Error cargando empleados:',err);}};// Funci√≥n para crear usuario para empleado existente\nconst crearUsuarioParaEmpleado=async e=>{e.preventDefault();if(!nuevoUsuario.empleadoId){setMessage({type:'error',text:'Debe seleccionar un empleado'});return;}if(!nuevoUsuario.username||!nuevoUsuario.email||!nuevoUsuario.password){setMessage({type:'error',text:'Complete todos los campos requeridos'});return;}if(nuevoUsuario.password!==nuevoUsuario.confirmPassword){setMessage({type:'error',text:'Las contrase√±as no coinciden'});return;}if(nuevoUsuario.password.length<6){setMessage({type:'error',text:'La contrase√±a debe tener al menos 6 caracteres'});return;}setLoading(true);try{const res=await fetch(`${AUTH_API_URL}/register`,{method:'POST',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'},body:JSON.stringify({username:nuevoUsuario.username,email:nuevoUsuario.email,password:nuevoUsuario.password,role:nuevoUsuario.rol,empleadoId:parseInt(nuevoUsuario.empleadoId)})});if(!res.ok){const errorData=await res.json();throw new Error(errorData.error||'Error al crear usuario');}setMessage({type:'success',text:'Usuario creado exitosamente'});setShowCreateUserModal(false);setNuevoUsuario({empleadoId:'',username:'',email:'',password:'',confirmPassword:'',rol:'colaborador'});await loadUsuarios();}catch(err){setMessage({type:'error',text:err.message});}finally{setLoading(false);}};// Funci√≥n para crear empleado completo con usuario\nconst crearEmpleadoConUsuario=async e=>{e.preventDefault();if(!nuevoEmpleado.nombre||!nuevoEmpleado.apellido||!nuevoEmpleado.cedula){setMessage({type:'error',text:'Complete todos los campos requeridos del empleado'});return;}if(!nuevoEmpleado.username||!nuevoEmpleado.password){setMessage({type:'error',text:'Complete los datos del usuario'});return;}if(nuevoEmpleado.password!==nuevoEmpleado.confirmPassword){setMessage({type:'error',text:'Las contrase√±as no coinciden'});return;}if(nuevoEmpleado.password.length<6){setMessage({type:'error',text:'La contrase√±a debe tener al menos 6 caracteres'});return;}setLoading(true);try{// 1. Crear el empleado\nconst resEmpleado=await fetch(`${API_BASE_URL}/empleados`,{method:'POST',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'},body:JSON.stringify({nombre:nuevoEmpleado.nombre,apellido:nuevoEmpleado.apellido,cedula:nuevoEmpleado.cedula,email:nuevoEmpleado.email,telefono:nuevoEmpleado.telefono,direccion:nuevoEmpleado.direccion,ciudad:nuevoEmpleado.ciudad,provincia:nuevoEmpleado.provincia,fechaNacimiento:nuevoEmpleado.fechaNacimiento,genero:nuevoEmpleado.genero,estadoCivil:nuevoEmpleado.estadoCivil,departamentoId:parseInt(nuevoEmpleado.departamentoId)||null,puestoId:parseInt(nuevoEmpleado.puestoId)||null,fechaIngreso:nuevoEmpleado.fechaIngreso,salario:parseFloat(nuevoEmpleado.salario)||0,tipoContrato:nuevoEmpleado.tipoContrato,estado:1})});if(!resEmpleado.ok){const errorData=await resEmpleado.json();throw new Error(errorData.error||'Error al crear empleado');}const dataEmpleado=await resEmpleado.json();const empleadoId=dataEmpleado.empleadoId||dataEmpleado.id;// 2. Crear el usuario asociado\nconst resUsuario=await fetch(`${AUTH_API_URL}/register`,{method:'POST',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'},body:JSON.stringify({username:nuevoEmpleado.username,email:nuevoEmpleado.email,password:nuevoEmpleado.password,role:nuevoEmpleado.rol,empleadoId:empleadoId})});if(!resUsuario.ok){const errorData=await resUsuario.json();throw new Error(errorData.error||'Empleado creado pero error al crear usuario');}setMessage({type:'success',text:'Empleado y usuario creados exitosamente'});setShowCreateEmpleadoModal(false);setNuevoEmpleado({nombre:'',apellido:'',cedula:'',email:'',telefono:'',direccion:'',ciudad:'',provincia:'',fechaNacimiento:'',genero:'',estadoCivil:'',departamentoId:'',puestoId:'',fechaIngreso:new Date().toISOString().split('T')[0],salario:'',tipoContrato:'Indefinido',username:'',password:'',confirmPassword:'',rol:'colaborador'});await loadUsuarios();}catch(err){setMessage({type:'error',text:err.message});}finally{setLoading(false);}};// --- Debug de token ---\nconst debugToken=()=>{const token=getToken();console.log('üîê Token encontrado:',token?'S√ç':'NO');if(token){try{const payload=JSON.parse(atob(token.split('.')[1]));console.log('üìã Payload del token:',payload);}catch(e){console.error('‚ùå Token malformado:',e);}}};// --- Inicializar permisos para un rol ---\nconst initializePermisosForRole=()=>{return MODULOS_SISTEMA.map((modulo,index)=>({PermisoID:`temp_${index}`,ModuloID:modulo.id,NombreModulo:modulo.nombre,DescripcionModulo:modulo.descripcion,EstaVisible:true,PuedeVer:false,PuedeCrear:false,PuedeEditar:false,PuedeEliminar:false}));};// --- Cargar usuarios (CORREGIDO) ---\nconst loadUsuarios=async()=>{setLoading(true);setError(null);debugToken();// Debug del token\ntry{// Intentar m√∫ltiples endpoints hasta encontrar uno que funcione\nconst endpoints=[`${AUTH_API_URL}/users`,`${API_BASE_URL}/usuarios`,`${ADMIN_API_URL}/users`,`${API_BASE_URL}/admin/usuarios`];let res=null;let usedEndpoint=null;for(const endpoint of endpoints){console.log('üì° Intentando endpoint:',endpoint);try{res=await fetch(endpoint,{method:'GET',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'}});if(res.ok){usedEndpoint=endpoint;console.log('‚úÖ Endpoint funciona:',endpoint);break;}else{console.log(`‚ùå Endpoint ${endpoint} fall√≥ con status:`,res.status);}}catch(err){console.log(`üí• Error en endpoint ${endpoint}:`,err.message);continue;}}if(!res||!res.ok){const errorText=res?await res.text():'Ning√∫n endpoint funcion√≥';console.error('‚ùå Todos los endpoints fallaron:',errorText);handleApiError(new Error(`No se pudo conectar: ${errorText}`),res);return;}console.log('üìä Usando endpoint exitoso:',usedEndpoint);console.log('üìä Respuesta del servidor:',{status:res.status,statusText:res.statusText,ok:res.ok});const data=await res.json();console.log('üìã Datos recibidos:',data);// Mapear la respuesta a la estructura esperada\nlet usuariosData=[];if(data.usuarios){// Si viene en formato { usuarios: [...] } - TU CASO\nusuariosData=data.usuarios;console.log('üéØ Usando data.usuarios:',usuariosData.length);}else if(data.users){// Si viene en formato { users: [...] }\nusuariosData=data.users;console.log('üéØ Usando data.users:',usuariosData.length);}else if(Array.isArray(data)){// Si viene directamente como array\nusuariosData=data;console.log('üéØ Usando data directamente:',usuariosData.length);}else if(data.recordset){// Si viene en formato de recordset de SQL Server\nusuariosData=data.recordset;console.log('üéØ Usando data.recordset:',usuariosData.length);}console.log('üìä usuariosData antes de normalizar:',usuariosData);// Normalizar la estructura de datos\nconst usuariosNormalizados=usuariosData.map(user=>({id:user.UsuarioID||user.id,username:user.Username||user.username,email:user.Email||user.email,rol:user.Rol||user.role||user.rol,estado:user.Estado||user.estado||1,empleadoId:user.EmpleadoID||user.empleadoId}));console.log('üë• Usuarios normalizados:',usuariosNormalizados);// Obtener nombres completos de empleados\nconst usuariosConNombres=await Promise.all(usuariosNormalizados.map(async usuario=>{if(usuario.empleadoId){try{const resEmpleado=await fetch(`${API_BASE_URL}/empleados/${usuario.empleadoId}`,{headers:{'Authorization':`Bearer ${getToken()}`}});if(resEmpleado.ok){const empleadoData=await resEmpleado.json();const empleado=empleadoData.empleado||empleadoData;return{...usuario,nombreCompleto:`${empleado.NOMBRE} ${empleado.APELLIDO}`.trim(),nombre:empleado.NOMBRE,apellido:empleado.APELLIDO};}}catch(err){console.error(`Error obteniendo empleado ${usuario.empleadoId}:`,err);}}return usuario;}));setUsuarios(usuariosConNombres);}catch(err){console.error('üí• Error cargando usuarios:',err);handleApiError(err);}finally{setLoading(false);}};// --- Cargar roles ---\nconst loadRoles=async()=>{setLoading(true);setError(null);try{console.log('üì° Cargando roles desde:',`${ADMIN_API_URL}/roles`);const res=await fetch(`${ADMIN_API_URL}/roles`,{headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'}});console.log('üìä Respuesta roles:',{status:res.status,ok:res.ok});// Si no existe el endpoint, usar roles por defecto\nif(!res.ok&&res.status===404){console.log('‚ö†Ô∏è Endpoint de roles no encontrado, usando roles por defecto');const defaultRoles=rolesDisponibles.map((rol,index)=>({RolID:index+1,NombreRol:rol,Descripcion:`Rol de ${rol.replace('_',' ')}`}));setRoles(defaultRoles);return;}if(!res.ok){handleApiError(new Error(`Error ${res.status}: ${res.statusText}`),res);return;}const data=await res.json();console.log('üìã Datos de roles:',data);let rolesData=data.roles||data.recordset||data;setRoles(rolesData);}catch(err){console.error('üí• Error cargando roles:',err);// Usar roles por defecto en caso de error\nconst defaultRoles=rolesDisponibles.map((rol,index)=>({RolID:index+1,NombreRol:rol,Descripcion:`Rol de ${rol.replace('_',' ')}`}));setRoles(defaultRoles);}finally{setLoading(false);}};// --- Cargar permisos de un rol espec√≠fico ---\nconst loadPermisos=async rolId=>{if(!rolId)return;setLoading(true);try{console.log('üì° Cargando permisos para rol:',rolId);const res=await fetch(`${ADMIN_API_URL}/permisos/${rolId}`,{headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'}});console.log('üìä Respuesta permisos:',{status:res.status,ok:res.ok});if(!res.ok&&res.status!==404){handleApiError(new Error(`Error ${res.status}: ${res.statusText}`),res);return;}let data={permisos:[]};if(res.ok){data=await res.json();console.log('üìã Permisos recibidos:',data);}// Si no hay permisos existentes, inicializar con todos los m√≥dulos\nif(!data.permisos||data.permisos.length===0){console.log('‚ö†Ô∏è No hay permisos, inicializando por defecto');setPermisos(initializePermisosForRole());}else{// Combinar permisos existentes con m√≥dulos del sistema\nconst permisosExistentes=data.permisos;const permisosCompletos=MODULOS_SISTEMA.map((modulo,index)=>{const permisoExistente=permisosExistentes.find(p=>p.ModuloID===modulo.id||p.NombreModulo===modulo.nombre);return{PermisoID:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PermisoID)||`temp_${index}`,ModuloID:modulo.id,NombreModulo:modulo.nombre,DescripcionModulo:modulo.descripcion,EstaVisible:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.EstaVisible)!==false,PuedeVer:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PuedeVer)||false,PuedeCrear:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PuedeCrear)||false,PuedeEditar:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PuedeEditar)||false,PuedeEliminar:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PuedeEliminar)||false};});setPermisos(permisosCompletos);}}catch(err){console.error('üí• Error cargando permisos:',err);setPermisos(initializePermisosForRole());}finally{setLoading(false);}};// --- Manejar cambio temporal de rol ---\nconst handleRoleChange=(userId,nuevoRol)=>{setChangedRoles(prev=>({...prev,[userId]:nuevoRol}));};// --- Actualizar rol de usuario ---\nconst updateUserRole=async(userId,nuevoRol)=>{console.log('üîÑ Actualizando rol:',{userId,nuevoRol});try{const usuario=usuarios.find(u=>u.id===userId);if(!usuario){throw new Error('Usuario no encontrado');}const res=await fetch(`${AUTH_API_URL}/users/${userId}`,{method:'PUT',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'},body:JSON.stringify({username:usuario.username,email:usuario.email,role:nuevoRol,estado:usuario.estado})});if(!res.ok){const errorText=await res.text();throw new Error(`Error ${res.status}: ${errorText}`);}setMessage({type:'success',text:'Rol actualizado correctamente'});// Limpiar cambios pendientes para este usuario\nsetChangedRoles(prev=>{const newChanges={...prev};delete newChanges[userId];return newChanges;});// Recargar usuarios\nawait loadUsuarios();}catch(err){console.error('üí• Error actualizando rol:',err);setMessage({type:'error',text:err.message});}};// --- Guardar todos los cambios de roles ---\nconst saveAllRoleChanges=async()=>{const changeCount=Object.keys(changedRoles).length;if(changeCount===0){setMessage({type:'error',text:'No hay cambios pendientes para guardar'});return;}setLoading(true);let successCount=0;let errorCount=0;try{for(const[userId,nuevoRol]of Object.entries(changedRoles)){try{await updateUserRole(parseInt(userId),nuevoRol);successCount++;}catch(error){errorCount++;console.error(`Error actualizando usuario ${userId}:`,error);}}if(errorCount===0){setMessage({type:'success',text:`Se actualizaron ${successCount} roles correctamente`});setChangedRoles({});}else{setMessage({type:'error',text:`${successCount} exitosos, ${errorCount} fallaron`});}}finally{setLoading(false);}};// --- Cancelar cambios ---\nconst cancelRoleChanges=()=>{setChangedRoles({});setMessage({type:'success',text:'Cambios cancelados'});};// --- Obtener el rol actual (con cambios pendientes) ---\nconst getCurrentRole=usuario=>{return changedRoles[usuario.id]||usuario.rol;};// --- Actualizar permisos ---\nconst updatePermisos=async()=>{if(!selectedRol)return;try{const permisosData=permisos.map(p=>{// Buscar el m√≥dulo original para obtener el nombre correcto\nconst moduloOriginal=MODULOS_SISTEMA.find(m=>m.id===p.ModuloID);return{moduloId:p.ModuloID,nombreModulo:p.NombreModulo||(moduloOriginal===null||moduloOriginal===void 0?void 0:moduloOriginal.nombre)||'desconocido',// ‚¨ÖÔ∏è ARREGLO\ndescripcionModulo:p.DescripcionModulo||(moduloOriginal===null||moduloOriginal===void 0?void 0:moduloOriginal.descripcion)||'',estaVisible:p.EstaVisible,puedeVer:p.PuedeVer,puedeCrear:p.PuedeCrear,puedeEditar:p.PuedeEditar,puedeEliminar:p.PuedeEliminar};});console.log('üì§ Enviando permisos:',permisosData);// Para debug\nconst res=await fetch(`${ADMIN_API_URL}/permisos/${selectedRol}`,{method:'PUT',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'},body:JSON.stringify({permisos:permisosData})});if(!res.ok){const errorText=await res.text();throw new Error(`Error ${res.status}: ${errorText}`);}setMessage({type:'success',text:'Permisos actualizados correctamente'});}catch(err){console.error('üí• Error actualizando permisos:',err);setMessage({type:'error',text:err.message});}};// --- Cambiar permiso espec√≠fico ---\nconst togglePermiso=(permisoId,campo)=>{setPermisos(prev=>prev.map(p=>p.PermisoID===permisoId?{...p,[campo]:!p[campo]}:p));};// --- Toggle visibilidad del m√≥dulo ---\nconst toggleVisibilidad=permisoId=>{setPermisos(prev=>prev.map(p=>p.PermisoID===permisoId?{...p,EstaVisible:!p.EstaVisible,PuedeVer:!p.EstaVisible?p.PuedeVer:false,PuedeCrear:!p.EstaVisible?p.PuedeCrear:false,PuedeEditar:!p.EstaVisible?p.PuedeEditar:false,PuedeEliminar:!p.EstaVisible?p.PuedeEliminar:false}:p));};// --- Seleccionar rol para editar permisos ---\nconst selectRol=(rolId,rolName)=>{setSelectedRol(rolId);setSelectedRolName(rolName);loadPermisos(rolId);};// --- Cargar datos al inicio ---\nuseEffect(()=>{if(activeTab==='usuarios'){loadUsuarios();loadEmpleadosSinUsuario();// ‚¨ÖÔ∏è AGREGAR ESTA L√çNEA\n}else if(activeTab==='permisos'){loadRoles();}},[activeTab]);// Limpiar mensajes despu√©s de 5 segundos\nuseEffect(()=>{if(message.text){const timer=setTimeout(()=>{setMessage({type:'',text:''});},5000);return()=>clearTimeout(timer);}},[message]);if(loading&&usuarios.length===0&&roles.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Cargando...\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 p-4 sm:p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-b border-gray-200 px-6 py-4\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(Shield,{className:\"mr-3 h-7 w-7 text-blue-600\"}),\"Gesti\\xF3n de Roles y Permisos\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Administra usuarios, roles y permisos del sistema\"})]}),message.text&&/*#__PURE__*/_jsxs(\"div\",{className:`mx-6 mt-4 p-4 rounded-md flex items-center ${message.type==='success'?'bg-green-50 border border-green-200 text-green-800':'bg-red-50 border border-red-200 text-red-800'}`,children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"mr-2 h-5 w-5\"}),message.text]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mx-6 mt-4 p-4 rounded-md bg-red-50 border border-red-200 text-red-800 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"mr-2 h-5 w-5\"}),\"Error: \",error]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"flex px-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('usuarios'),className:`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${activeTab==='usuarios'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,children:[/*#__PURE__*/_jsx(Users,{className:\"inline-block mr-2 h-4 w-4\"}),\"Gesti\\xF3n de Usuarios\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('permisos'),className:`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${activeTab==='permisos'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,children:[/*#__PURE__*/_jsx(Settings,{className:\"inline-block mr-2 h-4 w-4\"}),\"Configuraci\\xF3n de Permisos\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('info'),className:`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${activeTab==='info'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,children:[/*#__PURE__*/_jsx(Eye,{className:\"inline-block mr-2 h-4 w-4\"}),\"Informaci\\xF3n del Sistema\"]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[activeTab==='usuarios'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Usuarios del Sistema\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium\",children:[usuarios.length,\" usuarios\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{loadEmpleadosSinUsuario();setShowCreateUserModal(true);},className:\"inline-flex items-center px-3 py-2 border border-blue-600 text-sm font-medium rounded-md text-blue-600 bg-white hover:bg-blue-50 transition-colors\",children:[/*#__PURE__*/_jsx(Plus,{className:\"mr-1.5 h-4 w-4\"}),\"Usuario para Empleado\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCreateEmpleadoModal(true),className:\"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 transition-colors\",children:[/*#__PURE__*/_jsx(Users,{className:\"mr-1.5 h-4 w-4\"}),\"Nuevo Empleado + Usuario\"]})]}),Object.keys(changedRoles).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium\",children:[Object.keys(changedRoles).length,\" cambios pendientes\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:saveAllRoleChanges,disabled:loading,className:\"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50\",children:[/*#__PURE__*/_jsx(Save,{className:\"mr-1.5 h-4 w-4\"}),\"Guardar Todo\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:cancelRoleChanges,disabled:loading,className:\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\",children:[/*#__PURE__*/_jsx(X,{className:\"mr-1.5 h-4 w-4\"}),\"Cancelar\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Usuario\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Rol Actual\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Estado\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:usuarios.map(usuario=>{var _usuario$username,_usuario$username$cha;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 h-10 w-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium text-sm\",children:((_usuario$username=usuario.username)===null||_usuario$username===void 0?void 0:(_usuario$username$cha=_usuario$username.charAt(0))===null||_usuario$username$cha===void 0?void 0:_usuario$username$cha.toUpperCase())||'U'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:usuario.email?usuario.email.split('@')[0]:usuario.username}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"ID: \",usuario.id]})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:usuario.email||'Sin email'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${changedRoles[usuario.id]?'bg-yellow-100 text-yellow-800 border border-yellow-300':'bg-blue-100 text-blue-800'}`,children:getCurrentRole(usuario)}),changedRoles[usuario.id]&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs text-yellow-600 font-medium\",children:\"(Pendiente)\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${usuario.estado==='activo'||usuario.estado===1||usuario.estado===true?'bg-green-100 text-green-800':'bg-red-100 text-red-800'}`,children:usuario.estado==='activo'||usuario.estado===1||usuario.estado===true?'Activo':'Inactivo'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"select\",{value:getCurrentRole(usuario),onChange:e=>handleRoleChange(usuario.id,e.target.value),disabled:loading,className:`border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${loading?'opacity-50 cursor-not-allowed':'hover:border-gray-400'} ${changedRoles[usuario.id]?'border-yellow-400 bg-yellow-50':''}`,children:rolesDisponibles.map(rol=>/*#__PURE__*/_jsx(\"option\",{value:rol,children:rol.charAt(0).toUpperCase()+rol.slice(1).replace('_',' ')},rol))}),changedRoles[usuario.id]&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateUserRole(usuario.id,changedRoles[usuario.id]),disabled:loading,className:\"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50\",title:\"Guardar este cambio\",children:/*#__PURE__*/_jsx(Check,{className:\"h-3 w-3\"})})]})})]},usuario.id);})})]}),usuarios.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Users,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No hay usuarios\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"No se encontraron usuarios en el sistema.\"})]})]})]}),activeTab==='permisos'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Configuraci\\xF3n de Permisos por Rol\"}),selectedRol&&/*#__PURE__*/_jsxs(\"button\",{onClick:updatePermisos,className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\",children:[/*#__PURE__*/_jsx(Save,{className:\"mr-2 h-4 w-4\"}),\"Guardar Cambios\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-900 mb-4\",children:\"Seleccionar Rol\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:roles.map(rol=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>selectRol(rol.RolID,rol.NombreRol),className:`w-full text-left px-4 py-3 rounded-md text-sm font-medium transition-colors ${selectedRol===rol.RolID?'bg-blue-100 text-blue-700 border border-blue-300 shadow-sm':'bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 hover:border-gray-300'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:rol.NombreRol}),selectedRol===rol.RolID&&/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4 text-blue-600\"})]}),rol.Descripcion&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:rol.Descripcion})]},rol.RolID))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2\",children:selectedRol?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-medium text-gray-900 mb-4\",children:[\"Permisos para: \",/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600\",children:selectedRolName})]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Cargando permisos...\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"M\\xF3dulo\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(EyeOff,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Visible\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Ver\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Crear\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(Edit,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Editar\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(Trash2,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Eliminar\"})]})})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:permisos.map(permiso=>/*#__PURE__*/_jsxs(\"tr\",{className:`hover:bg-gray-50 transition-colors ${!permiso.EstaVisible?'bg-gray-100 opacity-60':''}`,children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:`${!permiso.EstaVisible?'line-through text-gray-500':''}`,children:permiso.NombreModulo}),!permiso.EstaVisible&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs bg-red-100 text-red-600 px-2 py-1 rounded\",children:\"OCULTO\"})]}),/*#__PURE__*/_jsx(\"div\",{className:`text-sm ${!permiso.EstaVisible?'text-gray-400 line-through':'text-gray-500'}`,children:permiso.DescripcionModulo})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleVisibilidad(permiso.PermisoID),className:`p-2 rounded-full transition-colors ${permiso.EstaVisible?'text-green-600 bg-green-100 hover:bg-green-200':'text-red-600 bg-red-100 hover:bg-red-200'}`,title:permiso.EstaVisible?'M√≥dulo visible - Click para ocultar':'M√≥dulo oculto - Click para mostrar',children:permiso.EstaVisible?/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(EyeOff,{className:\"h-4 w-4\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePermiso(permiso.PermisoID,'PuedeVer'),disabled:!permiso.EstaVisible,className:`p-2 rounded-full transition-colors ${!permiso.EstaVisible?'text-gray-300 bg-gray-100 cursor-not-allowed':permiso.PuedeVer?'text-green-600 bg-green-100 hover:bg-green-200':'text-gray-400 bg-gray-100 hover:bg-gray-200'}`,title:!permiso.EstaVisible?'M√≥dulo oculto':permiso.PuedeVer?'Permitido':'No permitido',children:permiso.PuedeVer?/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePermiso(permiso.PermisoID,'PuedeCrear'),disabled:!permiso.EstaVisible,className:`p-2 rounded-full transition-colors ${!permiso.EstaVisible?'text-gray-300 bg-gray-100 cursor-not-allowed':permiso.PuedeCrear?'text-green-600 bg-green-100 hover:bg-green-200':'text-gray-400 bg-gray-100 hover:bg-gray-200'}`,title:!permiso.EstaVisible?'M√≥dulo oculto':permiso.PuedeCrear?'Permitido':'No permitido',children:permiso.PuedeCrear?/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePermiso(permiso.PermisoID,'PuedeEditar'),disabled:!permiso.EstaVisible,className:`p-2 rounded-full transition-colors ${!permiso.EstaVisible?'text-gray-300 bg-gray-100 cursor-not-allowed':permiso.PuedeEditar?'text-green-600 bg-green-100 hover:bg-green-200':'text-gray-400 bg-gray-100 hover:bg-gray-200'}`,title:!permiso.EstaVisible?'M√≥dulo oculto':permiso.PuedeEditar?'Permitido':'No permitido',children:permiso.PuedeEditar?/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePermiso(permiso.PermisoID,'PuedeEliminar'),disabled:!permiso.EstaVisible,className:`p-2 rounded-full transition-colors ${!permiso.EstaVisible?'text-gray-300 bg-gray-100 cursor-not-allowed':permiso.PuedeEliminar?'text-green-600 bg-green-100 hover:bg-green-200':'text-gray-400 bg-gray-100 hover:bg-gray-200'}`,title:!permiso.EstaVisible?'M√≥dulo oculto':permiso.PuedeEliminar?'Permitido':'No permitido',children:permiso.PuedeEliminar?/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})})]},permiso.PermisoID))})]}),permisos.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(Settings,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"Cargando m\\xF3dulos del sistema\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Preparando todos los m\\xF3dulos para este rol...\"})]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-16 text-gray-500\",children:[/*#__PURE__*/_jsx(Shield,{className:\"mx-auto h-16 w-16 text-gray-300 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Selecciona un rol\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Elige un rol de la lista para ver y editar sus permisos\"})]})})]})]}),activeTab==='info'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(Settings,{className:\"h-5 w-5 text-purple-600 mr-2\"}),/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:[\"M\\xF3dulos del Sistema (\",MODULOS_SISTEMA.length,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-5 w-5 text-blue-600 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-800 font-medium\",children:\"Informaci\\xF3n del Sistema\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-700 mt-2 text-sm\",children:\"Todos los roles tienen acceso a estos m\\xF3dulos por defecto. Como administrador, puedes controlar la visibilidad y permisos espec\\xEDficos de cada m\\xF3dulo para cada rol.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\",children:MODULOS_SISTEMA.map(modulo=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-50 to-purple-100 border border-purple-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-purple-800\",children:modulo.nombre}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-purple-600 bg-purple-200 px-2 py-1 rounded\",children:\"Sistema\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-700\",children:modulo.descripcion})]},modulo.id))})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(Shield,{className:\"h-5 w-5 text-blue-600 mr-2\"}),/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:[\"Roles del Sistema (\",roles.length,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\",children:roles.map(rol=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-green-50 to-green-100 border border-green-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-green-800\",children:rol.NombreRol}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-green-600 bg-green-200 px-2 py-1 rounded\",children:[\"ID: \",rol.RolID]})]}),rol.Descripcion&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-700\",children:rol.Descripcion})]},rol.RolID))})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(Eye,{className:\"h-5 w-5 text-indigo-600 mr-2\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Estad\\xEDsticas del Sistema\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-blue-600\",children:usuarios.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 mt-1\",children:\"Usuarios Totales\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-green-600\",children:roles.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 mt-1\",children:\"Roles Configurados\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-purple-600\",children:MODULOS_SISTEMA.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 mt-1\",children:\"M\\xF3dulos del Sistema\"})]})]})]})]})]})}),showCreateUserModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 text-white px-6 py-4 rounded-t-lg\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold flex items-center\",children:[/*#__PURE__*/_jsx(Plus,{className:\"mr-2 h-5 w-5\"}),\"Crear Usuario para Empleado Existente\"]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:crearUsuarioParaEmpleado,className:\"p-6 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Seleccionar Empleado *\"}),/*#__PURE__*/_jsxs(\"select\",{value:nuevoUsuario.empleadoId,onChange:e=>setNuevoUsuario({...nuevoUsuario,empleadoId:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Seleccione un empleado --\"}),empleadosDisponibles.map(emp=>/*#__PURE__*/_jsxs(\"option\",{value:emp.EMPLEADO_ID,children:[emp.NOMBRE,\" \",emp.APELLIDO,\" - \",emp.CEDULA]},emp.EMPLEADO_ID))]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Solo se muestran empleados sin usuario asignado\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Nombre de Usuario *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nuevoUsuario.username,onChange:e=>setNuevoUsuario({...nuevoUsuario,username:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"usuario123\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:nuevoUsuario.email,onChange:e=>setNuevoUsuario({...nuevoUsuario,email:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"usuario@empresa.com\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Contrase\\xF1a *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:nuevoUsuario.password,onChange:e=>setNuevoUsuario({...nuevoUsuario,password:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"M\\xEDnimo 6 caracteres\",minLength:\"6\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Confirmar Contrase\\xF1a *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:nuevoUsuario.confirmPassword,onChange:e=>setNuevoUsuario({...nuevoUsuario,confirmPassword:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"Repita la contrase\\xF1a\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Rol *\"}),/*#__PURE__*/_jsx(\"select\",{value:nuevoUsuario.rol,onChange:e=>setNuevoUsuario({...nuevoUsuario,rol:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",required:true,children:rolesDisponibles.map(rol=>/*#__PURE__*/_jsx(\"option\",{value:rol,children:rol.charAt(0).toUpperCase()+rol.slice(1).replace('_',' ')},rol))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowCreateUserModal(false);setNuevoUsuario({empleadoId:'',username:'',email:'',password:'',confirmPassword:'',rol:'colaborador'});},className:\"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?'Creando...':'Crear Usuario'})]})]})]})}),showCreateEmpleadoModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-600 text-white px-6 py-4 rounded-t-lg sticky top-0 z-10\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold flex items-center\",children:[/*#__PURE__*/_jsx(Users,{className:\"mr-2 h-5 w-5\"}),\"Crear Nuevo Empleado + Usuario\"]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:crearEmpleadoConUsuario,className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-semibold text-gray-900 mb-3 border-b pb-2\",children:\"Datos Personales del Empleado\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Nombre *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nuevoEmpleado.nombre,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,nombre:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Apellido *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nuevoEmpleado.apellido,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,apellido:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"C\\xE9dula *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nuevoEmpleado.cedula,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,cedula:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",placeholder:\"000-0000000-0\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:nuevoEmpleado.email,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,email:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:nuevoEmpleado.telefono,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,telefono:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Fecha Nacimiento *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:nuevoEmpleado.fechaNacimiento,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,fechaNacimiento:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"G\\xE9nero *\"}),/*#__PURE__*/_jsxs(\"select\",{value:nuevoEmpleado.genero,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,genero:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Masculino\",children:\"Masculino\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Femenino\",children:\"Femenino\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Estado Civil\"}),/*#__PURE__*/_jsxs(\"select\",{value:nuevoEmpleado.estadoCivil,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,estadoCivil:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Soltero\",children:\"Soltero/a\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Casado\",children:\"Casado/a\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Divorciado\",children:\"Divorciado/a\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Viudo\",children:\"Viudo/a\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-semibold text-gray-900 mb-3 border-b pb-2\",children:\"Credenciales de Acceso\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Nombre de Usuario *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nuevoEmpleado.username,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,username:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Rol *\"}),/*#__PURE__*/_jsx(\"select\",{value:nuevoEmpleado.rol,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,rol:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true,children:rolesDisponibles.map(rol=>/*#__PURE__*/_jsx(\"option\",{value:rol,children:rol.charAt(0).toUpperCase()+rol.slice(1).replace('_',' ')},rol))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Contrase\\xF1a *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:nuevoEmpleado.password,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,password:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",minLength:\"6\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Confirmar Contrase\\xF1a *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:nuevoEmpleado.confirmPassword,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,confirmPassword:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-4 sticky bottom-0 bg-white border-t\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowCreateEmpleadoModal(false),className:\"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50\",children:loading?'Creando...':'Crear Empleado y Usuario'})]})]})]})})]})});};export default AdminPermissions;","map":{"version":3,"names":["React","useEffect","useState","Users","Settings","Shield","Check","X","Save","AlertCircle","Eye","Plus","Edit","Trash2","EyeOff","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","process","env","REACT_APP_API_URL","AUTH_API_URL","ADMIN_API_URL","getToken","localStorage","getItem","MODULOS_SISTEMA","id","nombre","descripcion","descripci√≥n","AdminPermissions","activeTab","setActiveTab","usuarios","setUsuarios","roles","setRoles","selectedRol","setSelectedRol","selectedRolName","setSelectedRolName","permisos","setPermisos","loading","setLoading","error","setError","message","setMessage","type","text","changedRoles","setChangedRoles","showCreateUserModal","setShowCreateUserModal","showCreateEmpleadoModal","setShowCreateEmpleadoModal","empleadosDisponibles","setEmpleadosDisponibles","nuevoUsuario","setNuevoUsuario","empleadoId","username","email","password","confirmPassword","rol","nuevoEmpleado","setNuevoEmpleado","apellido","cedula","telefono","direccion","ciudad","provincia","fechaNacimiento","genero","estadoCivil","departamentoId","puestoId","fechaIngreso","Date","toISOString","split","salario","tipoContrato","rolesDisponibles","handleApiError","response","console","status","loadEmpleadosSinUsuario","res","fetch","headers","ok","data","json","empleados","empleadosConUsuario","map","u","sinUsuario","filter","emp","includes","EMPLEADO_ID","err","crearUsuarioParaEmpleado","e","preventDefault","length","method","body","JSON","stringify","role","parseInt","errorData","Error","loadUsuarios","crearEmpleadoConUsuario","resEmpleado","parseFloat","estado","dataEmpleado","resUsuario","debugToken","token","log","payload","parse","atob","initializePermisosForRole","modulo","index","PermisoID","ModuloID","NombreModulo","DescripcionModulo","EstaVisible","PuedeVer","PuedeCrear","PuedeEditar","PuedeEliminar","endpoints","usedEndpoint","endpoint","errorText","statusText","usuariosData","users","Array","isArray","recordset","usuariosNormalizados","user","UsuarioID","Username","Email","Rol","Estado","EmpleadoID","usuariosConNombres","Promise","all","usuario","empleadoData","empleado","nombreCompleto","NOMBRE","APELLIDO","trim","loadRoles","defaultRoles","RolID","NombreRol","Descripcion","replace","rolesData","loadPermisos","rolId","permisosExistentes","permisosCompletos","permisoExistente","find","p","handleRoleChange","userId","nuevoRol","prev","updateUserRole","newChanges","saveAllRoleChanges","changeCount","Object","keys","successCount","errorCount","entries","cancelRoleChanges","getCurrentRole","updatePermisos","permisosData","moduloOriginal","m","moduloId","nombreModulo","descripcionModulo","estaVisible","puedeVer","puedeCrear","puedeEditar","puedeEliminar","togglePermiso","permisoId","campo","toggleVisibilidad","selectRol","rolName","timer","setTimeout","clearTimeout","className","children","onClick","disabled","_usuario$username","_usuario$username$cha","charAt","toUpperCase","value","onChange","target","slice","title","permiso","onSubmit","required","CEDULA","placeholder","minLength"],"sources":["C:/Users/josemontedeoca/rrhh-system/frontend/src/components/Admin/AdminPermissions.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Users, Settings, Shield, Check, X, Save, AlertCircle, Eye, Plus, Edit, Trash2, EyeOff } from 'lucide-react';\r\n\r\n// üîë URLs de API actualizadas\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://192.168.0.239:5000/api';\r\nconst AUTH_API_URL = `${API_BASE_URL}/auth`;\r\nconst ADMIN_API_URL = `${API_BASE_URL}/admin`;\r\n\r\n// ‚úÖ Funci√≥n para obtener el token\r\nconst getToken = () => {\r\n  return localStorage.getItem('token') || localStorage.getItem('rrhh_token');\r\n};\r\n\r\n// üìã M√≥dulos predefinidos del sistema\r\nconst MODULOS_SISTEMA = [\r\n  { id: 1, nombre: 'empleados', descripcion: 'Gesti√≥n de empleados' },\r\n  { id: 2, nombre: 'vacantes', descripcion: 'Gesti√≥n de vacantes' },\r\n  { id: 3, nombre: 'postulaciones', descripcion: 'Gesti√≥n de postulaciones' },\r\n  { id: 4, nombre: 'nomina', descripcion: 'Gesti√≥n de n√≥mina' },\r\n  { id: 5, nombre: 'vacaciones', descripcion: 'Gesti√≥n de vacaciones' },\r\n  { id: 6, nombre: 'capacitaciones', descripcion: 'Gesti√≥n de capacitaciones' },\r\n  { id: 7, nombre: 'asistencia', descripcion: 'Control de asistencias' },\r\n  { id: 8, nombre: 'departamentos', descripcion: 'Gesti√≥n de departamentos' },\r\n  { id: 9, nombre: 'puestos', descripci√≥n: 'Gesti√≥n de puestos' },\r\n  { id: 10, nombre: 'reportes', descripcion: 'Reportes del sistema' },\r\n  { id: 11, nombre: 'admin', descripcion: 'Administraci√≥n de usuarios y permisos' },\r\n  { id: 12, nombre: 'acciones_personal', descripcion: 'Acciones de personal y documentos' }\r\n  \r\n  \r\n  \r\n];\r\n\r\nconst AdminPermissions = () => {\r\n  const [activeTab, setActiveTab] = useState('usuarios');\r\n  const [usuarios, setUsuarios] = useState([]);\r\n  const [roles, setRoles] = useState([]);\r\n  const [selectedRol, setSelectedRol] = useState(null);\r\n  const [selectedRolName, setSelectedRolName] = useState('');\r\n  const [permisos, setPermisos] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n  const [changedRoles, setChangedRoles] = useState({});\r\n\r\n  // ‚¨áÔ∏è omponente AdminPermissions nuevo user ‚¨áÔ∏è\r\nconst [showCreateUserModal, setShowCreateUserModal] = useState(false);\r\nconst [showCreateEmpleadoModal, setShowCreateEmpleadoModal] = useState(false);\r\nconst [empleadosDisponibles, setEmpleadosDisponibles] = useState([]);\r\nconst [nuevoUsuario, setNuevoUsuario] = useState({\r\n  empleadoId: '',\r\n  username: '',\r\n  email: '',\r\n  password: '',\r\n  confirmPassword: '',\r\n  rol: 'colaborador'\r\n});\r\nconst [nuevoEmpleado, setNuevoEmpleado] = useState({\r\n  nombre: '',\r\n  apellido: '',\r\n  cedula: '',\r\n  email: '',\r\n  telefono: '',\r\n  direccion: '',\r\n  ciudad: '',\r\n  provincia: '',\r\n  fechaNacimiento: '',\r\n  genero: '',\r\n  estadoCivil: '',\r\n  departamentoId: '',\r\n  puestoId: '',\r\n  fechaIngreso: new Date().toISOString().split('T')[0],\r\n  salario: '',\r\n  tipoContrato: 'Indefinido',\r\n  username: '',\r\n  password: '',\r\n  confirmPassword: '',\r\n  rol: 'colaborador'\r\n});\r\n  \r\n  // Lista de roles disponibles\r\n  const rolesDisponibles = [\r\n    'colaborador',\r\n    'gerente', \r\n    'director',\r\n    'rrhh',\r\n    'gerente_rrhh',\r\n    'director_rrhh',\r\n    'admin'\r\n  ];\r\n\r\n  // --- Funci√≥n helper para manejar errores de API ---\r\n  const handleApiError = (error, response) => {\r\n    console.error('Error de API:', { error, status: response?.status });\r\n    \r\n    if (response?.status === 401) {\r\n      setError('Sesi√≥n expirada. Por favor, inicia sesi√≥n nuevamente.');\r\n    } else if (response?.status === 403) {\r\n      setError('No tienes permisos para realizar esta acci√≥n.');\r\n    } else if (response?.status === 404) {\r\n      setError('Endpoint no encontrado. Verifica la configuraci√≥n del servidor.');\r\n    } else {\r\n      setError(error.message || 'Error interno del servidor');\r\n    }\r\n  };\r\n\r\n    // Nueva funci√≥n para cargar empleados sin usuario\r\n  const loadEmpleadosSinUsuario = async () => {\r\n    try {\r\n      const res = await fetch(`${API_BASE_URL}/empleados`, {\r\n        headers: { 'Authorization': `Bearer ${getToken()}` }\r\n      });\r\n      \r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        const empleados = data.empleados || data;\r\n        \r\n        const empleadosConUsuario = usuarios.map(u => u.empleadoId);\r\n        const sinUsuario = empleados.filter(emp => \r\n          !empleadosConUsuario.includes(emp.EMPLEADO_ID)\r\n        );\r\n        \r\n        setEmpleadosDisponibles(sinUsuario);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error cargando empleados:', err);\r\n    }\r\n  };\r\n\r\n  // Funci√≥n para crear usuario para empleado existente\r\n  const crearUsuarioParaEmpleado = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!nuevoUsuario.empleadoId) {\r\n      setMessage({ type: 'error', text: 'Debe seleccionar un empleado' });\r\n      return;\r\n    }\r\n    \r\n    if (!nuevoUsuario.username || !nuevoUsuario.email || !nuevoUsuario.password) {\r\n      setMessage({ type: 'error', text: 'Complete todos los campos requeridos' });\r\n      return;\r\n    }\r\n    \r\n    if (nuevoUsuario.password !== nuevoUsuario.confirmPassword) {\r\n      setMessage({ type: 'error', text: 'Las contrase√±as no coinciden' });\r\n      return;\r\n    }\r\n    \r\n    if (nuevoUsuario.password.length < 6) {\r\n      setMessage({ type: 'error', text: 'La contrase√±a debe tener al menos 6 caracteres' });\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(`${AUTH_API_URL}/register`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          username: nuevoUsuario.username,\r\n          email: nuevoUsuario.email,\r\n          password: nuevoUsuario.password,\r\n          role: nuevoUsuario.rol,\r\n          empleadoId: parseInt(nuevoUsuario.empleadoId)\r\n        })\r\n      });\r\n      \r\n      if (!res.ok) {\r\n        const errorData = await res.json();\r\n        throw new Error(errorData.error || 'Error al crear usuario');\r\n      }\r\n      \r\n      setMessage({ type: 'success', text: 'Usuario creado exitosamente' });\r\n      setShowCreateUserModal(false);\r\n      setNuevoUsuario({\r\n        empleadoId: '',\r\n        username: '',\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        rol: 'colaborador'\r\n      });\r\n      await loadUsuarios();\r\n    } catch (err) {\r\n      setMessage({ type: 'error', text: err.message });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Funci√≥n para crear empleado completo con usuario\r\n  const crearEmpleadoConUsuario = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!nuevoEmpleado.nombre || !nuevoEmpleado.apellido || !nuevoEmpleado.cedula) {\r\n      setMessage({ type: 'error', text: 'Complete todos los campos requeridos del empleado' });\r\n      return;\r\n    }\r\n    \r\n    if (!nuevoEmpleado.username || !nuevoEmpleado.password) {\r\n      setMessage({ type: 'error', text: 'Complete los datos del usuario' });\r\n      return;\r\n    }\r\n    \r\n    if (nuevoEmpleado.password !== nuevoEmpleado.confirmPassword) {\r\n      setMessage({ type: 'error', text: 'Las contrase√±as no coinciden' });\r\n      return;\r\n    }\r\n    \r\n    if (nuevoEmpleado.password.length < 6) {\r\n      setMessage({ type: 'error', text: 'La contrase√±a debe tener al menos 6 caracteres' });\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    try {\r\n      // 1. Crear el empleado\r\n      const resEmpleado = await fetch(`${API_BASE_URL}/empleados`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          nombre: nuevoEmpleado.nombre,\r\n          apellido: nuevoEmpleado.apellido,\r\n          cedula: nuevoEmpleado.cedula,\r\n          email: nuevoEmpleado.email,\r\n          telefono: nuevoEmpleado.telefono,\r\n          direccion: nuevoEmpleado.direccion,\r\n          ciudad: nuevoEmpleado.ciudad,\r\n          provincia: nuevoEmpleado.provincia,\r\n          fechaNacimiento: nuevoEmpleado.fechaNacimiento,\r\n          genero: nuevoEmpleado.genero,\r\n          estadoCivil: nuevoEmpleado.estadoCivil,\r\n          departamentoId: parseInt(nuevoEmpleado.departamentoId) || null,\r\n          puestoId: parseInt(nuevoEmpleado.puestoId) || null,\r\n          fechaIngreso: nuevoEmpleado.fechaIngreso,\r\n          salario: parseFloat(nuevoEmpleado.salario) || 0,\r\n          tipoContrato: nuevoEmpleado.tipoContrato,\r\n          estado: 1\r\n        })\r\n      });\r\n      \r\n      if (!resEmpleado.ok) {\r\n        const errorData = await resEmpleado.json();\r\n        throw new Error(errorData.error || 'Error al crear empleado');\r\n      }\r\n      \r\n      const dataEmpleado = await resEmpleado.json();\r\n      const empleadoId = dataEmpleado.empleadoId || dataEmpleado.id;\r\n      \r\n      // 2. Crear el usuario asociado\r\n      const resUsuario = await fetch(`${AUTH_API_URL}/register`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          username: nuevoEmpleado.username,\r\n          email: nuevoEmpleado.email,\r\n          password: nuevoEmpleado.password,\r\n          role: nuevoEmpleado.rol,\r\n          empleadoId: empleadoId\r\n        })\r\n      });\r\n      \r\n      if (!resUsuario.ok) {\r\n        const errorData = await resUsuario.json();\r\n        throw new Error(errorData.error || 'Empleado creado pero error al crear usuario');\r\n      }\r\n      \r\n      setMessage({ type: 'success', text: 'Empleado y usuario creados exitosamente' });\r\n      setShowCreateEmpleadoModal(false);\r\n      setNuevoEmpleado({\r\n        nombre: '',\r\n        apellido: '',\r\n        cedula: '',\r\n        email: '',\r\n        telefono: '',\r\n        direccion: '',\r\n        ciudad: '',\r\n        provincia: '',\r\n        fechaNacimiento: '',\r\n        genero: '',\r\n        estadoCivil: '',\r\n        departamentoId: '',\r\n        puestoId: '',\r\n        fechaIngreso: new Date().toISOString().split('T')[0],\r\n        salario: '',\r\n        tipoContrato: 'Indefinido',\r\n        username: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        rol: 'colaborador'\r\n      });\r\n      await loadUsuarios();\r\n    } catch (err) {\r\n      setMessage({ type: 'error', text: err.message });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Debug de token ---\r\n  const debugToken = () => {\r\n    const token = getToken();\r\n    console.log('üîê Token encontrado:', token ? 'S√ç' : 'NO');\r\n    if (token) {\r\n      try {\r\n        const payload = JSON.parse(atob(token.split('.')[1]));\r\n        console.log('üìã Payload del token:', payload);\r\n      } catch (e) {\r\n        console.error('‚ùå Token malformado:', e);\r\n      }\r\n    }\r\n  };\r\n\r\n  // --- Inicializar permisos para un rol ---\r\n  const initializePermisosForRole = () => {\r\n    return MODULOS_SISTEMA.map((modulo, index) => ({\r\n      PermisoID: `temp_${index}`,\r\n      ModuloID: modulo.id,\r\n      NombreModulo: modulo.nombre,\r\n      DescripcionModulo: modulo.descripcion,\r\n      EstaVisible: true,\r\n      PuedeVer: false,\r\n      PuedeCrear: false,\r\n      PuedeEditar: false,\r\n      PuedeEliminar: false\r\n    }));\r\n  };\r\n\r\n  // --- Cargar usuarios (CORREGIDO) ---\r\n  const loadUsuarios = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    debugToken(); // Debug del token\r\n    \r\n    try {\r\n      // Intentar m√∫ltiples endpoints hasta encontrar uno que funcione\r\n      const endpoints = [\r\n        `${AUTH_API_URL}/users`,\r\n        `${API_BASE_URL}/usuarios`, \r\n        `${ADMIN_API_URL}/users`,\r\n        `${API_BASE_URL}/admin/usuarios`\r\n      ];\r\n      \r\n      let res = null;\r\n      let usedEndpoint = null;\r\n      \r\n      for (const endpoint of endpoints) {\r\n        console.log('üì° Intentando endpoint:', endpoint);\r\n        try {\r\n          res = await fetch(endpoint, {\r\n            method: 'GET',\r\n            headers: {\r\n              'Authorization': `Bearer ${getToken()}`,\r\n              'Content-Type': 'application/json'\r\n            }\r\n          });\r\n          \r\n          if (res.ok) {\r\n            usedEndpoint = endpoint;\r\n            console.log('‚úÖ Endpoint funciona:', endpoint);\r\n            break;\r\n          } else {\r\n            console.log(`‚ùå Endpoint ${endpoint} fall√≥ con status:`, res.status);\r\n          }\r\n        } catch (err) {\r\n          console.log(`üí• Error en endpoint ${endpoint}:`, err.message);\r\n          continue;\r\n        }\r\n      }\r\n      \r\n      if (!res || !res.ok) {\r\n        const errorText = res ? await res.text() : 'Ning√∫n endpoint funcion√≥';\r\n        console.error('‚ùå Todos los endpoints fallaron:', errorText);\r\n        handleApiError(new Error(`No se pudo conectar: ${errorText}`), res);\r\n        return;\r\n      }\r\n\r\n      console.log('üìä Usando endpoint exitoso:', usedEndpoint);\r\n      console.log('üìä Respuesta del servidor:', {\r\n        status: res.status,\r\n        statusText: res.statusText,\r\n        ok: res.ok\r\n      });\r\n\r\n      const data = await res.json();\r\n      console.log('üìã Datos recibidos:', data);\r\n\r\n      // Mapear la respuesta a la estructura esperada\r\n      let usuariosData = [];\r\n      \r\n      if (data.usuarios) {\r\n        // Si viene en formato { usuarios: [...] } - TU CASO\r\n        usuariosData = data.usuarios;\r\n        console.log('üéØ Usando data.usuarios:', usuariosData.length);\r\n      } else if (data.users) {\r\n        // Si viene en formato { users: [...] }\r\n        usuariosData = data.users;\r\n        console.log('üéØ Usando data.users:', usuariosData.length);\r\n      } else if (Array.isArray(data)) {\r\n        // Si viene directamente como array\r\n        usuariosData = data;\r\n        console.log('üéØ Usando data directamente:', usuariosData.length);\r\n      } else if (data.recordset) {\r\n        // Si viene en formato de recordset de SQL Server\r\n        usuariosData = data.recordset;\r\n        console.log('üéØ Usando data.recordset:', usuariosData.length);\r\n      }\r\n\r\n      console.log('üìä usuariosData antes de normalizar:', usuariosData);\r\n\r\n      // Normalizar la estructura de datos\r\n      const usuariosNormalizados = usuariosData.map(user => ({\r\n        id: user.UsuarioID || user.id,\r\n        username: user.Username || user.username,\r\n        email: user.Email || user.email,\r\n        rol: user.Rol || user.role || user.rol,\r\n        estado: user.Estado || user.estado || 1,\r\n        empleadoId: user.EmpleadoID || user.empleadoId\r\n      }));\r\n\r\n      console.log('üë• Usuarios normalizados:', usuariosNormalizados);\r\n     // Obtener nombres completos de empleados\r\n        const usuariosConNombres = await Promise.all(\r\n          usuariosNormalizados.map(async (usuario) => {\r\n            if (usuario.empleadoId) {\r\n              try {\r\n                const resEmpleado = await fetch(`${API_BASE_URL}/empleados/${usuario.empleadoId}`, {\r\n                  headers: { 'Authorization': `Bearer ${getToken()}` }\r\n                });\r\n                if (resEmpleado.ok) {\r\n                  const empleadoData = await resEmpleado.json();\r\n                  const empleado = empleadoData.empleado || empleadoData;\r\n                  return {\r\n                    ...usuario,\r\n                    nombreCompleto: `${empleado.NOMBRE} ${empleado.APELLIDO}`.trim(),\r\n                    nombre: empleado.NOMBRE,\r\n                    apellido: empleado.APELLIDO\r\n                  };\r\n                }\r\n              } catch (err) {\r\n                console.error(`Error obteniendo empleado ${usuario.empleadoId}:`, err);\r\n              }\r\n            }\r\n            return usuario;\r\n          })\r\n        );\r\n\r\n        setUsuarios(usuariosConNombres);\r\n\r\n    } catch (err) {\r\n      console.error('üí• Error cargando usuarios:', err);\r\n      handleApiError(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Cargar roles ---\r\n  const loadRoles = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      console.log('üì° Cargando roles desde:', `${ADMIN_API_URL}/roles`);\r\n      \r\n      const res = await fetch(`${ADMIN_API_URL}/roles`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      console.log('üìä Respuesta roles:', { status: res.status, ok: res.ok });\r\n\r\n      // Si no existe el endpoint, usar roles por defecto\r\n      if (!res.ok && res.status === 404) {\r\n        console.log('‚ö†Ô∏è Endpoint de roles no encontrado, usando roles por defecto');\r\n        const defaultRoles = rolesDisponibles.map((rol, index) => ({\r\n          RolID: index + 1,\r\n          NombreRol: rol,\r\n          Descripcion: `Rol de ${rol.replace('_', ' ')}`\r\n        }));\r\n        setRoles(defaultRoles);\r\n        return;\r\n      }\r\n\r\n      if (!res.ok) {\r\n        handleApiError(new Error(`Error ${res.status}: ${res.statusText}`), res);\r\n        return;\r\n      }\r\n\r\n      const data = await res.json();\r\n      console.log('üìã Datos de roles:', data);\r\n      \r\n      let rolesData = data.roles || data.recordset || data;\r\n      setRoles(rolesData);\r\n      \r\n    } catch (err) {\r\n      console.error('üí• Error cargando roles:', err);\r\n      // Usar roles por defecto en caso de error\r\n      const defaultRoles = rolesDisponibles.map((rol, index) => ({\r\n        RolID: index + 1,\r\n        NombreRol: rol,\r\n        Descripcion: `Rol de ${rol.replace('_', ' ')}`\r\n      }));\r\n      setRoles(defaultRoles);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Cargar permisos de un rol espec√≠fico ---\r\n  const loadPermisos = async (rolId) => {\r\n    if (!rolId) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      console.log('üì° Cargando permisos para rol:', rolId);\r\n      \r\n      const res = await fetch(`${ADMIN_API_URL}/permisos/${rolId}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n      \r\n      console.log('üìä Respuesta permisos:', { status: res.status, ok: res.ok });\r\n      \r\n      if (!res.ok && res.status !== 404) {\r\n        handleApiError(new Error(`Error ${res.status}: ${res.statusText}`), res);\r\n        return;\r\n      }\r\n\r\n      let data = { permisos: [] };\r\n      if (res.ok) {\r\n        data = await res.json();\r\n        console.log('üìã Permisos recibidos:', data);\r\n      }\r\n      \r\n      // Si no hay permisos existentes, inicializar con todos los m√≥dulos\r\n      if (!data.permisos || data.permisos.length === 0) {\r\n        console.log('‚ö†Ô∏è No hay permisos, inicializando por defecto');\r\n        setPermisos(initializePermisosForRole());\r\n      } else {\r\n        // Combinar permisos existentes con m√≥dulos del sistema\r\n        const permisosExistentes = data.permisos;\r\n        const permisosCompletos = MODULOS_SISTEMA.map((modulo, index) => {\r\n          const permisoExistente = permisosExistentes.find(p => \r\n            p.ModuloID === modulo.id || p.NombreModulo === modulo.nombre\r\n          );\r\n          \r\n          return {\r\n            PermisoID: permisoExistente?.PermisoID || `temp_${index}`,\r\n            ModuloID: modulo.id,\r\n            NombreModulo: modulo.nombre,\r\n            DescripcionModulo: modulo.descripcion,\r\n            EstaVisible: permisoExistente?.EstaVisible !== false,\r\n            PuedeVer: permisoExistente?.PuedeVer || false,\r\n            PuedeCrear: permisoExistente?.PuedeCrear || false,\r\n            PuedeEditar: permisoExistente?.PuedeEditar || false,\r\n            PuedeEliminar: permisoExistente?.PuedeEliminar || false\r\n          };\r\n        });\r\n        \r\n        setPermisos(permisosCompletos);\r\n      }\r\n    } catch (err) {\r\n      console.error('üí• Error cargando permisos:', err);\r\n      setPermisos(initializePermisosForRole());\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Manejar cambio temporal de rol ---\r\n  const handleRoleChange = (userId, nuevoRol) => {\r\n    setChangedRoles(prev => ({\r\n      ...prev,\r\n      [userId]: nuevoRol\r\n    }));\r\n  };\r\n\r\n  // --- Actualizar rol de usuario ---\r\n  const updateUserRole = async (userId, nuevoRol) => {\r\n    console.log('üîÑ Actualizando rol:', { userId, nuevoRol });\r\n    try {\r\n      const usuario = usuarios.find(u => u.id === userId);\r\n      if (!usuario) {\r\n        throw new Error('Usuario no encontrado');\r\n      }\r\n\r\n      const res = await fetch(`${AUTH_API_URL}/users/${userId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ \r\n          username: usuario.username,\r\n          email: usuario.email,\r\n          role: nuevoRol,\r\n          estado: usuario.estado\r\n        })\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const errorText = await res.text();\r\n        throw new Error(`Error ${res.status}: ${errorText}`);\r\n      }\r\n      \r\n      setMessage({ type: 'success', text: 'Rol actualizado correctamente' });\r\n      \r\n      // Limpiar cambios pendientes para este usuario\r\n      setChangedRoles(prev => {\r\n        const newChanges = { ...prev };\r\n        delete newChanges[userId];\r\n        return newChanges;\r\n      });\r\n      \r\n      // Recargar usuarios\r\n      await loadUsuarios();\r\n    } catch (err) {\r\n      console.error('üí• Error actualizando rol:', err);\r\n      setMessage({ type: 'error', text: err.message });\r\n    }\r\n  };\r\n\r\n  // --- Guardar todos los cambios de roles ---\r\n  const saveAllRoleChanges = async () => {\r\n    const changeCount = Object.keys(changedRoles).length;\r\n    if (changeCount === 0) {\r\n      setMessage({ type: 'error', text: 'No hay cambios pendientes para guardar' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    let successCount = 0;\r\n    let errorCount = 0;\r\n\r\n    try {\r\n      for (const [userId, nuevoRol] of Object.entries(changedRoles)) {\r\n        try {\r\n          await updateUserRole(parseInt(userId), nuevoRol);\r\n          successCount++;\r\n        } catch (error) {\r\n          errorCount++;\r\n          console.error(`Error actualizando usuario ${userId}:`, error);\r\n        }\r\n      }\r\n\r\n      if (errorCount === 0) {\r\n        setMessage({ type: 'success', text: `Se actualizaron ${successCount} roles correctamente` });\r\n        setChangedRoles({});\r\n      } else {\r\n        setMessage({ type: 'error', text: `${successCount} exitosos, ${errorCount} fallaron` });\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Cancelar cambios ---\r\n  const cancelRoleChanges = () => {\r\n    setChangedRoles({});\r\n    setMessage({ type: 'success', text: 'Cambios cancelados' });\r\n  };\r\n\r\n  // --- Obtener el rol actual (con cambios pendientes) ---\r\n  const getCurrentRole = (usuario) => {\r\n    return changedRoles[usuario.id] || usuario.rol;\r\n  };\r\n\r\n  // --- Actualizar permisos ---\r\n  const updatePermisos = async () => {\r\n    if (!selectedRol) return;\r\n\r\n    try {\r\n      const permisosData = permisos.map(p => {\r\n        // Buscar el m√≥dulo original para obtener el nombre correcto\r\n        const moduloOriginal = MODULOS_SISTEMA.find(m => m.id === p.ModuloID);\r\n        \r\n        return {\r\n          moduloId: p.ModuloID,\r\n          nombreModulo: p.NombreModulo || moduloOriginal?.nombre || 'desconocido',  // ‚¨ÖÔ∏è ARREGLO\r\n          descripcionModulo: p.DescripcionModulo || moduloOriginal?.descripcion || '',\r\n          estaVisible: p.EstaVisible,\r\n          puedeVer: p.PuedeVer,\r\n          puedeCrear: p.PuedeCrear,\r\n          puedeEditar: p.PuedeEditar,\r\n          puedeEliminar: p.PuedeEliminar\r\n        };\r\n      });\r\n\r\n      console.log('üì§ Enviando permisos:', permisosData); // Para debug\r\n\r\n      const res = await fetch(`${ADMIN_API_URL}/permisos/${selectedRol}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ permisos: permisosData })\r\n      });\r\n      \r\n      if (!res.ok) {\r\n        const errorText = await res.text();\r\n        throw new Error(`Error ${res.status}: ${errorText}`);\r\n      }\r\n      \r\n      setMessage({ type: 'success', text: 'Permisos actualizados correctamente' });\r\n    } catch (err) {\r\n      console.error('üí• Error actualizando permisos:', err);\r\n      setMessage({ type: 'error', text: err.message });\r\n    }\r\n  };\r\n\r\n  // --- Cambiar permiso espec√≠fico ---\r\n  const togglePermiso = (permisoId, campo) => {\r\n    setPermisos(prev => \r\n      prev.map(p => \r\n        p.PermisoID === permisoId \r\n          ? { ...p, [campo]: !p[campo] }\r\n          : p\r\n      )\r\n    );\r\n  };\r\n\r\n  // --- Toggle visibilidad del m√≥dulo ---\r\n  const toggleVisibilidad = (permisoId) => {\r\n    setPermisos(prev => \r\n      prev.map(p => \r\n        p.PermisoID === permisoId \r\n          ? { \r\n              ...p, \r\n              EstaVisible: !p.EstaVisible,\r\n              PuedeVer: !p.EstaVisible ? p.PuedeVer : false,\r\n              PuedeCrear: !p.EstaVisible ? p.PuedeCrear : false,\r\n              PuedeEditar: !p.EstaVisible ? p.PuedeEditar : false,\r\n              PuedeEliminar: !p.EstaVisible ? p.PuedeEliminar : false\r\n            }\r\n          : p\r\n      )\r\n    );\r\n  };\r\n\r\n  // --- Seleccionar rol para editar permisos ---\r\n  const selectRol = (rolId, rolName) => {\r\n    setSelectedRol(rolId);\r\n    setSelectedRolName(rolName);\r\n    loadPermisos(rolId);\r\n  };\r\n\r\n  // --- Cargar datos al inicio ---\r\n useEffect(() => {\r\n  if (activeTab === 'usuarios') {\r\n    loadUsuarios();\r\n    loadEmpleadosSinUsuario(); // ‚¨ÖÔ∏è AGREGAR ESTA L√çNEA\r\n  } else if (activeTab === 'permisos') {\r\n    loadRoles();\r\n  }\r\n}, [activeTab]);\r\n\r\n  // Limpiar mensajes despu√©s de 5 segundos\r\n  useEffect(() => {\r\n    if (message.text) {\r\n      const timer = setTimeout(() => {\r\n        setMessage({ type: '', text: '' });\r\n      }, 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [message]);\r\n\r\n  if (loading && usuarios.length === 0 && roles.length === 0) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Cargando...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 p-4 sm:p-6\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"bg-white rounded-lg shadow-sm mb-6\">\r\n          <div className=\"border-b border-gray-200 px-6 py-4\">\r\n            <h1 className=\"text-2xl font-bold text-gray-900 flex items-center\">\r\n              <Shield className=\"mr-3 h-7 w-7 text-blue-600\" />\r\n              Gesti√≥n de Roles y Permisos\r\n            </h1>\r\n            <p className=\"text-gray-600 mt-1\">Administra usuarios, roles y permisos del sistema</p>\r\n          </div>\r\n\r\n          {/* Debug Info */}\r\n          \r\n\r\n          {/* Mensaje de estado */}\r\n          {message.text && (\r\n            <div className={`mx-6 mt-4 p-4 rounded-md flex items-center ${\r\n              message.type === 'success' \r\n                ? 'bg-green-50 border border-green-200 text-green-800' \r\n                : 'bg-red-50 border border-red-200 text-red-800'\r\n            }`}>\r\n              <AlertCircle className=\"mr-2 h-5 w-5\" />\r\n              {message.text}\r\n            </div>\r\n          )}\r\n\r\n          {/* Error global */}\r\n          {error && (\r\n            <div className=\"mx-6 mt-4 p-4 rounded-md bg-red-50 border border-red-200 text-red-800 flex items-center\">\r\n              <AlertCircle className=\"mr-2 h-5 w-5\" />\r\n              Error: {error}\r\n            </div>\r\n          )}\r\n\r\n          {/* Tabs */}\r\n          <div className=\"border-b border-gray-200\">\r\n            <nav className=\"flex px-6\">\r\n              <button\r\n                onClick={() => setActiveTab('usuarios')}\r\n                className={`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${\r\n                  activeTab === 'usuarios'\r\n                    ? 'border-blue-500 text-blue-600'\r\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                }`}\r\n              >\r\n                <Users className=\"inline-block mr-2 h-4 w-4\" />\r\n                Gesti√≥n de Usuarios\r\n              </button>\r\n              <button\r\n                onClick={() => setActiveTab('permisos')}\r\n                className={`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${\r\n                  activeTab === 'permisos'\r\n                    ? 'border-blue-500 text-blue-600'\r\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                }`}\r\n              >\r\n                <Settings className=\"inline-block mr-2 h-4 w-4\" />\r\n                Configuraci√≥n de Permisos\r\n              </button>\r\n              <button\r\n                onClick={() => setActiveTab('info')}\r\n                className={`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${\r\n                  activeTab === 'info'\r\n                    ? 'border-blue-500 text-blue-600'\r\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                }`}\r\n              >\r\n                <Eye className=\"inline-block mr-2 h-4 w-4\" />\r\n                Informaci√≥n del Sistema\r\n              </button>\r\n            </nav>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Contenido principal */}\r\n        <div className=\"bg-white rounded-lg shadow-sm\">\r\n          <div className=\"p-6\">\r\n            {/* Tab Usuarios */}\r\n            {activeTab === 'usuarios' && (\r\n              <div>\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                  <h2 className=\"text-xl font-semibold text-gray-900\">\r\n                    Usuarios del Sistema\r\n                  </h2>\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <span className=\"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium\">\r\n                      {usuarios.length} usuarios\r\n                    </span>\r\n                     <div className=\"flex gap-2\">\r\n                      <button\r\n                        onClick={() => {\r\n                          loadEmpleadosSinUsuario();\r\n                          setShowCreateUserModal(true);\r\n                        }}\r\n                        className=\"inline-flex items-center px-3 py-2 border border-blue-600 text-sm font-medium rounded-md text-blue-600 bg-white hover:bg-blue-50 transition-colors\"\r\n                      >\r\n                        <Plus className=\"mr-1.5 h-4 w-4\" />\r\n                        Usuario para Empleado\r\n                      </button>\r\n                      \r\n                      <button\r\n                        onClick={() => setShowCreateEmpleadoModal(true)}\r\n                        className=\"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 transition-colors\"\r\n                      >\r\n                        <Users className=\"mr-1.5 h-4 w-4\" />\r\n                        Nuevo Empleado + Usuario\r\n                      </button>\r\n                    </div>\r\n                    {/* ‚¨ÜÔ∏è FIN ‚¨ÜÔ∏è */}\r\n\r\n                    {/* Botones para cambios pendientes */}\r\n                    {Object.keys(changedRoles).length > 0 && (\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium\">\r\n                          {Object.keys(changedRoles).length} cambios pendientes\r\n                        </span>\r\n                        <button\r\n                          onClick={saveAllRoleChanges}\r\n                          disabled={loading}\r\n                          className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50\"\r\n                        >\r\n                          <Save className=\"mr-1.5 h-4 w-4\" />\r\n                          Guardar Todo\r\n                        </button>\r\n                        <button\r\n                          onClick={cancelRoleChanges}\r\n                          disabled={loading}\r\n                          className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\"\r\n                        >\r\n                          <X className=\"mr-1.5 h-4 w-4\" />\r\n                          Cancelar\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"min-w-full divide-y divide-gray-200\">\r\n                    <thead className=\"bg-gray-50\">\r\n                      <tr>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Usuario\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Email\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Rol Actual\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Estado\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Acciones\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                      {usuarios.map((usuario) => (\r\n                        <tr key={usuario.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"flex items-center\">\r\n                              <div className=\"flex-shrink-0 h-10 w-10\">\r\n                                <div className=\"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium text-sm\">\r\n                                  {usuario.username?.charAt(0)?.toUpperCase() || 'U'}\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"ml-4\">\r\n                                <div className=\"text-sm font-medium text-gray-900\">\r\n                                 {usuario.email ? usuario.email.split('@')[0] : usuario.username}\r\n                                </div>\r\n                                <div className=\"text-sm text-gray-500\">\r\n                                  ID: {usuario.id}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            {usuario.email || 'Sin email'}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"flex items-center\">\r\n                              <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n                                changedRoles[usuario.id] \r\n                                  ? 'bg-yellow-100 text-yellow-800 border border-yellow-300' \r\n                                  : 'bg-blue-100 text-blue-800'\r\n                              }`}>\r\n                                {getCurrentRole(usuario)}\r\n                              </span>\r\n                              {changedRoles[usuario.id] && (\r\n                                <span className=\"ml-2 text-xs text-yellow-600 font-medium\">\r\n                                  (Pendiente)\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n                             usuario.estado === 'activo' || usuario.estado === 1 || usuario.estado === true\r\n                              ? 'bg-green-100 text-green-800' \r\n                              : 'bg-red-100 text-red-800'\r\n                          }`}>\r\n                            {usuario.estado === 'activo' || usuario.estado === 1 || usuario.estado === true ? 'Activo' : 'Inactivo'}\r\n                          </span>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <select\r\n                                value={getCurrentRole(usuario)}\r\n                                onChange={(e) => handleRoleChange(usuario.id, e.target.value)}\r\n                                disabled={loading}\r\n                                className={`border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                                  loading ? 'opacity-50 cursor-not-allowed' : 'hover:border-gray-400'\r\n                                } ${\r\n                                  changedRoles[usuario.id] ? 'border-yellow-400 bg-yellow-50' : ''\r\n                                }`}\r\n                              >\r\n                                {rolesDisponibles.map(rol => (\r\n                                  <option key={rol} value={rol}>\r\n                                    {rol.charAt(0).toUpperCase() + rol.slice(1).replace('_', ' ')}\r\n                                  </option>\r\n                                ))}\r\n                              </select>\r\n                              \r\n                              {changedRoles[usuario.id] && (\r\n                                <button\r\n                                  onClick={() => updateUserRole(usuario.id, changedRoles[usuario.id])}\r\n                                  disabled={loading}\r\n                                  className=\"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50\"\r\n                                  title=\"Guardar este cambio\"\r\n                                >\r\n                                  <Check className=\"h-3 w-3\" />\r\n                                </button>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n\r\n                  {usuarios.length === 0 && (\r\n                    <div className=\"text-center py-12\">\r\n                      <Users className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n                      <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No hay usuarios</h3>\r\n                      <p className=\"mt-1 text-sm text-gray-500\">No se encontraron usuarios en el sistema.</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Tab Permisos */}\r\n            {activeTab === 'permisos' && (\r\n              <div>\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                  <h2 className=\"text-xl font-semibold text-gray-900\">\r\n                    Configuraci√≥n de Permisos por Rol\r\n                  </h2>\r\n                  {selectedRol && (\r\n                    <button\r\n                      onClick={updatePermisos}\r\n                      className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\"\r\n                    >\r\n                      <Save className=\"mr-2 h-4 w-4\" />\r\n                      Guardar Cambios\r\n                    </button>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                  {/* Lista de Roles */}\r\n                  <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                    <h3 className=\"text-sm font-medium text-gray-900 mb-4\">\r\n                      Seleccionar Rol\r\n                    </h3>\r\n                    <div className=\"space-y-2\">\r\n                      {roles.map((rol) => (\r\n                        <button\r\n                          key={rol.RolID}\r\n                          onClick={() => selectRol(rol.RolID, rol.NombreRol)}\r\n                          className={`w-full text-left px-4 py-3 rounded-md text-sm font-medium transition-colors ${\r\n                            selectedRol === rol.RolID\r\n                              ? 'bg-blue-100 text-blue-700 border border-blue-300 shadow-sm'\r\n                              : 'bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 hover:border-gray-300'\r\n                          }`}\r\n                        >\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <span>{rol.NombreRol}</span>\r\n                            {selectedRol === rol.RolID && (\r\n                              <Check className=\"h-4 w-4 text-blue-600\" />\r\n                            )}\r\n                          </div>\r\n                          {rol.Descripcion && (\r\n                            <p className=\"text-xs text-gray-500 mt-1\">{rol.Descripcion}</p>\r\n                          )}\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Tabla de Permisos */}\r\n                  <div className=\"lg:col-span-2\">\r\n                    {selectedRol ? (\r\n                      <div>\r\n                        <h3 className=\"text-sm font-medium text-gray-900 mb-4\">\r\n                          Permisos para: <span className=\"text-blue-600\">{selectedRolName}</span>\r\n                        </h3>\r\n                        {loading ? (\r\n                          <div className=\"text-center py-8\">\r\n                            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2\"></div>\r\n                            <p className=\"text-gray-600\">Cargando permisos...</p>\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"overflow-x-auto\">\r\n                            <table className=\"min-w-full divide-y divide-gray-200\">\r\n                              <thead className=\"bg-gray-50\">\r\n                                <tr>\r\n                                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    M√≥dulo\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <EyeOff className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Visible</span>\r\n                                    </div>\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <Eye className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Ver</span>\r\n                                    </div>\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <Plus className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Crear</span>\r\n                                    </div>\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <Edit className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Editar</span>\r\n                                    </div>\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <Trash2 className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Eliminar</span>\r\n                                    </div>\r\n                                  </th>\r\n                                </tr>\r\n                              </thead>\r\n                              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                                {permisos.map((permiso) => (\r\n                                  <tr key={permiso.PermisoID} className={`hover:bg-gray-50 transition-colors ${\r\n                                    !permiso.EstaVisible ? 'bg-gray-100 opacity-60' : ''\r\n                                  }`}>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap\">\r\n                                      <div className=\"text-sm font-medium text-gray-900 flex items-center\">\r\n                                        <span className={`${!permiso.EstaVisible ? 'line-through text-gray-500' : ''}`}>\r\n                                          {permiso.NombreModulo}\r\n                                        </span>\r\n                                        {!permiso.EstaVisible && (\r\n                                          <span className=\"ml-2 text-xs bg-red-100 text-red-600 px-2 py-1 rounded\">\r\n                                            OCULTO\r\n                                          </span>\r\n                                        )}\r\n                                      </div>\r\n                                      <div className={`text-sm ${!permiso.EstaVisible ? 'text-gray-400 line-through' : 'text-gray-500'}`}>\r\n                                        {permiso.DescripcionModulo}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => toggleVisibilidad(permiso.PermisoID)}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          permiso.EstaVisible \r\n                                            ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                            : 'text-red-600 bg-red-100 hover:bg-red-200'\r\n                                        }`}\r\n                                        title={permiso.EstaVisible ? 'M√≥dulo visible - Click para ocultar' : 'M√≥dulo oculto - Click para mostrar'}\r\n                                      >\r\n                                        {permiso.EstaVisible ? <Eye className=\"h-4 w-4\" /> : <EyeOff className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => togglePermiso(permiso.PermisoID, 'PuedeVer')}\r\n                                        disabled={!permiso.EstaVisible}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          !permiso.EstaVisible \r\n                                            ? 'text-gray-300 bg-gray-100 cursor-not-allowed'\r\n                                            : permiso.PuedeVer \r\n                                              ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                              : 'text-gray-400 bg-gray-100 hover:bg-gray-200'\r\n                                        }`}\r\n                                        title={!permiso.EstaVisible ? 'M√≥dulo oculto' : permiso.PuedeVer ? 'Permitido' : 'No permitido'}\r\n                                      >\r\n                                        {permiso.PuedeVer ? <Check className=\"h-4 w-4\" /> : <X className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => togglePermiso(permiso.PermisoID, 'PuedeCrear')}\r\n                                        disabled={!permiso.EstaVisible}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          !permiso.EstaVisible \r\n                                            ? 'text-gray-300 bg-gray-100 cursor-not-allowed'\r\n                                            : permiso.PuedeCrear \r\n                                              ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                              : 'text-gray-400 bg-gray-100 hover:bg-gray-200'\r\n                                        }`}\r\n                                        title={!permiso.EstaVisible ? 'M√≥dulo oculto' : permiso.PuedeCrear ? 'Permitido' : 'No permitido'}\r\n                                      >\r\n                                        {permiso.PuedeCrear ? <Check className=\"h-4 w-4\" /> : <X className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => togglePermiso(permiso.PermisoID, 'PuedeEditar')}\r\n                                        disabled={!permiso.EstaVisible}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          !permiso.EstaVisible \r\n                                            ? 'text-gray-300 bg-gray-100 cursor-not-allowed'\r\n                                            : permiso.PuedeEditar \r\n                                              ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                              : 'text-gray-400 bg-gray-100 hover:bg-gray-200'\r\n                                        }`}\r\n                                        title={!permiso.EstaVisible ? 'M√≥dulo oculto' : permiso.PuedeEditar ? 'Permitido' : 'No permitido'}\r\n                                      >\r\n                                        {permiso.PuedeEditar ? <Check className=\"h-4 w-4\" /> : <X className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => togglePermiso(permiso.PermisoID, 'PuedeEliminar')}\r\n                                        disabled={!permiso.EstaVisible}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          !permiso.EstaVisible \r\n                                            ? 'text-gray-300 bg-gray-100 cursor-not-allowed'\r\n                                            : permiso.PuedeEliminar \r\n                                              ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                              : 'text-gray-400 bg-gray-100 hover:bg-gray-200'\r\n                                        }`}\r\n                                        title={!permiso.EstaVisible ? 'M√≥dulo oculto' : permiso.PuedeEliminar ? 'Permitido' : 'No permitido'}\r\n                                      >\r\n                                        {permiso.PuedeEliminar ? <Check className=\"h-4 w-4\" /> : <X className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                  </tr>\r\n                                ))}\r\n                              </tbody>\r\n                            </table>\r\n\r\n                            {permisos.length === 0 && (\r\n                              <div className=\"text-center py-8\">\r\n                                <Settings className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n                                <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Cargando m√≥dulos del sistema</h3>\r\n                                <p className=\"mt-1 text-sm text-gray-500\">Preparando todos los m√≥dulos para este rol...</p>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"text-center py-16 text-gray-500\">\r\n                        <Shield className=\"mx-auto h-16 w-16 text-gray-300 mb-4\" />\r\n                        <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Selecciona un rol</h3>\r\n                        <p className=\"text-sm\">Elige un rol de la lista para ver y editar sus permisos</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Tab Informaci√≥n */}\r\n            {activeTab === 'info' && (\r\n              <div className=\"space-y-8\">\r\n                {/* M√≥dulos del Sistema */}\r\n                <section>\r\n                  <div className=\"flex items-center mb-4\">\r\n                    <Settings className=\"h-5 w-5 text-purple-600 mr-2\" />\r\n                    <h2 className=\"text-lg font-semibold text-gray-900\">\r\n                      M√≥dulos del Sistema ({MODULOS_SISTEMA.length})\r\n                    </h2>\r\n                  </div>\r\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\r\n                    <div className=\"flex items-center\">\r\n                      <AlertCircle className=\"h-5 w-5 text-blue-600 mr-2\" />\r\n                      <span className=\"text-blue-800 font-medium\">Informaci√≥n del Sistema</span>\r\n                    </div>\r\n                    <p className=\"text-blue-700 mt-2 text-sm\">\r\n                      Todos los roles tienen acceso a estos m√≥dulos por defecto. Como administrador, puedes controlar la visibilidad y permisos espec√≠ficos de cada m√≥dulo para cada rol.\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {MODULOS_SISTEMA.map((modulo) => (\r\n                      <div key={modulo.id} className=\"bg-gradient-to-r from-purple-50 to-purple-100 border border-purple-200 rounded-lg p-4\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <span className=\"font-semibold text-purple-800\">\r\n                            {modulo.nombre}\r\n                          </span>\r\n                          <span className=\"text-xs text-purple-600 bg-purple-200 px-2 py-1 rounded\">\r\n                            Sistema\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-sm text-purple-700\">{modulo.descripcion}</p>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </section>\r\n\r\n                {/* Roles */}\r\n                <section>\r\n                  <div className=\"flex items-center mb-4\">\r\n                    <Shield className=\"h-5 w-5 text-blue-600 mr-2\" />\r\n                    <h2 className=\"text-lg font-semibold text-gray-900\">\r\n                      Roles del Sistema ({roles.length})\r\n                    </h2>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {roles.map((rol) => (\r\n                      <div key={rol.RolID} className=\"bg-gradient-to-r from-green-50 to-green-100 border border-green-200 rounded-lg p-4\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <span className=\"font-semibold text-green-800\">\r\n                            {rol.NombreRol}\r\n                          </span>\r\n                          <span className=\"text-xs text-green-600 bg-green-200 px-2 py-1 rounded\">\r\n                            ID: {rol.RolID}\r\n                          </span>\r\n                        </div>\r\n                        {rol.Descripcion && (\r\n                          <p className=\"text-sm text-green-700\">{rol.Descripcion}</p>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </section>\r\n\r\n                {/* Estad√≠sticas del Sistema */}\r\n                <section>\r\n                  <div className=\"flex items-center mb-4\">\r\n                    <Eye className=\"h-5 w-5 text-indigo-600 mr-2\" />\r\n                    <h2 className=\"text-lg font-semibold text-gray-900\">\r\n                      Estad√≠sticas del Sistema\r\n                    </h2>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-6\">\r\n                    <div className=\"bg-white border border-gray-200 rounded-lg p-6 text-center\">\r\n                      <div className=\"text-3xl font-bold text-blue-600\">{usuarios.length}</div>\r\n                      <div className=\"text-sm text-gray-500 mt-1\">Usuarios Totales</div>\r\n                    </div>\r\n                    <div className=\"bg-white border border-gray-200 rounded-lg p-6 text-center\">\r\n                      <div className=\"text-3xl font-bold text-green-600\">{roles.length}</div>\r\n                      <div className=\"text-sm text-gray-500 mt-1\">Roles Configurados</div>\r\n                    </div>\r\n                    <div className=\"bg-white border border-gray-200 rounded-lg p-6 text-center\">\r\n                      <div className=\"text-3xl font-bold text-purple-600\">{MODULOS_SISTEMA.length}</div>\r\n                      <div className=\"text-sm text-gray-500 mt-1\">M√≥dulos del Sistema</div>\r\n                    </div>\r\n                  </div>\r\n                </section>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Modal: Crear Usuario para Empleado Existente */}\r\n        {showCreateUserModal && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\r\n              <div className=\"bg-blue-600 text-white px-6 py-4 rounded-t-lg\">\r\n                <h3 className=\"text-lg font-semibold flex items-center\">\r\n                  <Plus className=\"mr-2 h-5 w-5\" />\r\n                  Crear Usuario para Empleado Existente\r\n                </h3>\r\n              </div>\r\n              \r\n              <form onSubmit={crearUsuarioParaEmpleado} className=\"p-6 space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Seleccionar Empleado *\r\n                  </label>\r\n                  <select\r\n                    value={nuevoUsuario.empleadoId}\r\n                    onChange={(e) => setNuevoUsuario({...nuevoUsuario, empleadoId: e.target.value})}\r\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    required\r\n                  >\r\n                    <option value=\"\">-- Seleccione un empleado --</option>\r\n                    {empleadosDisponibles.map(emp => (\r\n                      <option key={emp.EMPLEADO_ID} value={emp.EMPLEADO_ID}>\r\n                        {emp.NOMBRE} {emp.APELLIDO} - {emp.CEDULA}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                  <p className=\"text-xs text-gray-500 mt-1\">\r\n                    Solo se muestran empleados sin usuario asignado\r\n                  </p>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Nombre de Usuario *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={nuevoUsuario.username}\r\n                    onChange={(e) => setNuevoUsuario({...nuevoUsuario, username: e.target.value})}\r\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"usuario123\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Email *\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    value={nuevoUsuario.email}\r\n                    onChange={(e) => setNuevoUsuario({...nuevoUsuario, email: e.target.value})}\r\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"usuario@empresa.com\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Contrase√±a *\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={nuevoUsuario.password}\r\n                    onChange={(e) => setNuevoUsuario({...nuevoUsuario, password: e.target.value})}\r\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"M√≠nimo 6 caracteres\"\r\n                    minLength=\"6\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Confirmar Contrase√±a *\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={nuevoUsuario.confirmPassword}\r\n                    onChange={(e) => setNuevoUsuario({...nuevoUsuario, confirmPassword: e.target.value})}\r\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"Repita la contrase√±a\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Rol *\r\n                  </label>\r\n                  <select\r\n                    value={nuevoUsuario.rol}\r\n                    onChange={(e) => setNuevoUsuario({...nuevoUsuario, rol: e.target.value})}\r\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    required\r\n                  >\r\n                    {rolesDisponibles.map(rol => (\r\n                      <option key={rol} value={rol}>\r\n                        {rol.charAt(0).toUpperCase() + rol.slice(1).replace('_', ' ')}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 pt-4\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setShowCreateUserModal(false);\r\n                      setNuevoUsuario({\r\n                        empleadoId: '',\r\n                        username: '',\r\n                        email: '',\r\n                        password: '',\r\n                        confirmPassword: '',\r\n                        rol: 'colaborador'\r\n                      });\r\n                    }}\r\n                    className=\"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={loading}\r\n                    className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  >\r\n                    {loading ? 'Creando...' : 'Crear Usuario'}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Modal: Crear Empleado Completo */}\r\n        {showCreateEmpleadoModal && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\r\n              <div className=\"bg-green-600 text-white px-6 py-4 rounded-t-lg sticky top-0 z-10\">\r\n                <h3 className=\"text-lg font-semibold flex items-center\">\r\n                  <Users className=\"mr-2 h-5 w-5\" />\r\n                  Crear Nuevo Empleado + Usuario\r\n                </h3>\r\n              </div>\r\n              \r\n              <form onSubmit={crearEmpleadoConUsuario} className=\"p-6 space-y-6\">\r\n                <div>\r\n                  <h4 className=\"text-md font-semibold text-gray-900 mb-3 border-b pb-2\">\r\n                    Datos Personales del Empleado\r\n                  </h4>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Nombre *</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={nuevoEmpleado.nombre}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, nombre: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Apellido *</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={nuevoEmpleado.apellido}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, apellido: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">C√©dula *</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={nuevoEmpleado.cedula}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, cedula: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        placeholder=\"000-0000000-0\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email *</label>\r\n                      <input\r\n                        type=\"email\"\r\n                        value={nuevoEmpleado.email}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, email: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Tel√©fono</label>\r\n                      <input\r\n                        type=\"tel\"\r\n                        value={nuevoEmpleado.telefono}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, telefono: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Fecha Nacimiento *</label>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={nuevoEmpleado.fechaNacimiento}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, fechaNacimiento: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">G√©nero *</label>\r\n                      <select\r\n                        value={nuevoEmpleado.genero}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, genero: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      >\r\n                        <option value=\"\">Seleccione</option>\r\n                        <option value=\"Masculino\">Masculino</option>\r\n                        <option value=\"Femenino\">Femenino</option>\r\n                      </select>\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Estado Civil</label>\r\n                      <select\r\n                        value={nuevoEmpleado.estadoCivil}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, estadoCivil: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                      >\r\n                        <option value=\"\">Seleccione</option>\r\n                        <option value=\"Soltero\">Soltero/a</option>\r\n                        <option value=\"Casado\">Casado/a</option>\r\n                        <option value=\"Divorciado\">Divorciado/a</option>\r\n                        <option value=\"Viudo\">Viudo/a</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <h4 className=\"text-md font-semibold text-gray-900 mb-3 border-b pb-2\">\r\n                    Credenciales de Acceso\r\n                  </h4>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Nombre de Usuario *</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={nuevoEmpleado.username}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, username: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Rol *</label>\r\n                      <select\r\n                        value={nuevoEmpleado.rol}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, rol: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      >\r\n                        {rolesDisponibles.map(rol => (\r\n                          <option key={rol} value={rol}>\r\n                            {rol.charAt(0).toUpperCase() + rol.slice(1).replace('_', ' ')}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Contrase√±a *</label>\r\n                      <input\r\n                        type=\"password\"\r\n                        value={nuevoEmpleado.password}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, password: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        minLength=\"6\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Confirmar Contrase√±a *</label>\r\n                      <input\r\n                        type=\"password\"\r\n                        value={nuevoEmpleado.confirmPassword}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, confirmPassword: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 pt-4 sticky bottom-0 bg-white border-t\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowCreateEmpleadoModal(false)}\r\n                    className=\"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={loading}\r\n                    className=\"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50\"\r\n                  >\r\n                    {loading ? 'Creando...' : 'Crear Empleado y Usuario'}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPermissions;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
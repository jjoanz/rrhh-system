{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Users,Settings,Shield,Check,X,Save,AlertCircle,Eye,Plus,Edit,Trash2,EyeOff}from'lucide-react';import{MODULOS_SISTEMA}from'../../api/accionesPersonalApi';// 🔑 URLs de API actualizadas\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_URL||'http://192.168.0.239:5000/api';const AUTH_API_URL=`${API_BASE_URL}/auth`;const ADMIN_API_URL=`${API_BASE_URL}/admin`;// ✅ Función para obtener el token\nconst getToken=()=>{return localStorage.getItem('token')||localStorage.getItem('rrhh_token');};const AdminPermissions=()=>{const[activeTab,setActiveTab]=useState('usuarios');const[usuarios,setUsuarios]=useState([]);const[roles,setRoles]=useState([]);const[selectedRol,setSelectedRol]=useState(null);const[selectedRolName,setSelectedRolName]=useState('');const[permisos,setPermisos]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[message,setMessage]=useState({type:'',text:''});const[changedRoles,setChangedRoles]=useState({});// ⬇️ omponente AdminPermissions nuevo user ⬇️\nconst[showCreateUserModal,setShowCreateUserModal]=useState(false);const[showCreateEmpleadoModal,setShowCreateEmpleadoModal]=useState(false);const[empleadosDisponibles,setEmpleadosDisponibles]=useState([]);const[nuevoUsuario,setNuevoUsuario]=useState({empleadoId:'',username:'',email:'',password:'',confirmPassword:'',rol:'colaborador'});const[nuevoEmpleado,setNuevoEmpleado]=useState({nombre:'',apellido:'',cedula:'',email:'',telefono:'',direccion:'',ciudad:'',provincia:'',fechaNacimiento:'',genero:'',estadoCivil:'',departamentoId:'',puestoId:'',fechaIngreso:new Date().toISOString().split('T')[0],salario:'',tipoContrato:'Indefinido',username:'',password:'',confirmPassword:'',rol:'colaborador'});// Lista de roles disponibles\nconst rolesDisponibles=['colaborador','gerente','director','rrhh','gerente_rrhh','director_rrhh','admin'];// --- Función helper para manejar errores de API ---\nconst handleApiError=(error,response)=>{console.error('Error de API:',{error,status:response===null||response===void 0?void 0:response.status});if((response===null||response===void 0?void 0:response.status)===401){setError('Sesión expirada. Por favor, inicia sesión nuevamente.');}else if((response===null||response===void 0?void 0:response.status)===403){setError('No tienes permisos para realizar esta acción.');}else if((response===null||response===void 0?void 0:response.status)===404){setError('Endpoint no encontrado. Verifica la configuración del servidor.');}else{setError(error.message||'Error interno del servidor');}};// Nueva función para cargar empleados sin usuario\nconst loadEmpleadosSinUsuario=async()=>{try{const res=await fetch(`${API_BASE_URL}/empleados`,{headers:{'Authorization':`Bearer ${getToken()}`}});if(res.ok){const data=await res.json();const empleados=data.empleados||data;const empleadosConUsuario=usuarios.map(u=>u.empleadoId);const sinUsuario=empleados.filter(emp=>!empleadosConUsuario.includes(emp.EMPLEADO_ID));setEmpleadosDisponibles(sinUsuario);}}catch(err){console.error('Error cargando empleados:',err);}};// Función para crear usuario para empleado existente\nconst crearUsuarioParaEmpleado=async e=>{e.preventDefault();if(!nuevoUsuario.empleadoId){setMessage({type:'error',text:'Debe seleccionar un empleado'});return;}if(!nuevoUsuario.username||!nuevoUsuario.email||!nuevoUsuario.password){setMessage({type:'error',text:'Complete todos los campos requeridos'});return;}if(nuevoUsuario.password!==nuevoUsuario.confirmPassword){setMessage({type:'error',text:'Las contraseñas no coinciden'});return;}if(nuevoUsuario.password.length<6){setMessage({type:'error',text:'La contraseña debe tener al menos 6 caracteres'});return;}setLoading(true);try{const res=await fetch(`${AUTH_API_URL}/register`,{method:'POST',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'},body:JSON.stringify({username:nuevoUsuario.username,email:nuevoUsuario.email,password:nuevoUsuario.password,role:nuevoUsuario.rol,empleadoId:parseInt(nuevoUsuario.empleadoId)})});if(!res.ok){const errorData=await res.json();throw new Error(errorData.error||'Error al crear usuario');}setMessage({type:'success',text:'Usuario creado exitosamente'});setShowCreateUserModal(false);setNuevoUsuario({empleadoId:'',username:'',email:'',password:'',confirmPassword:'',rol:'colaborador'});await loadUsuarios();}catch(err){setMessage({type:'error',text:err.message});}finally{setLoading(false);}};// Función para crear empleado completo con usuario\nconst crearEmpleadoConUsuario=async e=>{e.preventDefault();if(!nuevoEmpleado.nombre||!nuevoEmpleado.apellido||!nuevoEmpleado.cedula){setMessage({type:'error',text:'Complete todos los campos requeridos del empleado'});return;}if(!nuevoEmpleado.username||!nuevoEmpleado.password){setMessage({type:'error',text:'Complete los datos del usuario'});return;}if(nuevoEmpleado.password!==nuevoEmpleado.confirmPassword){setMessage({type:'error',text:'Las contraseñas no coinciden'});return;}if(nuevoEmpleado.password.length<6){setMessage({type:'error',text:'La contraseña debe tener al menos 6 caracteres'});return;}setLoading(true);try{// 1. Crear el empleado\nconst resEmpleado=await fetch(`${API_BASE_URL}/empleados`,{method:'POST',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'},body:JSON.stringify({nombre:nuevoEmpleado.nombre,apellido:nuevoEmpleado.apellido,cedula:nuevoEmpleado.cedula,email:nuevoEmpleado.email,telefono:nuevoEmpleado.telefono,direccion:nuevoEmpleado.direccion,ciudad:nuevoEmpleado.ciudad,provincia:nuevoEmpleado.provincia,fechaNacimiento:nuevoEmpleado.fechaNacimiento,genero:nuevoEmpleado.genero,estadoCivil:nuevoEmpleado.estadoCivil,departamentoId:parseInt(nuevoEmpleado.departamentoId)||null,puestoId:parseInt(nuevoEmpleado.puestoId)||null,fechaIngreso:nuevoEmpleado.fechaIngreso,salario:parseFloat(nuevoEmpleado.salario)||0,tipoContrato:nuevoEmpleado.tipoContrato,estado:1})});if(!resEmpleado.ok){const errorData=await resEmpleado.json();throw new Error(errorData.error||'Error al crear empleado');}const dataEmpleado=await resEmpleado.json();const empleadoId=dataEmpleado.empleadoId||dataEmpleado.id;// 2. Crear el usuario asociado\nconst resUsuario=await fetch(`${AUTH_API_URL}/register`,{method:'POST',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'},body:JSON.stringify({username:nuevoEmpleado.username,email:nuevoEmpleado.email,password:nuevoEmpleado.password,role:nuevoEmpleado.rol,empleadoId:empleadoId})});if(!resUsuario.ok){const errorData=await resUsuario.json();throw new Error(errorData.error||'Empleado creado pero error al crear usuario');}setMessage({type:'success',text:'Empleado y usuario creados exitosamente'});setShowCreateEmpleadoModal(false);setNuevoEmpleado({nombre:'',apellido:'',cedula:'',email:'',telefono:'',direccion:'',ciudad:'',provincia:'',fechaNacimiento:'',genero:'',estadoCivil:'',departamentoId:'',puestoId:'',fechaIngreso:new Date().toISOString().split('T')[0],salario:'',tipoContrato:'Indefinido',username:'',password:'',confirmPassword:'',rol:'colaborador'});await loadUsuarios();}catch(err){setMessage({type:'error',text:err.message});}finally{setLoading(false);}};// --- Debug de token ---\nconst debugToken=()=>{const token=getToken();console.log('🔐 Token encontrado:',token?'SÍ':'NO');if(token){try{const payload=JSON.parse(atob(token.split('.')[1]));console.log('📋 Payload del token:',payload);}catch(e){console.error('❌ Token malformado:',e);}}};// --- Inicializar permisos para un rol ---\nconst initializePermisosForRole=()=>{return MODULOS_SISTEMA.map((modulo,index)=>({PermisoID:`temp_${index}`,ModuloID:modulo.id,NombreModulo:modulo.nombre,DescripcionModulo:modulo.descripcion,EstaVisible:true,PuedeVer:false,PuedeCrear:false,PuedeEditar:false,PuedeEliminar:false}));};// --- Cargar usuarios (CORREGIDO) ---\nconst loadUsuarios=async()=>{setLoading(true);setError(null);debugToken();// Debug del token\ntry{// Intentar múltiples endpoints hasta encontrar uno que funcione\nconst endpoints=[`${AUTH_API_URL}/users`,`${API_BASE_URL}/usuarios`,`${ADMIN_API_URL}/users`,`${API_BASE_URL}/admin/usuarios`];let res=null;let usedEndpoint=null;for(const endpoint of endpoints){console.log('📡 Intentando endpoint:',endpoint);try{res=await fetch(endpoint,{method:'GET',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'}});if(res.ok){usedEndpoint=endpoint;console.log('✅ Endpoint funciona:',endpoint);break;}else{console.log(`❌ Endpoint ${endpoint} falló con status:`,res.status);}}catch(err){console.log(`💥 Error en endpoint ${endpoint}:`,err.message);continue;}}if(!res||!res.ok){const errorText=res?await res.text():'Ningún endpoint funcionó';console.error('❌ Todos los endpoints fallaron:',errorText);handleApiError(new Error(`No se pudo conectar: ${errorText}`),res);return;}console.log('📊 Usando endpoint exitoso:',usedEndpoint);console.log('📊 Respuesta del servidor:',{status:res.status,statusText:res.statusText,ok:res.ok});const data=await res.json();console.log('📋 Datos recibidos:',data);// Mapear la respuesta a la estructura esperada\nlet usuariosData=[];if(data.usuarios){// Si viene en formato { usuarios: [...] } - TU CASO\nusuariosData=data.usuarios;console.log('🎯 Usando data.usuarios:',usuariosData.length);}else if(data.users){// Si viene en formato { users: [...] }\nusuariosData=data.users;console.log('🎯 Usando data.users:',usuariosData.length);}else if(Array.isArray(data)){// Si viene directamente como array\nusuariosData=data;console.log('🎯 Usando data directamente:',usuariosData.length);}else if(data.recordset){// Si viene en formato de recordset de SQL Server\nusuariosData=data.recordset;console.log('🎯 Usando data.recordset:',usuariosData.length);}console.log('📊 usuariosData antes de normalizar:',usuariosData);// Normalizar la estructura de datos\nconst usuariosNormalizados=usuariosData.map(user=>({id:user.UsuarioID||user.id,username:user.Username||user.username,email:user.Email||user.email,rol:user.Rol||user.role||user.rol,estado:user.Estado||user.estado||1,empleadoId:user.EmpleadoID||user.empleadoId}));console.log('👥 Usuarios normalizados:',usuariosNormalizados);// Obtener nombres completos de empleados\nconst usuariosConNombres=await Promise.all(usuariosNormalizados.map(async usuario=>{if(usuario.empleadoId){try{const resEmpleado=await fetch(`${API_BASE_URL}/empleados/${usuario.empleadoId}`,{headers:{'Authorization':`Bearer ${getToken()}`}});if(resEmpleado.ok){const empleadoData=await resEmpleado.json();const empleado=empleadoData.empleado||empleadoData;return{...usuario,nombreCompleto:`${empleado.NOMBRE} ${empleado.APELLIDO}`.trim(),nombre:empleado.NOMBRE,apellido:empleado.APELLIDO};}}catch(err){console.error(`Error obteniendo empleado ${usuario.empleadoId}:`,err);}}return usuario;}));setUsuarios(usuariosConNombres);}catch(err){console.error('💥 Error cargando usuarios:',err);handleApiError(err);}finally{setLoading(false);}};// --- Cargar roles ---\nconst loadRoles=async()=>{setLoading(true);setError(null);try{console.log('📡 Cargando roles desde:',`${ADMIN_API_URL}/roles`);const res=await fetch(`${ADMIN_API_URL}/roles`,{headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'}});console.log('📊 Respuesta roles:',{status:res.status,ok:res.ok});// Si no existe el endpoint, usar roles por defecto\nif(!res.ok&&res.status===404){console.log('⚠️ Endpoint de roles no encontrado, usando roles por defecto');const defaultRoles=rolesDisponibles.map((rol,index)=>({RolID:index+1,NombreRol:rol,Descripcion:`Rol de ${rol.replace('_',' ')}`}));setRoles(defaultRoles);return;}if(!res.ok){handleApiError(new Error(`Error ${res.status}: ${res.statusText}`),res);return;}const data=await res.json();console.log('📋 Datos de roles:',data);let rolesData=data.roles||data.recordset||data;setRoles(rolesData);}catch(err){console.error('💥 Error cargando roles:',err);// Usar roles por defecto en caso de error\nconst defaultRoles=rolesDisponibles.map((rol,index)=>({RolID:index+1,NombreRol:rol,Descripcion:`Rol de ${rol.replace('_',' ')}`}));setRoles(defaultRoles);}finally{setLoading(false);}};// --- Cargar permisos de un rol específico ---\nconst loadPermisos=async rolId=>{if(!rolId)return;setLoading(true);try{console.log('📡 Cargando permisos para rol:',rolId);const res=await fetch(`${ADMIN_API_URL}/permisos/${rolId}`,{headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'}});console.log('📊 Respuesta permisos:',{status:res.status,ok:res.ok});if(!res.ok&&res.status!==404){handleApiError(new Error(`Error ${res.status}: ${res.statusText}`),res);return;}let data={permisos:[]};if(res.ok){data=await res.json();console.log('📋 Permisos recibidos:',data);}// Si no hay permisos existentes, inicializar con todos los módulos\nif(!data.permisos||data.permisos.length===0){console.log('⚠️ No hay permisos, inicializando por defecto');setPermisos(initializePermisosForRole());}else{// Combinar permisos existentes con módulos del sistema\nconst permisosExistentes=data.permisos;const permisosCompletos=MODULOS_SISTEMA.map((modulo,index)=>{const permisoExistente=permisosExistentes.find(p=>p.ModuloID===modulo.id||p.NombreModulo===modulo.nombre);return{PermisoID:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PermisoID)||`temp_${index}`,ModuloID:modulo.id,NombreModulo:modulo.nombre,DescripcionModulo:modulo.descripcion,EstaVisible:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.EstaVisible)!==false,PuedeVer:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PuedeVer)||false,PuedeCrear:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PuedeCrear)||false,PuedeEditar:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PuedeEditar)||false,PuedeEliminar:(permisoExistente===null||permisoExistente===void 0?void 0:permisoExistente.PuedeEliminar)||false};});setPermisos(permisosCompletos);}}catch(err){console.error('💥 Error cargando permisos:',err);setPermisos(initializePermisosForRole());}finally{setLoading(false);}};// --- Manejar cambio temporal de rol ---\nconst handleRoleChange=(userId,nuevoRol)=>{setChangedRoles(prev=>({...prev,[userId]:nuevoRol}));};// --- Actualizar rol de usuario ---\nconst updateUserRole=async(userId,nuevoRol)=>{console.log('🔄 Actualizando rol:',{userId,nuevoRol});try{const usuario=usuarios.find(u=>u.id===userId);if(!usuario){throw new Error('Usuario no encontrado');}const res=await fetch(`${AUTH_API_URL}/users/${userId}`,{method:'PUT',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'},body:JSON.stringify({username:usuario.username,email:usuario.email,role:nuevoRol,estado:usuario.estado})});if(!res.ok){const errorText=await res.text();throw new Error(`Error ${res.status}: ${errorText}`);}setMessage({type:'success',text:'Rol actualizado correctamente'});// Limpiar cambios pendientes para este usuario\nsetChangedRoles(prev=>{const newChanges={...prev};delete newChanges[userId];return newChanges;});// Recargar usuarios\nawait loadUsuarios();}catch(err){console.error('💥 Error actualizando rol:',err);setMessage({type:'error',text:err.message});}};// --- Guardar todos los cambios de roles ---\nconst saveAllRoleChanges=async()=>{const changeCount=Object.keys(changedRoles).length;if(changeCount===0){setMessage({type:'error',text:'No hay cambios pendientes para guardar'});return;}setLoading(true);let successCount=0;let errorCount=0;try{for(const[userId,nuevoRol]of Object.entries(changedRoles)){try{await updateUserRole(parseInt(userId),nuevoRol);successCount++;}catch(error){errorCount++;console.error(`Error actualizando usuario ${userId}:`,error);}}if(errorCount===0){setMessage({type:'success',text:`Se actualizaron ${successCount} roles correctamente`});setChangedRoles({});}else{setMessage({type:'error',text:`${successCount} exitosos, ${errorCount} fallaron`});}}finally{setLoading(false);}};// --- Cancelar cambios ---\nconst cancelRoleChanges=()=>{setChangedRoles({});setMessage({type:'success',text:'Cambios cancelados'});};// --- Obtener el rol actual (con cambios pendientes) ---\nconst getCurrentRole=usuario=>{return changedRoles[usuario.id]||usuario.rol;};// --- Actualizar permisos ---\nconst updatePermisos=async()=>{if(!selectedRol)return;try{const permisosData=permisos.map(p=>({moduloId:p.ModuloID,nombreModulo:p.NombreModulo,descripcionModulo:p.DescripcionModulo,estaVisible:p.EstaVisible,puedeVer:p.PuedeVer,puedeCrear:p.PuedeCrear,puedeEditar:p.PuedeEditar,puedeEliminar:p.PuedeEliminar}));const res=await fetch(`${ADMIN_API_URL}/permisos/${selectedRol}`,{method:'PUT',headers:{'Authorization':`Bearer ${getToken()}`,'Content-Type':'application/json'},body:JSON.stringify({permisos:permisosData})});if(!res.ok){const errorText=await res.text();throw new Error(`Error ${res.status}: ${errorText}`);}setMessage({type:'success',text:'Permisos actualizados correctamente'});}catch(err){console.error('💥 Error actualizando permisos:',err);setMessage({type:'error',text:err.message});}};// --- Cambiar permiso específico ---\nconst togglePermiso=(permisoId,campo)=>{setPermisos(prev=>prev.map(p=>p.PermisoID===permisoId?{...p,[campo]:!p[campo]}:p));};// --- Toggle visibilidad del módulo ---\nconst toggleVisibilidad=permisoId=>{setPermisos(prev=>prev.map(p=>p.PermisoID===permisoId?{...p,EstaVisible:!p.EstaVisible,PuedeVer:!p.EstaVisible?p.PuedeVer:false,PuedeCrear:!p.EstaVisible?p.PuedeCrear:false,PuedeEditar:!p.EstaVisible?p.PuedeEditar:false,PuedeEliminar:!p.EstaVisible?p.PuedeEliminar:false}:p));};// --- Seleccionar rol para editar permisos ---\nconst selectRol=(rolId,rolName)=>{setSelectedRol(rolId);setSelectedRolName(rolName);loadPermisos(rolId);};// --- Cargar datos al inicio ---\nuseEffect(()=>{if(activeTab==='usuarios'){loadUsuarios();loadEmpleadosSinUsuario();// ⬅️ AGREGAR ESTA LÍNEA\n}else if(activeTab==='permisos'){loadRoles();}},[activeTab]);// Limpiar mensajes después de 5 segundos\nuseEffect(()=>{if(message.text){const timer=setTimeout(()=>{setMessage({type:'',text:''});},5000);return()=>clearTimeout(timer);}},[message]);if(loading&&usuarios.length===0&&roles.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Cargando...\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 p-4 sm:p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-b border-gray-200 px-6 py-4\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(Shield,{className:\"mr-3 h-7 w-7 text-blue-600\"}),\"Gesti\\xF3n de Roles y Permisos\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Administra usuarios, roles y permisos del sistema\"})]}),message.text&&/*#__PURE__*/_jsxs(\"div\",{className:`mx-6 mt-4 p-4 rounded-md flex items-center ${message.type==='success'?'bg-green-50 border border-green-200 text-green-800':'bg-red-50 border border-red-200 text-red-800'}`,children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"mr-2 h-5 w-5\"}),message.text]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mx-6 mt-4 p-4 rounded-md bg-red-50 border border-red-200 text-red-800 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"mr-2 h-5 w-5\"}),\"Error: \",error]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"flex px-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('usuarios'),className:`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${activeTab==='usuarios'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,children:[/*#__PURE__*/_jsx(Users,{className:\"inline-block mr-2 h-4 w-4\"}),\"Gesti\\xF3n de Usuarios\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('permisos'),className:`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${activeTab==='permisos'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,children:[/*#__PURE__*/_jsx(Settings,{className:\"inline-block mr-2 h-4 w-4\"}),\"Configuraci\\xF3n de Permisos\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('info'),className:`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${activeTab==='info'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,children:[/*#__PURE__*/_jsx(Eye,{className:\"inline-block mr-2 h-4 w-4\"}),\"Informaci\\xF3n del Sistema\"]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[activeTab==='usuarios'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Usuarios del Sistema\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium\",children:[usuarios.length,\" usuarios\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{loadEmpleadosSinUsuario();setShowCreateUserModal(true);},className:\"inline-flex items-center px-3 py-2 border border-blue-600 text-sm font-medium rounded-md text-blue-600 bg-white hover:bg-blue-50 transition-colors\",children:[/*#__PURE__*/_jsx(Plus,{className:\"mr-1.5 h-4 w-4\"}),\"Usuario para Empleado\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCreateEmpleadoModal(true),className:\"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 transition-colors\",children:[/*#__PURE__*/_jsx(Users,{className:\"mr-1.5 h-4 w-4\"}),\"Nuevo Empleado + Usuario\"]})]}),Object.keys(changedRoles).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium\",children:[Object.keys(changedRoles).length,\" cambios pendientes\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:saveAllRoleChanges,disabled:loading,className:\"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50\",children:[/*#__PURE__*/_jsx(Save,{className:\"mr-1.5 h-4 w-4\"}),\"Guardar Todo\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:cancelRoleChanges,disabled:loading,className:\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\",children:[/*#__PURE__*/_jsx(X,{className:\"mr-1.5 h-4 w-4\"}),\"Cancelar\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Usuario\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Rol Actual\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Estado\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:usuarios.map(usuario=>{var _usuario$username,_usuario$username$cha;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 h-10 w-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium text-sm\",children:((_usuario$username=usuario.username)===null||_usuario$username===void 0?void 0:(_usuario$username$cha=_usuario$username.charAt(0))===null||_usuario$username$cha===void 0?void 0:_usuario$username$cha.toUpperCase())||'U'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:usuario.email?usuario.email.split('@')[0]:usuario.username}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"ID: \",usuario.id]})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:usuario.email||'Sin email'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${changedRoles[usuario.id]?'bg-yellow-100 text-yellow-800 border border-yellow-300':'bg-blue-100 text-blue-800'}`,children:getCurrentRole(usuario)}),changedRoles[usuario.id]&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs text-yellow-600 font-medium\",children:\"(Pendiente)\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${usuario.estado==='activo'||usuario.estado===1||usuario.estado===true?'bg-green-100 text-green-800':'bg-red-100 text-red-800'}`,children:usuario.estado==='activo'||usuario.estado===1||usuario.estado===true?'Activo':'Inactivo'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"select\",{value:getCurrentRole(usuario),onChange:e=>handleRoleChange(usuario.id,e.target.value),disabled:loading,className:`border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${loading?'opacity-50 cursor-not-allowed':'hover:border-gray-400'} ${changedRoles[usuario.id]?'border-yellow-400 bg-yellow-50':''}`,children:rolesDisponibles.map(rol=>/*#__PURE__*/_jsx(\"option\",{value:rol,children:rol.charAt(0).toUpperCase()+rol.slice(1).replace('_',' ')},rol))}),changedRoles[usuario.id]&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateUserRole(usuario.id,changedRoles[usuario.id]),disabled:loading,className:\"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50\",title:\"Guardar este cambio\",children:/*#__PURE__*/_jsx(Check,{className:\"h-3 w-3\"})})]})})]},usuario.id);})})]}),usuarios.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Users,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No hay usuarios\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"No se encontraron usuarios en el sistema.\"})]})]})]}),activeTab==='permisos'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Configuraci\\xF3n de Permisos por Rol\"}),selectedRol&&/*#__PURE__*/_jsxs(\"button\",{onClick:updatePermisos,className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\",children:[/*#__PURE__*/_jsx(Save,{className:\"mr-2 h-4 w-4\"}),\"Guardar Cambios\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-900 mb-4\",children:\"Seleccionar Rol\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:roles.map(rol=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>selectRol(rol.RolID,rol.NombreRol),className:`w-full text-left px-4 py-3 rounded-md text-sm font-medium transition-colors ${selectedRol===rol.RolID?'bg-blue-100 text-blue-700 border border-blue-300 shadow-sm':'bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 hover:border-gray-300'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:rol.NombreRol}),selectedRol===rol.RolID&&/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4 text-blue-600\"})]}),rol.Descripcion&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:rol.Descripcion})]},rol.RolID))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2\",children:selectedRol?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-medium text-gray-900 mb-4\",children:[\"Permisos para: \",/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600\",children:selectedRolName})]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Cargando permisos...\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"M\\xF3dulo\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(EyeOff,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Visible\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Ver\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Crear\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(Edit,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Editar\"})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(Trash2,{className:\"h-4 w-4 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-1\",children:\"Eliminar\"})]})})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:permisos.map(permiso=>/*#__PURE__*/_jsxs(\"tr\",{className:`hover:bg-gray-50 transition-colors ${!permiso.EstaVisible?'bg-gray-100 opacity-60':''}`,children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:`${!permiso.EstaVisible?'line-through text-gray-500':''}`,children:permiso.NombreModulo}),!permiso.EstaVisible&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs bg-red-100 text-red-600 px-2 py-1 rounded\",children:\"OCULTO\"})]}),/*#__PURE__*/_jsx(\"div\",{className:`text-sm ${!permiso.EstaVisible?'text-gray-400 line-through':'text-gray-500'}`,children:permiso.DescripcionModulo})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleVisibilidad(permiso.PermisoID),className:`p-2 rounded-full transition-colors ${permiso.EstaVisible?'text-green-600 bg-green-100 hover:bg-green-200':'text-red-600 bg-red-100 hover:bg-red-200'}`,title:permiso.EstaVisible?'Módulo visible - Click para ocultar':'Módulo oculto - Click para mostrar',children:permiso.EstaVisible?/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(EyeOff,{className:\"h-4 w-4\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePermiso(permiso.PermisoID,'PuedeVer'),disabled:!permiso.EstaVisible,className:`p-2 rounded-full transition-colors ${!permiso.EstaVisible?'text-gray-300 bg-gray-100 cursor-not-allowed':permiso.PuedeVer?'text-green-600 bg-green-100 hover:bg-green-200':'text-gray-400 bg-gray-100 hover:bg-gray-200'}`,title:!permiso.EstaVisible?'Módulo oculto':permiso.PuedeVer?'Permitido':'No permitido',children:permiso.PuedeVer?/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePermiso(permiso.PermisoID,'PuedeCrear'),disabled:!permiso.EstaVisible,className:`p-2 rounded-full transition-colors ${!permiso.EstaVisible?'text-gray-300 bg-gray-100 cursor-not-allowed':permiso.PuedeCrear?'text-green-600 bg-green-100 hover:bg-green-200':'text-gray-400 bg-gray-100 hover:bg-gray-200'}`,title:!permiso.EstaVisible?'Módulo oculto':permiso.PuedeCrear?'Permitido':'No permitido',children:permiso.PuedeCrear?/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePermiso(permiso.PermisoID,'PuedeEditar'),disabled:!permiso.EstaVisible,className:`p-2 rounded-full transition-colors ${!permiso.EstaVisible?'text-gray-300 bg-gray-100 cursor-not-allowed':permiso.PuedeEditar?'text-green-600 bg-green-100 hover:bg-green-200':'text-gray-400 bg-gray-100 hover:bg-gray-200'}`,title:!permiso.EstaVisible?'Módulo oculto':permiso.PuedeEditar?'Permitido':'No permitido',children:permiso.PuedeEditar?/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePermiso(permiso.PermisoID,'PuedeEliminar'),disabled:!permiso.EstaVisible,className:`p-2 rounded-full transition-colors ${!permiso.EstaVisible?'text-gray-300 bg-gray-100 cursor-not-allowed':permiso.PuedeEliminar?'text-green-600 bg-green-100 hover:bg-green-200':'text-gray-400 bg-gray-100 hover:bg-gray-200'}`,title:!permiso.EstaVisible?'Módulo oculto':permiso.PuedeEliminar?'Permitido':'No permitido',children:permiso.PuedeEliminar?/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})})]},permiso.PermisoID))})]}),permisos.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(Settings,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"Cargando m\\xF3dulos del sistema\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Preparando todos los m\\xF3dulos para este rol...\"})]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-16 text-gray-500\",children:[/*#__PURE__*/_jsx(Shield,{className:\"mx-auto h-16 w-16 text-gray-300 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Selecciona un rol\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Elige un rol de la lista para ver y editar sus permisos\"})]})})]})]}),activeTab==='info'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(Settings,{className:\"h-5 w-5 text-purple-600 mr-2\"}),/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:[\"M\\xF3dulos del Sistema (\",MODULOS_SISTEMA.length,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-5 w-5 text-blue-600 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-800 font-medium\",children:\"Informaci\\xF3n del Sistema\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-700 mt-2 text-sm\",children:\"Todos los roles tienen acceso a estos m\\xF3dulos por defecto. Como administrador, puedes controlar la visibilidad y permisos espec\\xEDficos de cada m\\xF3dulo para cada rol.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\",children:MODULOS_SISTEMA.map(modulo=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-50 to-purple-100 border border-purple-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-purple-800\",children:modulo.nombre}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-purple-600 bg-purple-200 px-2 py-1 rounded\",children:\"Sistema\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-700\",children:modulo.descripcion})]},modulo.id))})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(Shield,{className:\"h-5 w-5 text-blue-600 mr-2\"}),/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:[\"Roles del Sistema (\",roles.length,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\",children:roles.map(rol=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-green-50 to-green-100 border border-green-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-green-800\",children:rol.NombreRol}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-green-600 bg-green-200 px-2 py-1 rounded\",children:[\"ID: \",rol.RolID]})]}),rol.Descripcion&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-700\",children:rol.Descripcion})]},rol.RolID))})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(Eye,{className:\"h-5 w-5 text-indigo-600 mr-2\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Estad\\xEDsticas del Sistema\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-blue-600\",children:usuarios.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 mt-1\",children:\"Usuarios Totales\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-green-600\",children:roles.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 mt-1\",children:\"Roles Configurados\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-purple-600\",children:MODULOS_SISTEMA.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 mt-1\",children:\"M\\xF3dulos del Sistema\"})]})]})]})]})]})}),showCreateUserModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 text-white px-6 py-4 rounded-t-lg\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold flex items-center\",children:[/*#__PURE__*/_jsx(Plus,{className:\"mr-2 h-5 w-5\"}),\"Crear Usuario para Empleado Existente\"]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:crearUsuarioParaEmpleado,className:\"p-6 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Seleccionar Empleado *\"}),/*#__PURE__*/_jsxs(\"select\",{value:nuevoUsuario.empleadoId,onChange:e=>setNuevoUsuario({...nuevoUsuario,empleadoId:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Seleccione un empleado --\"}),empleadosDisponibles.map(emp=>/*#__PURE__*/_jsxs(\"option\",{value:emp.EMPLEADO_ID,children:[emp.NOMBRE,\" \",emp.APELLIDO,\" - \",emp.CEDULA]},emp.EMPLEADO_ID))]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Solo se muestran empleados sin usuario asignado\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Nombre de Usuario *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nuevoUsuario.username,onChange:e=>setNuevoUsuario({...nuevoUsuario,username:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"usuario123\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:nuevoUsuario.email,onChange:e=>setNuevoUsuario({...nuevoUsuario,email:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"usuario@empresa.com\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Contrase\\xF1a *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:nuevoUsuario.password,onChange:e=>setNuevoUsuario({...nuevoUsuario,password:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"M\\xEDnimo 6 caracteres\",minLength:\"6\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Confirmar Contrase\\xF1a *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:nuevoUsuario.confirmPassword,onChange:e=>setNuevoUsuario({...nuevoUsuario,confirmPassword:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"Repita la contrase\\xF1a\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Rol *\"}),/*#__PURE__*/_jsx(\"select\",{value:nuevoUsuario.rol,onChange:e=>setNuevoUsuario({...nuevoUsuario,rol:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\",required:true,children:rolesDisponibles.map(rol=>/*#__PURE__*/_jsx(\"option\",{value:rol,children:rol.charAt(0).toUpperCase()+rol.slice(1).replace('_',' ')},rol))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowCreateUserModal(false);setNuevoUsuario({empleadoId:'',username:'',email:'',password:'',confirmPassword:'',rol:'colaborador'});},className:\"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?'Creando...':'Crear Usuario'})]})]})]})}),showCreateEmpleadoModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-600 text-white px-6 py-4 rounded-t-lg sticky top-0 z-10\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold flex items-center\",children:[/*#__PURE__*/_jsx(Users,{className:\"mr-2 h-5 w-5\"}),\"Crear Nuevo Empleado + Usuario\"]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:crearEmpleadoConUsuario,className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-semibold text-gray-900 mb-3 border-b pb-2\",children:\"Datos Personales del Empleado\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Nombre *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nuevoEmpleado.nombre,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,nombre:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Apellido *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nuevoEmpleado.apellido,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,apellido:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"C\\xE9dula *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nuevoEmpleado.cedula,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,cedula:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",placeholder:\"000-0000000-0\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:nuevoEmpleado.email,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,email:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:nuevoEmpleado.telefono,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,telefono:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Fecha Nacimiento *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:nuevoEmpleado.fechaNacimiento,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,fechaNacimiento:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"G\\xE9nero *\"}),/*#__PURE__*/_jsxs(\"select\",{value:nuevoEmpleado.genero,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,genero:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Masculino\",children:\"Masculino\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Femenino\",children:\"Femenino\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Estado Civil\"}),/*#__PURE__*/_jsxs(\"select\",{value:nuevoEmpleado.estadoCivil,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,estadoCivil:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Soltero\",children:\"Soltero/a\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Casado\",children:\"Casado/a\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Divorciado\",children:\"Divorciado/a\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Viudo\",children:\"Viudo/a\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-semibold text-gray-900 mb-3 border-b pb-2\",children:\"Credenciales de Acceso\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Nombre de Usuario *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nuevoEmpleado.username,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,username:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Rol *\"}),/*#__PURE__*/_jsx(\"select\",{value:nuevoEmpleado.rol,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,rol:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true,children:rolesDisponibles.map(rol=>/*#__PURE__*/_jsx(\"option\",{value:rol,children:rol.charAt(0).toUpperCase()+rol.slice(1).replace('_',' ')},rol))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Contrase\\xF1a *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:nuevoEmpleado.password,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,password:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",minLength:\"6\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Confirmar Contrase\\xF1a *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:nuevoEmpleado.confirmPassword,onChange:e=>setNuevoEmpleado({...nuevoEmpleado,confirmPassword:e.target.value}),className:\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\",required:true})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-4 sticky bottom-0 bg-white border-t\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowCreateEmpleadoModal(false),className:\"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50\",children:loading?'Creando...':'Crear Empleado y Usuario'})]})]})]})})]})});};export default AdminPermissions;","map":{"version":3,"names":["React","useEffect","useState","Users","Settings","Shield","Check","X","Save","AlertCircle","Eye","Plus","Edit","Trash2","EyeOff","MODULOS_SISTEMA","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","process","env","REACT_APP_API_URL","AUTH_API_URL","ADMIN_API_URL","getToken","localStorage","getItem","AdminPermissions","activeTab","setActiveTab","usuarios","setUsuarios","roles","setRoles","selectedRol","setSelectedRol","selectedRolName","setSelectedRolName","permisos","setPermisos","loading","setLoading","error","setError","message","setMessage","type","text","changedRoles","setChangedRoles","showCreateUserModal","setShowCreateUserModal","showCreateEmpleadoModal","setShowCreateEmpleadoModal","empleadosDisponibles","setEmpleadosDisponibles","nuevoUsuario","setNuevoUsuario","empleadoId","username","email","password","confirmPassword","rol","nuevoEmpleado","setNuevoEmpleado","nombre","apellido","cedula","telefono","direccion","ciudad","provincia","fechaNacimiento","genero","estadoCivil","departamentoId","puestoId","fechaIngreso","Date","toISOString","split","salario","tipoContrato","rolesDisponibles","handleApiError","response","console","status","loadEmpleadosSinUsuario","res","fetch","headers","ok","data","json","empleados","empleadosConUsuario","map","u","sinUsuario","filter","emp","includes","EMPLEADO_ID","err","crearUsuarioParaEmpleado","e","preventDefault","length","method","body","JSON","stringify","role","parseInt","errorData","Error","loadUsuarios","crearEmpleadoConUsuario","resEmpleado","parseFloat","estado","dataEmpleado","id","resUsuario","debugToken","token","log","payload","parse","atob","initializePermisosForRole","modulo","index","PermisoID","ModuloID","NombreModulo","DescripcionModulo","descripcion","EstaVisible","PuedeVer","PuedeCrear","PuedeEditar","PuedeEliminar","endpoints","usedEndpoint","endpoint","errorText","statusText","usuariosData","users","Array","isArray","recordset","usuariosNormalizados","user","UsuarioID","Username","Email","Rol","Estado","EmpleadoID","usuariosConNombres","Promise","all","usuario","empleadoData","empleado","nombreCompleto","NOMBRE","APELLIDO","trim","loadRoles","defaultRoles","RolID","NombreRol","Descripcion","replace","rolesData","loadPermisos","rolId","permisosExistentes","permisosCompletos","permisoExistente","find","p","handleRoleChange","userId","nuevoRol","prev","updateUserRole","newChanges","saveAllRoleChanges","changeCount","Object","keys","successCount","errorCount","entries","cancelRoleChanges","getCurrentRole","updatePermisos","permisosData","moduloId","nombreModulo","descripcionModulo","estaVisible","puedeVer","puedeCrear","puedeEditar","puedeEliminar","togglePermiso","permisoId","campo","toggleVisibilidad","selectRol","rolName","timer","setTimeout","clearTimeout","className","children","onClick","disabled","_usuario$username","_usuario$username$cha","charAt","toUpperCase","value","onChange","target","slice","title","permiso","onSubmit","required","CEDULA","placeholder","minLength"],"sources":["C:/Users/josemontedeoca/rrhh-system/frontend/src/components/Admin/AdminPermissions.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Users, Settings, Shield, Check, X, Save, AlertCircle, Eye, Plus, Edit, Trash2, EyeOff } from 'lucide-react';\r\nimport { MODULOS_SISTEMA } from '../../api/accionesPersonalApi';\r\n\r\n// 🔑 URLs de API actualizadas\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://192.168.0.239:5000/api';\r\nconst AUTH_API_URL = `${API_BASE_URL}/auth`;\r\nconst ADMIN_API_URL = `${API_BASE_URL}/admin`;\r\n\r\n// ✅ Función para obtener el token\r\nconst getToken = () => {\r\n  return localStorage.getItem('token') || localStorage.getItem('rrhh_token');\r\n};\r\n\r\nconst AdminPermissions = () => {\r\n  const [activeTab, setActiveTab] = useState('usuarios');\r\n  const [usuarios, setUsuarios] = useState([]);\r\n  const [roles, setRoles] = useState([]);\r\n  const [selectedRol, setSelectedRol] = useState(null);\r\n  const [selectedRolName, setSelectedRolName] = useState('');\r\n  const [permisos, setPermisos] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n  const [changedRoles, setChangedRoles] = useState({});\r\n\r\n  // ⬇️ omponente AdminPermissions nuevo user ⬇️\r\nconst [showCreateUserModal, setShowCreateUserModal] = useState(false);\r\nconst [showCreateEmpleadoModal, setShowCreateEmpleadoModal] = useState(false);\r\nconst [empleadosDisponibles, setEmpleadosDisponibles] = useState([]);\r\nconst [nuevoUsuario, setNuevoUsuario] = useState({\r\n  empleadoId: '',\r\n  username: '',\r\n  email: '',\r\n  password: '',\r\n  confirmPassword: '',\r\n  rol: 'colaborador'\r\n});\r\nconst [nuevoEmpleado, setNuevoEmpleado] = useState({\r\n  nombre: '',\r\n  apellido: '',\r\n  cedula: '',\r\n  email: '',\r\n  telefono: '',\r\n  direccion: '',\r\n  ciudad: '',\r\n  provincia: '',\r\n  fechaNacimiento: '',\r\n  genero: '',\r\n  estadoCivil: '',\r\n  departamentoId: '',\r\n  puestoId: '',\r\n  fechaIngreso: new Date().toISOString().split('T')[0],\r\n  salario: '',\r\n  tipoContrato: 'Indefinido',\r\n  username: '',\r\n  password: '',\r\n  confirmPassword: '',\r\n  rol: 'colaborador'\r\n});\r\n  \r\n  // Lista de roles disponibles\r\n  const rolesDisponibles = [\r\n    'colaborador',\r\n    'gerente', \r\n    'director',\r\n    'rrhh',\r\n    'gerente_rrhh',\r\n    'director_rrhh',\r\n    'admin'\r\n  ];\r\n\r\n  // --- Función helper para manejar errores de API ---\r\n  const handleApiError = (error, response) => {\r\n    console.error('Error de API:', { error, status: response?.status });\r\n    \r\n    if (response?.status === 401) {\r\n      setError('Sesión expirada. Por favor, inicia sesión nuevamente.');\r\n    } else if (response?.status === 403) {\r\n      setError('No tienes permisos para realizar esta acción.');\r\n    } else if (response?.status === 404) {\r\n      setError('Endpoint no encontrado. Verifica la configuración del servidor.');\r\n    } else {\r\n      setError(error.message || 'Error interno del servidor');\r\n    }\r\n  };\r\n\r\n    // Nueva función para cargar empleados sin usuario\r\n  const loadEmpleadosSinUsuario = async () => {\r\n    try {\r\n      const res = await fetch(`${API_BASE_URL}/empleados`, {\r\n        headers: { 'Authorization': `Bearer ${getToken()}` }\r\n      });\r\n      \r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        const empleados = data.empleados || data;\r\n        \r\n        const empleadosConUsuario = usuarios.map(u => u.empleadoId);\r\n        const sinUsuario = empleados.filter(emp => \r\n          !empleadosConUsuario.includes(emp.EMPLEADO_ID)\r\n        );\r\n        \r\n        setEmpleadosDisponibles(sinUsuario);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error cargando empleados:', err);\r\n    }\r\n  };\r\n\r\n  // Función para crear usuario para empleado existente\r\n  const crearUsuarioParaEmpleado = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!nuevoUsuario.empleadoId) {\r\n      setMessage({ type: 'error', text: 'Debe seleccionar un empleado' });\r\n      return;\r\n    }\r\n    \r\n    if (!nuevoUsuario.username || !nuevoUsuario.email || !nuevoUsuario.password) {\r\n      setMessage({ type: 'error', text: 'Complete todos los campos requeridos' });\r\n      return;\r\n    }\r\n    \r\n    if (nuevoUsuario.password !== nuevoUsuario.confirmPassword) {\r\n      setMessage({ type: 'error', text: 'Las contraseñas no coinciden' });\r\n      return;\r\n    }\r\n    \r\n    if (nuevoUsuario.password.length < 6) {\r\n      setMessage({ type: 'error', text: 'La contraseña debe tener al menos 6 caracteres' });\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(`${AUTH_API_URL}/register`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          username: nuevoUsuario.username,\r\n          email: nuevoUsuario.email,\r\n          password: nuevoUsuario.password,\r\n          role: nuevoUsuario.rol,\r\n          empleadoId: parseInt(nuevoUsuario.empleadoId)\r\n        })\r\n      });\r\n      \r\n      if (!res.ok) {\r\n        const errorData = await res.json();\r\n        throw new Error(errorData.error || 'Error al crear usuario');\r\n      }\r\n      \r\n      setMessage({ type: 'success', text: 'Usuario creado exitosamente' });\r\n      setShowCreateUserModal(false);\r\n      setNuevoUsuario({\r\n        empleadoId: '',\r\n        username: '',\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        rol: 'colaborador'\r\n      });\r\n      await loadUsuarios();\r\n    } catch (err) {\r\n      setMessage({ type: 'error', text: err.message });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Función para crear empleado completo con usuario\r\n  const crearEmpleadoConUsuario = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!nuevoEmpleado.nombre || !nuevoEmpleado.apellido || !nuevoEmpleado.cedula) {\r\n      setMessage({ type: 'error', text: 'Complete todos los campos requeridos del empleado' });\r\n      return;\r\n    }\r\n    \r\n    if (!nuevoEmpleado.username || !nuevoEmpleado.password) {\r\n      setMessage({ type: 'error', text: 'Complete los datos del usuario' });\r\n      return;\r\n    }\r\n    \r\n    if (nuevoEmpleado.password !== nuevoEmpleado.confirmPassword) {\r\n      setMessage({ type: 'error', text: 'Las contraseñas no coinciden' });\r\n      return;\r\n    }\r\n    \r\n    if (nuevoEmpleado.password.length < 6) {\r\n      setMessage({ type: 'error', text: 'La contraseña debe tener al menos 6 caracteres' });\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    try {\r\n      // 1. Crear el empleado\r\n      const resEmpleado = await fetch(`${API_BASE_URL}/empleados`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          nombre: nuevoEmpleado.nombre,\r\n          apellido: nuevoEmpleado.apellido,\r\n          cedula: nuevoEmpleado.cedula,\r\n          email: nuevoEmpleado.email,\r\n          telefono: nuevoEmpleado.telefono,\r\n          direccion: nuevoEmpleado.direccion,\r\n          ciudad: nuevoEmpleado.ciudad,\r\n          provincia: nuevoEmpleado.provincia,\r\n          fechaNacimiento: nuevoEmpleado.fechaNacimiento,\r\n          genero: nuevoEmpleado.genero,\r\n          estadoCivil: nuevoEmpleado.estadoCivil,\r\n          departamentoId: parseInt(nuevoEmpleado.departamentoId) || null,\r\n          puestoId: parseInt(nuevoEmpleado.puestoId) || null,\r\n          fechaIngreso: nuevoEmpleado.fechaIngreso,\r\n          salario: parseFloat(nuevoEmpleado.salario) || 0,\r\n          tipoContrato: nuevoEmpleado.tipoContrato,\r\n          estado: 1\r\n        })\r\n      });\r\n      \r\n      if (!resEmpleado.ok) {\r\n        const errorData = await resEmpleado.json();\r\n        throw new Error(errorData.error || 'Error al crear empleado');\r\n      }\r\n      \r\n      const dataEmpleado = await resEmpleado.json();\r\n      const empleadoId = dataEmpleado.empleadoId || dataEmpleado.id;\r\n      \r\n      // 2. Crear el usuario asociado\r\n      const resUsuario = await fetch(`${AUTH_API_URL}/register`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          username: nuevoEmpleado.username,\r\n          email: nuevoEmpleado.email,\r\n          password: nuevoEmpleado.password,\r\n          role: nuevoEmpleado.rol,\r\n          empleadoId: empleadoId\r\n        })\r\n      });\r\n      \r\n      if (!resUsuario.ok) {\r\n        const errorData = await resUsuario.json();\r\n        throw new Error(errorData.error || 'Empleado creado pero error al crear usuario');\r\n      }\r\n      \r\n      setMessage({ type: 'success', text: 'Empleado y usuario creados exitosamente' });\r\n      setShowCreateEmpleadoModal(false);\r\n      setNuevoEmpleado({\r\n        nombre: '',\r\n        apellido: '',\r\n        cedula: '',\r\n        email: '',\r\n        telefono: '',\r\n        direccion: '',\r\n        ciudad: '',\r\n        provincia: '',\r\n        fechaNacimiento: '',\r\n        genero: '',\r\n        estadoCivil: '',\r\n        departamentoId: '',\r\n        puestoId: '',\r\n        fechaIngreso: new Date().toISOString().split('T')[0],\r\n        salario: '',\r\n        tipoContrato: 'Indefinido',\r\n        username: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        rol: 'colaborador'\r\n      });\r\n      await loadUsuarios();\r\n    } catch (err) {\r\n      setMessage({ type: 'error', text: err.message });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Debug de token ---\r\n  const debugToken = () => {\r\n    const token = getToken();\r\n    console.log('🔐 Token encontrado:', token ? 'SÍ' : 'NO');\r\n    if (token) {\r\n      try {\r\n        const payload = JSON.parse(atob(token.split('.')[1]));\r\n        console.log('📋 Payload del token:', payload);\r\n      } catch (e) {\r\n        console.error('❌ Token malformado:', e);\r\n      }\r\n    }\r\n  };\r\n\r\n  // --- Inicializar permisos para un rol ---\r\n  const initializePermisosForRole = () => {\r\n    return MODULOS_SISTEMA.map((modulo, index) => ({\r\n      PermisoID: `temp_${index}`,\r\n      ModuloID: modulo.id,\r\n      NombreModulo: modulo.nombre,\r\n      DescripcionModulo: modulo.descripcion,\r\n      EstaVisible: true,\r\n      PuedeVer: false,\r\n      PuedeCrear: false,\r\n      PuedeEditar: false,\r\n      PuedeEliminar: false\r\n    }));\r\n  };\r\n\r\n  // --- Cargar usuarios (CORREGIDO) ---\r\n  const loadUsuarios = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    debugToken(); // Debug del token\r\n    \r\n    try {\r\n      // Intentar múltiples endpoints hasta encontrar uno que funcione\r\n      const endpoints = [\r\n        `${AUTH_API_URL}/users`,\r\n        `${API_BASE_URL}/usuarios`, \r\n        `${ADMIN_API_URL}/users`,\r\n        `${API_BASE_URL}/admin/usuarios`\r\n      ];\r\n      \r\n      let res = null;\r\n      let usedEndpoint = null;\r\n      \r\n      for (const endpoint of endpoints) {\r\n        console.log('📡 Intentando endpoint:', endpoint);\r\n        try {\r\n          res = await fetch(endpoint, {\r\n            method: 'GET',\r\n            headers: {\r\n              'Authorization': `Bearer ${getToken()}`,\r\n              'Content-Type': 'application/json'\r\n            }\r\n          });\r\n          \r\n          if (res.ok) {\r\n            usedEndpoint = endpoint;\r\n            console.log('✅ Endpoint funciona:', endpoint);\r\n            break;\r\n          } else {\r\n            console.log(`❌ Endpoint ${endpoint} falló con status:`, res.status);\r\n          }\r\n        } catch (err) {\r\n          console.log(`💥 Error en endpoint ${endpoint}:`, err.message);\r\n          continue;\r\n        }\r\n      }\r\n      \r\n      if (!res || !res.ok) {\r\n        const errorText = res ? await res.text() : 'Ningún endpoint funcionó';\r\n        console.error('❌ Todos los endpoints fallaron:', errorText);\r\n        handleApiError(new Error(`No se pudo conectar: ${errorText}`), res);\r\n        return;\r\n      }\r\n\r\n      console.log('📊 Usando endpoint exitoso:', usedEndpoint);\r\n      console.log('📊 Respuesta del servidor:', {\r\n        status: res.status,\r\n        statusText: res.statusText,\r\n        ok: res.ok\r\n      });\r\n\r\n      const data = await res.json();\r\n      console.log('📋 Datos recibidos:', data);\r\n\r\n      // Mapear la respuesta a la estructura esperada\r\n      let usuariosData = [];\r\n      \r\n      if (data.usuarios) {\r\n        // Si viene en formato { usuarios: [...] } - TU CASO\r\n        usuariosData = data.usuarios;\r\n        console.log('🎯 Usando data.usuarios:', usuariosData.length);\r\n      } else if (data.users) {\r\n        // Si viene en formato { users: [...] }\r\n        usuariosData = data.users;\r\n        console.log('🎯 Usando data.users:', usuariosData.length);\r\n      } else if (Array.isArray(data)) {\r\n        // Si viene directamente como array\r\n        usuariosData = data;\r\n        console.log('🎯 Usando data directamente:', usuariosData.length);\r\n      } else if (data.recordset) {\r\n        // Si viene en formato de recordset de SQL Server\r\n        usuariosData = data.recordset;\r\n        console.log('🎯 Usando data.recordset:', usuariosData.length);\r\n      }\r\n\r\n      console.log('📊 usuariosData antes de normalizar:', usuariosData);\r\n\r\n      // Normalizar la estructura de datos\r\n      const usuariosNormalizados = usuariosData.map(user => ({\r\n        id: user.UsuarioID || user.id,\r\n        username: user.Username || user.username,\r\n        email: user.Email || user.email,\r\n        rol: user.Rol || user.role || user.rol,\r\n        estado: user.Estado || user.estado || 1,\r\n        empleadoId: user.EmpleadoID || user.empleadoId\r\n      }));\r\n\r\n      console.log('👥 Usuarios normalizados:', usuariosNormalizados);\r\n     // Obtener nombres completos de empleados\r\n        const usuariosConNombres = await Promise.all(\r\n          usuariosNormalizados.map(async (usuario) => {\r\n            if (usuario.empleadoId) {\r\n              try {\r\n                const resEmpleado = await fetch(`${API_BASE_URL}/empleados/${usuario.empleadoId}`, {\r\n                  headers: { 'Authorization': `Bearer ${getToken()}` }\r\n                });\r\n                if (resEmpleado.ok) {\r\n                  const empleadoData = await resEmpleado.json();\r\n                  const empleado = empleadoData.empleado || empleadoData;\r\n                  return {\r\n                    ...usuario,\r\n                    nombreCompleto: `${empleado.NOMBRE} ${empleado.APELLIDO}`.trim(),\r\n                    nombre: empleado.NOMBRE,\r\n                    apellido: empleado.APELLIDO\r\n                  };\r\n                }\r\n              } catch (err) {\r\n                console.error(`Error obteniendo empleado ${usuario.empleadoId}:`, err);\r\n              }\r\n            }\r\n            return usuario;\r\n          })\r\n        );\r\n\r\n        setUsuarios(usuariosConNombres);\r\n\r\n    } catch (err) {\r\n      console.error('💥 Error cargando usuarios:', err);\r\n      handleApiError(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Cargar roles ---\r\n  const loadRoles = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      console.log('📡 Cargando roles desde:', `${ADMIN_API_URL}/roles`);\r\n      \r\n      const res = await fetch(`${ADMIN_API_URL}/roles`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      console.log('📊 Respuesta roles:', { status: res.status, ok: res.ok });\r\n\r\n      // Si no existe el endpoint, usar roles por defecto\r\n      if (!res.ok && res.status === 404) {\r\n        console.log('⚠️ Endpoint de roles no encontrado, usando roles por defecto');\r\n        const defaultRoles = rolesDisponibles.map((rol, index) => ({\r\n          RolID: index + 1,\r\n          NombreRol: rol,\r\n          Descripcion: `Rol de ${rol.replace('_', ' ')}`\r\n        }));\r\n        setRoles(defaultRoles);\r\n        return;\r\n      }\r\n\r\n      if (!res.ok) {\r\n        handleApiError(new Error(`Error ${res.status}: ${res.statusText}`), res);\r\n        return;\r\n      }\r\n\r\n      const data = await res.json();\r\n      console.log('📋 Datos de roles:', data);\r\n      \r\n      let rolesData = data.roles || data.recordset || data;\r\n      setRoles(rolesData);\r\n      \r\n    } catch (err) {\r\n      console.error('💥 Error cargando roles:', err);\r\n      // Usar roles por defecto en caso de error\r\n      const defaultRoles = rolesDisponibles.map((rol, index) => ({\r\n        RolID: index + 1,\r\n        NombreRol: rol,\r\n        Descripcion: `Rol de ${rol.replace('_', ' ')}`\r\n      }));\r\n      setRoles(defaultRoles);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Cargar permisos de un rol específico ---\r\n  const loadPermisos = async (rolId) => {\r\n    if (!rolId) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      console.log('📡 Cargando permisos para rol:', rolId);\r\n      \r\n      const res = await fetch(`${ADMIN_API_URL}/permisos/${rolId}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n      \r\n      console.log('📊 Respuesta permisos:', { status: res.status, ok: res.ok });\r\n      \r\n      if (!res.ok && res.status !== 404) {\r\n        handleApiError(new Error(`Error ${res.status}: ${res.statusText}`), res);\r\n        return;\r\n      }\r\n\r\n      let data = { permisos: [] };\r\n      if (res.ok) {\r\n        data = await res.json();\r\n        console.log('📋 Permisos recibidos:', data);\r\n      }\r\n      \r\n      // Si no hay permisos existentes, inicializar con todos los módulos\r\n      if (!data.permisos || data.permisos.length === 0) {\r\n        console.log('⚠️ No hay permisos, inicializando por defecto');\r\n        setPermisos(initializePermisosForRole());\r\n      } else {\r\n        // Combinar permisos existentes con módulos del sistema\r\n        const permisosExistentes = data.permisos;\r\n        const permisosCompletos = MODULOS_SISTEMA.map((modulo, index) => {\r\n          const permisoExistente = permisosExistentes.find(p => \r\n            p.ModuloID === modulo.id || p.NombreModulo === modulo.nombre\r\n          );\r\n          \r\n          return {\r\n            PermisoID: permisoExistente?.PermisoID || `temp_${index}`,\r\n            ModuloID: modulo.id,\r\n            NombreModulo: modulo.nombre,\r\n            DescripcionModulo: modulo.descripcion,\r\n            EstaVisible: permisoExistente?.EstaVisible !== false,\r\n            PuedeVer: permisoExistente?.PuedeVer || false,\r\n            PuedeCrear: permisoExistente?.PuedeCrear || false,\r\n            PuedeEditar: permisoExistente?.PuedeEditar || false,\r\n            PuedeEliminar: permisoExistente?.PuedeEliminar || false\r\n          };\r\n        });\r\n        \r\n        setPermisos(permisosCompletos);\r\n      }\r\n    } catch (err) {\r\n      console.error('💥 Error cargando permisos:', err);\r\n      setPermisos(initializePermisosForRole());\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Manejar cambio temporal de rol ---\r\n  const handleRoleChange = (userId, nuevoRol) => {\r\n    setChangedRoles(prev => ({\r\n      ...prev,\r\n      [userId]: nuevoRol\r\n    }));\r\n  };\r\n\r\n  // --- Actualizar rol de usuario ---\r\n  const updateUserRole = async (userId, nuevoRol) => {\r\n    console.log('🔄 Actualizando rol:', { userId, nuevoRol });\r\n    try {\r\n      const usuario = usuarios.find(u => u.id === userId);\r\n      if (!usuario) {\r\n        throw new Error('Usuario no encontrado');\r\n      }\r\n\r\n      const res = await fetch(`${AUTH_API_URL}/users/${userId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ \r\n          username: usuario.username,\r\n          email: usuario.email,\r\n          role: nuevoRol,\r\n          estado: usuario.estado\r\n        })\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const errorText = await res.text();\r\n        throw new Error(`Error ${res.status}: ${errorText}`);\r\n      }\r\n      \r\n      setMessage({ type: 'success', text: 'Rol actualizado correctamente' });\r\n      \r\n      // Limpiar cambios pendientes para este usuario\r\n      setChangedRoles(prev => {\r\n        const newChanges = { ...prev };\r\n        delete newChanges[userId];\r\n        return newChanges;\r\n      });\r\n      \r\n      // Recargar usuarios\r\n      await loadUsuarios();\r\n    } catch (err) {\r\n      console.error('💥 Error actualizando rol:', err);\r\n      setMessage({ type: 'error', text: err.message });\r\n    }\r\n  };\r\n\r\n  // --- Guardar todos los cambios de roles ---\r\n  const saveAllRoleChanges = async () => {\r\n    const changeCount = Object.keys(changedRoles).length;\r\n    if (changeCount === 0) {\r\n      setMessage({ type: 'error', text: 'No hay cambios pendientes para guardar' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    let successCount = 0;\r\n    let errorCount = 0;\r\n\r\n    try {\r\n      for (const [userId, nuevoRol] of Object.entries(changedRoles)) {\r\n        try {\r\n          await updateUserRole(parseInt(userId), nuevoRol);\r\n          successCount++;\r\n        } catch (error) {\r\n          errorCount++;\r\n          console.error(`Error actualizando usuario ${userId}:`, error);\r\n        }\r\n      }\r\n\r\n      if (errorCount === 0) {\r\n        setMessage({ type: 'success', text: `Se actualizaron ${successCount} roles correctamente` });\r\n        setChangedRoles({});\r\n      } else {\r\n        setMessage({ type: 'error', text: `${successCount} exitosos, ${errorCount} fallaron` });\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Cancelar cambios ---\r\n  const cancelRoleChanges = () => {\r\n    setChangedRoles({});\r\n    setMessage({ type: 'success', text: 'Cambios cancelados' });\r\n  };\r\n\r\n  // --- Obtener el rol actual (con cambios pendientes) ---\r\n  const getCurrentRole = (usuario) => {\r\n    return changedRoles[usuario.id] || usuario.rol;\r\n  };\r\n\r\n  // --- Actualizar permisos ---\r\n  const updatePermisos = async () => {\r\n    if (!selectedRol) return;\r\n\r\n    try {\r\n      const permisosData = permisos.map(p => ({\r\n        moduloId: p.ModuloID,\r\n        nombreModulo: p.NombreModulo,\r\n        descripcionModulo: p.DescripcionModulo,\r\n        estaVisible: p.EstaVisible,\r\n        puedeVer: p.PuedeVer,\r\n        puedeCrear: p.PuedeCrear,\r\n        puedeEditar: p.PuedeEditar,\r\n        puedeEliminar: p.PuedeEliminar\r\n      }));\r\n\r\n      const res = await fetch(`${ADMIN_API_URL}/permisos/${selectedRol}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ permisos: permisosData })\r\n      });\r\n      \r\n      if (!res.ok) {\r\n        const errorText = await res.text();\r\n        throw new Error(`Error ${res.status}: ${errorText}`);\r\n      }\r\n      \r\n      setMessage({ type: 'success', text: 'Permisos actualizados correctamente' });\r\n    } catch (err) {\r\n      console.error('💥 Error actualizando permisos:', err);\r\n      setMessage({ type: 'error', text: err.message });\r\n    }\r\n  };\r\n\r\n  // --- Cambiar permiso específico ---\r\n  const togglePermiso = (permisoId, campo) => {\r\n    setPermisos(prev => \r\n      prev.map(p => \r\n        p.PermisoID === permisoId \r\n          ? { ...p, [campo]: !p[campo] }\r\n          : p\r\n      )\r\n    );\r\n  };\r\n\r\n  // --- Toggle visibilidad del módulo ---\r\n  const toggleVisibilidad = (permisoId) => {\r\n    setPermisos(prev => \r\n      prev.map(p => \r\n        p.PermisoID === permisoId \r\n          ? { \r\n              ...p, \r\n              EstaVisible: !p.EstaVisible,\r\n              PuedeVer: !p.EstaVisible ? p.PuedeVer : false,\r\n              PuedeCrear: !p.EstaVisible ? p.PuedeCrear : false,\r\n              PuedeEditar: !p.EstaVisible ? p.PuedeEditar : false,\r\n              PuedeEliminar: !p.EstaVisible ? p.PuedeEliminar : false\r\n            }\r\n          : p\r\n      )\r\n    );\r\n  };\r\n\r\n  // --- Seleccionar rol para editar permisos ---\r\n  const selectRol = (rolId, rolName) => {\r\n    setSelectedRol(rolId);\r\n    setSelectedRolName(rolName);\r\n    loadPermisos(rolId);\r\n  };\r\n\r\n  // --- Cargar datos al inicio ---\r\n useEffect(() => {\r\n  if (activeTab === 'usuarios') {\r\n    loadUsuarios();\r\n    loadEmpleadosSinUsuario(); // ⬅️ AGREGAR ESTA LÍNEA\r\n  } else if (activeTab === 'permisos') {\r\n    loadRoles();\r\n  }\r\n}, [activeTab]);\r\n\r\n  // Limpiar mensajes después de 5 segundos\r\n  useEffect(() => {\r\n    if (message.text) {\r\n      const timer = setTimeout(() => {\r\n        setMessage({ type: '', text: '' });\r\n      }, 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [message]);\r\n\r\n  if (loading && usuarios.length === 0 && roles.length === 0) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Cargando...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 p-4 sm:p-6\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"bg-white rounded-lg shadow-sm mb-6\">\r\n          <div className=\"border-b border-gray-200 px-6 py-4\">\r\n            <h1 className=\"text-2xl font-bold text-gray-900 flex items-center\">\r\n              <Shield className=\"mr-3 h-7 w-7 text-blue-600\" />\r\n              Gestión de Roles y Permisos\r\n            </h1>\r\n            <p className=\"text-gray-600 mt-1\">Administra usuarios, roles y permisos del sistema</p>\r\n          </div>\r\n\r\n          {/* Debug Info */}\r\n          \r\n\r\n          {/* Mensaje de estado */}\r\n          {message.text && (\r\n            <div className={`mx-6 mt-4 p-4 rounded-md flex items-center ${\r\n              message.type === 'success' \r\n                ? 'bg-green-50 border border-green-200 text-green-800' \r\n                : 'bg-red-50 border border-red-200 text-red-800'\r\n            }`}>\r\n              <AlertCircle className=\"mr-2 h-5 w-5\" />\r\n              {message.text}\r\n            </div>\r\n          )}\r\n\r\n          {/* Error global */}\r\n          {error && (\r\n            <div className=\"mx-6 mt-4 p-4 rounded-md bg-red-50 border border-red-200 text-red-800 flex items-center\">\r\n              <AlertCircle className=\"mr-2 h-5 w-5\" />\r\n              Error: {error}\r\n            </div>\r\n          )}\r\n\r\n          {/* Tabs */}\r\n          <div className=\"border-b border-gray-200\">\r\n            <nav className=\"flex px-6\">\r\n              <button\r\n                onClick={() => setActiveTab('usuarios')}\r\n                className={`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${\r\n                  activeTab === 'usuarios'\r\n                    ? 'border-blue-500 text-blue-600'\r\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                }`}\r\n              >\r\n                <Users className=\"inline-block mr-2 h-4 w-4\" />\r\n                Gestión de Usuarios\r\n              </button>\r\n              <button\r\n                onClick={() => setActiveTab('permisos')}\r\n                className={`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${\r\n                  activeTab === 'permisos'\r\n                    ? 'border-blue-500 text-blue-600'\r\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                }`}\r\n              >\r\n                <Settings className=\"inline-block mr-2 h-4 w-4\" />\r\n                Configuración de Permisos\r\n              </button>\r\n              <button\r\n                onClick={() => setActiveTab('info')}\r\n                className={`py-4 px-6 text-sm font-medium border-b-2 transition-colors ${\r\n                  activeTab === 'info'\r\n                    ? 'border-blue-500 text-blue-600'\r\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                }`}\r\n              >\r\n                <Eye className=\"inline-block mr-2 h-4 w-4\" />\r\n                Información del Sistema\r\n              </button>\r\n            </nav>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Contenido principal */}\r\n        <div className=\"bg-white rounded-lg shadow-sm\">\r\n          <div className=\"p-6\">\r\n            {/* Tab Usuarios */}\r\n            {activeTab === 'usuarios' && (\r\n              <div>\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                  <h2 className=\"text-xl font-semibold text-gray-900\">\r\n                    Usuarios del Sistema\r\n                  </h2>\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <span className=\"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium\">\r\n                      {usuarios.length} usuarios\r\n                    </span>\r\n                     <div className=\"flex gap-2\">\r\n                      <button\r\n                        onClick={() => {\r\n                          loadEmpleadosSinUsuario();\r\n                          setShowCreateUserModal(true);\r\n                        }}\r\n                        className=\"inline-flex items-center px-3 py-2 border border-blue-600 text-sm font-medium rounded-md text-blue-600 bg-white hover:bg-blue-50 transition-colors\"\r\n                      >\r\n                        <Plus className=\"mr-1.5 h-4 w-4\" />\r\n                        Usuario para Empleado\r\n                      </button>\r\n                      \r\n                      <button\r\n                        onClick={() => setShowCreateEmpleadoModal(true)}\r\n                        className=\"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 transition-colors\"\r\n                      >\r\n                        <Users className=\"mr-1.5 h-4 w-4\" />\r\n                        Nuevo Empleado + Usuario\r\n                      </button>\r\n                    </div>\r\n                    {/* ⬆️ FIN ⬆️ */}\r\n\r\n                    {/* Botones para cambios pendientes */}\r\n                    {Object.keys(changedRoles).length > 0 && (\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium\">\r\n                          {Object.keys(changedRoles).length} cambios pendientes\r\n                        </span>\r\n                        <button\r\n                          onClick={saveAllRoleChanges}\r\n                          disabled={loading}\r\n                          className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50\"\r\n                        >\r\n                          <Save className=\"mr-1.5 h-4 w-4\" />\r\n                          Guardar Todo\r\n                        </button>\r\n                        <button\r\n                          onClick={cancelRoleChanges}\r\n                          disabled={loading}\r\n                          className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\"\r\n                        >\r\n                          <X className=\"mr-1.5 h-4 w-4\" />\r\n                          Cancelar\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"min-w-full divide-y divide-gray-200\">\r\n                    <thead className=\"bg-gray-50\">\r\n                      <tr>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Usuario\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Email\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Rol Actual\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Estado\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Acciones\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                      {usuarios.map((usuario) => (\r\n                        <tr key={usuario.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"flex items-center\">\r\n                              <div className=\"flex-shrink-0 h-10 w-10\">\r\n                                <div className=\"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium text-sm\">\r\n                                  {usuario.username?.charAt(0)?.toUpperCase() || 'U'}\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"ml-4\">\r\n                                <div className=\"text-sm font-medium text-gray-900\">\r\n                                 {usuario.email ? usuario.email.split('@')[0] : usuario.username}\r\n                                </div>\r\n                                <div className=\"text-sm text-gray-500\">\r\n                                  ID: {usuario.id}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            {usuario.email || 'Sin email'}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"flex items-center\">\r\n                              <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n                                changedRoles[usuario.id] \r\n                                  ? 'bg-yellow-100 text-yellow-800 border border-yellow-300' \r\n                                  : 'bg-blue-100 text-blue-800'\r\n                              }`}>\r\n                                {getCurrentRole(usuario)}\r\n                              </span>\r\n                              {changedRoles[usuario.id] && (\r\n                                <span className=\"ml-2 text-xs text-yellow-600 font-medium\">\r\n                                  (Pendiente)\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n                             usuario.estado === 'activo' || usuario.estado === 1 || usuario.estado === true\r\n                              ? 'bg-green-100 text-green-800' \r\n                              : 'bg-red-100 text-red-800'\r\n                          }`}>\r\n                            {usuario.estado === 'activo' || usuario.estado === 1 || usuario.estado === true ? 'Activo' : 'Inactivo'}\r\n                          </span>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <select\r\n                                value={getCurrentRole(usuario)}\r\n                                onChange={(e) => handleRoleChange(usuario.id, e.target.value)}\r\n                                disabled={loading}\r\n                                className={`border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                                  loading ? 'opacity-50 cursor-not-allowed' : 'hover:border-gray-400'\r\n                                } ${\r\n                                  changedRoles[usuario.id] ? 'border-yellow-400 bg-yellow-50' : ''\r\n                                }`}\r\n                              >\r\n                                {rolesDisponibles.map(rol => (\r\n                                  <option key={rol} value={rol}>\r\n                                    {rol.charAt(0).toUpperCase() + rol.slice(1).replace('_', ' ')}\r\n                                  </option>\r\n                                ))}\r\n                              </select>\r\n                              \r\n                              {changedRoles[usuario.id] && (\r\n                                <button\r\n                                  onClick={() => updateUserRole(usuario.id, changedRoles[usuario.id])}\r\n                                  disabled={loading}\r\n                                  className=\"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50\"\r\n                                  title=\"Guardar este cambio\"\r\n                                >\r\n                                  <Check className=\"h-3 w-3\" />\r\n                                </button>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n\r\n                  {usuarios.length === 0 && (\r\n                    <div className=\"text-center py-12\">\r\n                      <Users className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n                      <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No hay usuarios</h3>\r\n                      <p className=\"mt-1 text-sm text-gray-500\">No se encontraron usuarios en el sistema.</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Tab Permisos */}\r\n            {activeTab === 'permisos' && (\r\n              <div>\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                  <h2 className=\"text-xl font-semibold text-gray-900\">\r\n                    Configuración de Permisos por Rol\r\n                  </h2>\r\n                  {selectedRol && (\r\n                    <button\r\n                      onClick={updatePermisos}\r\n                      className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\"\r\n                    >\r\n                      <Save className=\"mr-2 h-4 w-4\" />\r\n                      Guardar Cambios\r\n                    </button>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                  {/* Lista de Roles */}\r\n                  <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                    <h3 className=\"text-sm font-medium text-gray-900 mb-4\">\r\n                      Seleccionar Rol\r\n                    </h3>\r\n                    <div className=\"space-y-2\">\r\n                      {roles.map((rol) => (\r\n                        <button\r\n                          key={rol.RolID}\r\n                          onClick={() => selectRol(rol.RolID, rol.NombreRol)}\r\n                          className={`w-full text-left px-4 py-3 rounded-md text-sm font-medium transition-colors ${\r\n                            selectedRol === rol.RolID\r\n                              ? 'bg-blue-100 text-blue-700 border border-blue-300 shadow-sm'\r\n                              : 'bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 hover:border-gray-300'\r\n                          }`}\r\n                        >\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <span>{rol.NombreRol}</span>\r\n                            {selectedRol === rol.RolID && (\r\n                              <Check className=\"h-4 w-4 text-blue-600\" />\r\n                            )}\r\n                          </div>\r\n                          {rol.Descripcion && (\r\n                            <p className=\"text-xs text-gray-500 mt-1\">{rol.Descripcion}</p>\r\n                          )}\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Tabla de Permisos */}\r\n                  <div className=\"lg:col-span-2\">\r\n                    {selectedRol ? (\r\n                      <div>\r\n                        <h3 className=\"text-sm font-medium text-gray-900 mb-4\">\r\n                          Permisos para: <span className=\"text-blue-600\">{selectedRolName}</span>\r\n                        </h3>\r\n                        {loading ? (\r\n                          <div className=\"text-center py-8\">\r\n                            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2\"></div>\r\n                            <p className=\"text-gray-600\">Cargando permisos...</p>\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"overflow-x-auto\">\r\n                            <table className=\"min-w-full divide-y divide-gray-200\">\r\n                              <thead className=\"bg-gray-50\">\r\n                                <tr>\r\n                                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    Módulo\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <EyeOff className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Visible</span>\r\n                                    </div>\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <Eye className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Ver</span>\r\n                                    </div>\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <Plus className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Crear</span>\r\n                                    </div>\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <Edit className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Editar</span>\r\n                                    </div>\r\n                                  </th>\r\n                                  <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                      <Trash2 className=\"h-4 w-4 mx-auto\" />\r\n                                      <span className=\"mt-1\">Eliminar</span>\r\n                                    </div>\r\n                                  </th>\r\n                                </tr>\r\n                              </thead>\r\n                              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                                {permisos.map((permiso) => (\r\n                                  <tr key={permiso.PermisoID} className={`hover:bg-gray-50 transition-colors ${\r\n                                    !permiso.EstaVisible ? 'bg-gray-100 opacity-60' : ''\r\n                                  }`}>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap\">\r\n                                      <div className=\"text-sm font-medium text-gray-900 flex items-center\">\r\n                                        <span className={`${!permiso.EstaVisible ? 'line-through text-gray-500' : ''}`}>\r\n                                          {permiso.NombreModulo}\r\n                                        </span>\r\n                                        {!permiso.EstaVisible && (\r\n                                          <span className=\"ml-2 text-xs bg-red-100 text-red-600 px-2 py-1 rounded\">\r\n                                            OCULTO\r\n                                          </span>\r\n                                        )}\r\n                                      </div>\r\n                                      <div className={`text-sm ${!permiso.EstaVisible ? 'text-gray-400 line-through' : 'text-gray-500'}`}>\r\n                                        {permiso.DescripcionModulo}\r\n                                      </div>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => toggleVisibilidad(permiso.PermisoID)}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          permiso.EstaVisible \r\n                                            ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                            : 'text-red-600 bg-red-100 hover:bg-red-200'\r\n                                        }`}\r\n                                        title={permiso.EstaVisible ? 'Módulo visible - Click para ocultar' : 'Módulo oculto - Click para mostrar'}\r\n                                      >\r\n                                        {permiso.EstaVisible ? <Eye className=\"h-4 w-4\" /> : <EyeOff className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => togglePermiso(permiso.PermisoID, 'PuedeVer')}\r\n                                        disabled={!permiso.EstaVisible}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          !permiso.EstaVisible \r\n                                            ? 'text-gray-300 bg-gray-100 cursor-not-allowed'\r\n                                            : permiso.PuedeVer \r\n                                              ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                              : 'text-gray-400 bg-gray-100 hover:bg-gray-200'\r\n                                        }`}\r\n                                        title={!permiso.EstaVisible ? 'Módulo oculto' : permiso.PuedeVer ? 'Permitido' : 'No permitido'}\r\n                                      >\r\n                                        {permiso.PuedeVer ? <Check className=\"h-4 w-4\" /> : <X className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => togglePermiso(permiso.PermisoID, 'PuedeCrear')}\r\n                                        disabled={!permiso.EstaVisible}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          !permiso.EstaVisible \r\n                                            ? 'text-gray-300 bg-gray-100 cursor-not-allowed'\r\n                                            : permiso.PuedeCrear \r\n                                              ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                              : 'text-gray-400 bg-gray-100 hover:bg-gray-200'\r\n                                        }`}\r\n                                        title={!permiso.EstaVisible ? 'Módulo oculto' : permiso.PuedeCrear ? 'Permitido' : 'No permitido'}\r\n                                      >\r\n                                        {permiso.PuedeCrear ? <Check className=\"h-4 w-4\" /> : <X className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => togglePermiso(permiso.PermisoID, 'PuedeEditar')}\r\n                                        disabled={!permiso.EstaVisible}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          !permiso.EstaVisible \r\n                                            ? 'text-gray-300 bg-gray-100 cursor-not-allowed'\r\n                                            : permiso.PuedeEditar \r\n                                              ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                              : 'text-gray-400 bg-gray-100 hover:bg-gray-200'\r\n                                        }`}\r\n                                        title={!permiso.EstaVisible ? 'Módulo oculto' : permiso.PuedeEditar ? 'Permitido' : 'No permitido'}\r\n                                      >\r\n                                        {permiso.PuedeEditar ? <Check className=\"h-4 w-4\" /> : <X className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                    <td className=\"px-4 py-4 whitespace-nowrap text-center\">\r\n                                      <button\r\n                                        onClick={() => togglePermiso(permiso.PermisoID, 'PuedeEliminar')}\r\n                                        disabled={!permiso.EstaVisible}\r\n                                        className={`p-2 rounded-full transition-colors ${\r\n                                          !permiso.EstaVisible \r\n                                            ? 'text-gray-300 bg-gray-100 cursor-not-allowed'\r\n                                            : permiso.PuedeEliminar \r\n                                              ? 'text-green-600 bg-green-100 hover:bg-green-200' \r\n                                              : 'text-gray-400 bg-gray-100 hover:bg-gray-200'\r\n                                        }`}\r\n                                        title={!permiso.EstaVisible ? 'Módulo oculto' : permiso.PuedeEliminar ? 'Permitido' : 'No permitido'}\r\n                                      >\r\n                                        {permiso.PuedeEliminar ? <Check className=\"h-4 w-4\" /> : <X className=\"h-4 w-4\" />}\r\n                                      </button>\r\n                                    </td>\r\n                                  </tr>\r\n                                ))}\r\n                              </tbody>\r\n                            </table>\r\n\r\n                            {permisos.length === 0 && (\r\n                              <div className=\"text-center py-8\">\r\n                                <Settings className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n                                <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Cargando módulos del sistema</h3>\r\n                                <p className=\"mt-1 text-sm text-gray-500\">Preparando todos los módulos para este rol...</p>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"text-center py-16 text-gray-500\">\r\n                        <Shield className=\"mx-auto h-16 w-16 text-gray-300 mb-4\" />\r\n                        <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Selecciona un rol</h3>\r\n                        <p className=\"text-sm\">Elige un rol de la lista para ver y editar sus permisos</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Tab Información */}\r\n            {activeTab === 'info' && (\r\n              <div className=\"space-y-8\">\r\n                {/* Módulos del Sistema */}\r\n                <section>\r\n                  <div className=\"flex items-center mb-4\">\r\n                    <Settings className=\"h-5 w-5 text-purple-600 mr-2\" />\r\n                    <h2 className=\"text-lg font-semibold text-gray-900\">\r\n                      Módulos del Sistema ({MODULOS_SISTEMA.length})\r\n                    </h2>\r\n                  </div>\r\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\r\n                    <div className=\"flex items-center\">\r\n                      <AlertCircle className=\"h-5 w-5 text-blue-600 mr-2\" />\r\n                      <span className=\"text-blue-800 font-medium\">Información del Sistema</span>\r\n                    </div>\r\n                    <p className=\"text-blue-700 mt-2 text-sm\">\r\n                      Todos los roles tienen acceso a estos módulos por defecto. Como administrador, puedes controlar la visibilidad y permisos específicos de cada módulo para cada rol.\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {MODULOS_SISTEMA.map((modulo) => (\r\n                      <div key={modulo.id} className=\"bg-gradient-to-r from-purple-50 to-purple-100 border border-purple-200 rounded-lg p-4\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <span className=\"font-semibold text-purple-800\">\r\n                            {modulo.nombre}\r\n                          </span>\r\n                          <span className=\"text-xs text-purple-600 bg-purple-200 px-2 py-1 rounded\">\r\n                            Sistema\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-sm text-purple-700\">{modulo.descripcion}</p>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </section>\r\n\r\n                {/* Roles */}\r\n                <section>\r\n                  <div className=\"flex items-center mb-4\">\r\n                    <Shield className=\"h-5 w-5 text-blue-600 mr-2\" />\r\n                    <h2 className=\"text-lg font-semibold text-gray-900\">\r\n                      Roles del Sistema ({roles.length})\r\n                    </h2>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {roles.map((rol) => (\r\n                      <div key={rol.RolID} className=\"bg-gradient-to-r from-green-50 to-green-100 border border-green-200 rounded-lg p-4\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <span className=\"font-semibold text-green-800\">\r\n                            {rol.NombreRol}\r\n                          </span>\r\n                          <span className=\"text-xs text-green-600 bg-green-200 px-2 py-1 rounded\">\r\n                            ID: {rol.RolID}\r\n                          </span>\r\n                        </div>\r\n                        {rol.Descripcion && (\r\n                          <p className=\"text-sm text-green-700\">{rol.Descripcion}</p>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </section>\r\n\r\n                {/* Estadísticas del Sistema */}\r\n                <section>\r\n                  <div className=\"flex items-center mb-4\">\r\n                    <Eye className=\"h-5 w-5 text-indigo-600 mr-2\" />\r\n                    <h2 className=\"text-lg font-semibold text-gray-900\">\r\n                      Estadísticas del Sistema\r\n                    </h2>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-6\">\r\n                    <div className=\"bg-white border border-gray-200 rounded-lg p-6 text-center\">\r\n                      <div className=\"text-3xl font-bold text-blue-600\">{usuarios.length}</div>\r\n                      <div className=\"text-sm text-gray-500 mt-1\">Usuarios Totales</div>\r\n                    </div>\r\n                    <div className=\"bg-white border border-gray-200 rounded-lg p-6 text-center\">\r\n                      <div className=\"text-3xl font-bold text-green-600\">{roles.length}</div>\r\n                      <div className=\"text-sm text-gray-500 mt-1\">Roles Configurados</div>\r\n                    </div>\r\n                    <div className=\"bg-white border border-gray-200 rounded-lg p-6 text-center\">\r\n                      <div className=\"text-3xl font-bold text-purple-600\">{MODULOS_SISTEMA.length}</div>\r\n                      <div className=\"text-sm text-gray-500 mt-1\">Módulos del Sistema</div>\r\n                    </div>\r\n                  </div>\r\n                </section>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Modal: Crear Usuario para Empleado Existente */}\r\n        {showCreateUserModal && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\r\n              <div className=\"bg-blue-600 text-white px-6 py-4 rounded-t-lg\">\r\n                <h3 className=\"text-lg font-semibold flex items-center\">\r\n                  <Plus className=\"mr-2 h-5 w-5\" />\r\n                  Crear Usuario para Empleado Existente\r\n                </h3>\r\n              </div>\r\n              \r\n              <form onSubmit={crearUsuarioParaEmpleado} className=\"p-6 space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Seleccionar Empleado *\r\n                  </label>\r\n                  <select\r\n                    value={nuevoUsuario.empleadoId}\r\n                    onChange={(e) => setNuevoUsuario({...nuevoUsuario, empleadoId: e.target.value})}\r\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    required\r\n                  >\r\n                    <option value=\"\">-- Seleccione un empleado --</option>\r\n                    {empleadosDisponibles.map(emp => (\r\n                      <option key={emp.EMPLEADO_ID} value={emp.EMPLEADO_ID}>\r\n                        {emp.NOMBRE} {emp.APELLIDO} - {emp.CEDULA}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                  <p className=\"text-xs text-gray-500 mt-1\">\r\n                    Solo se muestran empleados sin usuario asignado\r\n                  </p>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Nombre de Usuario *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={nuevoUsuario.username}\r\n                    onChange={(e) => setNuevoUsuario({...nuevoUsuario, username: e.target.value})}\r\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"usuario123\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Email *\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    value={nuevoUsuario.email}\r\n                    onChange={(e) => setNuevoUsuario({...nuevoUsuario, email: e.target.value})}\r\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"usuario@empresa.com\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Contraseña *\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={nuevoUsuario.password}\r\n                    onChange={(e) => setNuevoUsuario({...nuevoUsuario, password: e.target.value})}\r\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"Mínimo 6 caracteres\"\r\n                    minLength=\"6\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Confirmar Contraseña *\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={nuevoUsuario.confirmPassword}\r\n                    onChange={(e) => setNuevoUsuario({...nuevoUsuario, confirmPassword: e.target.value})}\r\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"Repita la contraseña\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Rol *\r\n                  </label>\r\n                  <select\r\n                    value={nuevoUsuario.rol}\r\n                    onChange={(e) => setNuevoUsuario({...nuevoUsuario, rol: e.target.value})}\r\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    required\r\n                  >\r\n                    {rolesDisponibles.map(rol => (\r\n                      <option key={rol} value={rol}>\r\n                        {rol.charAt(0).toUpperCase() + rol.slice(1).replace('_', ' ')}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 pt-4\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setShowCreateUserModal(false);\r\n                      setNuevoUsuario({\r\n                        empleadoId: '',\r\n                        username: '',\r\n                        email: '',\r\n                        password: '',\r\n                        confirmPassword: '',\r\n                        rol: 'colaborador'\r\n                      });\r\n                    }}\r\n                    className=\"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={loading}\r\n                    className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  >\r\n                    {loading ? 'Creando...' : 'Crear Usuario'}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Modal: Crear Empleado Completo */}\r\n        {showCreateEmpleadoModal && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\r\n              <div className=\"bg-green-600 text-white px-6 py-4 rounded-t-lg sticky top-0 z-10\">\r\n                <h3 className=\"text-lg font-semibold flex items-center\">\r\n                  <Users className=\"mr-2 h-5 w-5\" />\r\n                  Crear Nuevo Empleado + Usuario\r\n                </h3>\r\n              </div>\r\n              \r\n              <form onSubmit={crearEmpleadoConUsuario} className=\"p-6 space-y-6\">\r\n                <div>\r\n                  <h4 className=\"text-md font-semibold text-gray-900 mb-3 border-b pb-2\">\r\n                    Datos Personales del Empleado\r\n                  </h4>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Nombre *</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={nuevoEmpleado.nombre}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, nombre: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Apellido *</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={nuevoEmpleado.apellido}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, apellido: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Cédula *</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={nuevoEmpleado.cedula}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, cedula: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        placeholder=\"000-0000000-0\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email *</label>\r\n                      <input\r\n                        type=\"email\"\r\n                        value={nuevoEmpleado.email}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, email: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Teléfono</label>\r\n                      <input\r\n                        type=\"tel\"\r\n                        value={nuevoEmpleado.telefono}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, telefono: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Fecha Nacimiento *</label>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={nuevoEmpleado.fechaNacimiento}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, fechaNacimiento: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Género *</label>\r\n                      <select\r\n                        value={nuevoEmpleado.genero}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, genero: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      >\r\n                        <option value=\"\">Seleccione</option>\r\n                        <option value=\"Masculino\">Masculino</option>\r\n                        <option value=\"Femenino\">Femenino</option>\r\n                      </select>\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Estado Civil</label>\r\n                      <select\r\n                        value={nuevoEmpleado.estadoCivil}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, estadoCivil: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                      >\r\n                        <option value=\"\">Seleccione</option>\r\n                        <option value=\"Soltero\">Soltero/a</option>\r\n                        <option value=\"Casado\">Casado/a</option>\r\n                        <option value=\"Divorciado\">Divorciado/a</option>\r\n                        <option value=\"Viudo\">Viudo/a</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <h4 className=\"text-md font-semibold text-gray-900 mb-3 border-b pb-2\">\r\n                    Credenciales de Acceso\r\n                  </h4>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Nombre de Usuario *</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={nuevoEmpleado.username}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, username: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Rol *</label>\r\n                      <select\r\n                        value={nuevoEmpleado.rol}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, rol: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      >\r\n                        {rolesDisponibles.map(rol => (\r\n                          <option key={rol} value={rol}>\r\n                            {rol.charAt(0).toUpperCase() + rol.slice(1).replace('_', ' ')}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Contraseña *</label>\r\n                      <input\r\n                        type=\"password\"\r\n                        value={nuevoEmpleado.password}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, password: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        minLength=\"6\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Confirmar Contraseña *</label>\r\n                      <input\r\n                        type=\"password\"\r\n                        value={nuevoEmpleado.confirmPassword}\r\n                        onChange={(e) => setNuevoEmpleado({...nuevoEmpleado, confirmPassword: e.target.value})}\r\n                        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 pt-4 sticky bottom-0 bg-white border-t\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowCreateEmpleadoModal(false)}\r\n                    className=\"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={loading}\r\n                    className=\"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50\"\r\n                  >\r\n                    {loading ? 'Creando...' : 'Crear Empleado y Usuario'}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPermissions;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
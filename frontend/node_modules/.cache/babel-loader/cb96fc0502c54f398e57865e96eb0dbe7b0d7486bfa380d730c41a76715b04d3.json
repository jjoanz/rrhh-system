{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Play,Download,Save,TrendingUp,Users,Building,FileText,DollarSign}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ReportesVisualModule=()=>{var _metricas$salarioProm;const[tipoReporte,setTipoReporte]=useState('');const[configuracion,setConfiguracion]=useState({});const[data,setData]=useState([]);const[loading,setLoading]=useState(false);const[metricas,setMetricas]=useState(null);// Cargar métricas al inicio\nuseEffect(()=>{cargarMetricas();},[]);const cargarMetricas=async()=>{try{const response=await fetch(`${API_URL}/reportes/metricas`,{headers:{Authorization:`Bearer ${getStoredToken()}`}});const result=await response.json();if(result.success){setMetricas(result.data);}}catch(error){console.error('Error cargando métricas:',error);}};const TIPOS_REPORTES=[{id:'empleados',nombre:'Reporte de Empleados',descripcion:'Información detallada del personal',icono:Users,color:'blue',configuraciones:[{campo:'campos',label:'Información a mostrar',tipo:'multiselect',opciones:[{value:'nombre',label:'Nombre'},{value:'apellido',label:'Apellido'},{value:'email',label:'Email'},{value:'cargo',label:'Cargo'},{value:'salario',label:'Salario'},{value:'fechaIngreso',label:'Fecha de Ingreso'},{value:'departamento',label:'Departamento'},{value:'estado',label:'Estado'},{value:'cedula',label:'Cédula'}],default:['nombre','apellido','cargo','departamento']},{campo:'filtros.estado',label:'Estado del empleado',tipo:'select',opciones:[{value:'todos',label:'Todos'},{value:'activo',label:'Solo Activos'},{value:'inactivo',label:'Solo Inactivos'}],default:'activo'},{campo:'filtros.departamentoId',label:'Departamento',tipo:'select-departamentos',default:null},{campo:'ordenamiento.campo',label:'Ordenar por',tipo:'select',opciones:[{value:'nombre',label:'Nombre'},{value:'apellido',label:'Apellido'},{value:'fechaIngreso',label:'Fecha de Ingreso'},{value:'salario',label:'Salario'}],default:'nombre'},{campo:'ordenamiento.direccion',label:'Dirección',tipo:'select',opciones:[{value:'ASC',label:'Ascendente (A-Z, 0-9)'},{value:'DESC',label:'Descendente (Z-A, 9-0)'}],default:'ASC'}]},{id:'departamentos',nombre:'Reporte de Departamentos',descripcion:'Análisis por departamento',icono:Building,color:'green',configuraciones:[{campo:'incluirEstadisticas',label:'¿Incluir estadísticas de empleados?',tipo:'checkbox',default:true},{campo:'incluirEmpleados',label:'¿Incluir lista de empleados?',tipo:'checkbox',default:false}]},{id:'vacantes',nombre:'Reporte de Vacantes',descripcion:'Estado de vacantes y postulaciones',icono:FileText,color:'purple',configuraciones:[{campo:'estado',label:'Estado de vacantes',tipo:'select',opciones:[{value:'Todas',label:'Todas'},{value:'Abierta',label:'Solo Abiertas'},{value:'Cerrada',label:'Solo Cerradas'}],default:'Abierta'},{campo:'incluirPostulaciones',label:'¿Incluir estadísticas de postulaciones?',tipo:'checkbox',default:true},{campo:'fechaDesde',label:'Desde',tipo:'date',default:null},{campo:'fechaHasta',label:'Hasta',tipo:'date',default:null}]},{id:'nomina',nombre:'Reporte de Nómina',descripcion:'Severance, salarios y aumentos',icono:DollarSign,color:'orange',configuraciones:[{campo:'tipo',label:'Tipo de reporte',tipo:'select',opciones:[{value:'severance',label:'Cálculo de Severance'},{value:'salarios',label:'Análisis de Salarios'},{value:'aumentos',label:'Historial de Aumentos'}],default:'severance'},{campo:'departamentoId',label:'Departamento',tipo:'select-departamentos',default:null},{campo:'fechaReferencia',label:'Fecha de referencia',tipo:'date',default:new Date().toISOString().split('T')[0]}]}];const ejecutarReporte=async()=>{if(!tipoReporte){alert('Selecciona un tipo de reporte');return;}setLoading(true);try{const response=await fetch(`${API_URL}/reportes/${tipoReporte}`,{method:'POST',headers:{'Content-Type':'application/json',Authorization:`Bearer ${getStoredToken()}`},body:JSON.stringify(configuracion)});const result=await response.json();if(result.success){setData(result.data);}else{alert('Error generando reporte: '+result.error);}}catch(error){console.error('Error:',error);alert('Error ejecutando reporte');}finally{setLoading(false);}};const exportarReporte=async formato=>{// Implementar exportación\ntry{const response=await fetch(`${API_URL}/reportes/export/${formato}`,{method:'POST',headers:{'Content-Type':'application/json',Authorization:`Bearer ${getStoredToken()}`},body:JSON.stringify({tipoReporte,configuracion,data})});const blob=await response.blob();const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`reporte_${tipoReporte}_${new Date().toISOString().split('T')[0]}.${formato}`;a.click();}catch(error){console.error('Error exportando:',error);alert('Error al exportar');}};const reporteSeleccionado=TIPOS_REPORTES.find(r=>r.id===tipoReporte);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 max-w-7xl mx-auto bg-gray-50 min-h-screen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 mb-2\",children:\"\\uD83D\\uDCCA Reportes RRHH\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Sistema de reporter\\xEDa visual - Sin necesidad de SQL\"})]}),metricas&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-blue-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Total Empleados\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900\",children:metricas.totalEmpleados})]}),/*#__PURE__*/_jsx(Users,{className:\"w-12 h-12 text-blue-500 opacity-20\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-green-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Contrataciones (30d)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900\",children:metricas.contratacionesUltimos30Dias})]}),/*#__PURE__*/_jsx(TrendingUp,{className:\"w-12 h-12 text-green-500 opacity-20\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-purple-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Salario Promedio\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-gray-900\",children:[\"$\",(_metricas$salarioProm=metricas.salarioPromedio)===null||_metricas$salarioProm===void 0?void 0:_metricas$salarioProm.toLocaleString()]})]}),/*#__PURE__*/_jsx(DollarSign,{className:\"w-12 h-12 text-purple-500 opacity-20\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-orange-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Vacantes Abiertas\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900\",children:metricas.vacantesAbiertas})]}),/*#__PURE__*/_jsx(FileText,{className:\"w-12 h-12 text-orange-500 opacity-20\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4 text-gray-800\",children:\"Selecciona el tipo de reporte\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\",children:TIPOS_REPORTES.map(tipo=>{const Icon=tipo.icono;const isSelected=tipoReporte===tipo.id;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setTipoReporte(tipo.id);setConfiguracion({});setData([]);},className:`p-6 rounded-xl border-2 transition-all text-left ${isSelected?`border-${tipo.color}-500 bg-${tipo.color}-50 shadow-lg`:'border-gray-200 hover:border-gray-300 hover:shadow-md'}`,children:[/*#__PURE__*/_jsx(Icon,{className:`w-10 h-10 mb-3 ${isSelected?`text-${tipo.color}-600`:'text-gray-400'}`}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-1\",children:tipo.nombre}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:tipo.descripcion})]},tipo.id);})})]}),reporteSeleccionado&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm p-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold mb-4 text-gray-800\",children:[\"Configurar \",reporteSeleccionado.nombre]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:reporteSeleccionado.configuraciones.map((config,index)=>/*#__PURE__*/_jsx(ConfiguracionCampo,{config:config,valor:obtenerValorConfig(configuracion,config.campo),onChange:valor=>actualizarConfiguracion(config.campo,valor)},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-6 pt-6 border-t\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:ejecutarReporte,disabled:loading,className:`flex-1 bg-${reporteSeleccionado.color}-600 text-white px-6 py-3 rounded-lg hover:bg-${reporteSeleccionado.color}-700 disabled:opacity-50 transition-all flex items-center justify-center gap-2 font-medium shadow-lg`,children:[/*#__PURE__*/_jsx(Play,{className:\"w-5 h-5\"}),loading?'Generando...':'Generar Reporte']}),data.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>exportarReporte('excel'),className:\"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-all flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-5 h-5\"}),\"Excel\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>exportarReporte('pdf'),className:\"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-all flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-5 h-5\"}),\"PDF\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>exportarReporte('csv'),className:\"bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-all flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-5 h-5\"}),\"CSV\"]})]})]})]}),data.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-white font-semibold flex items-center gap-2\",children:[\"\\uD83D\\uDCCA Resultados (\",data.length,\" registros)\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[tipoReporte==='departamentos'&&configuracion.incluirEstadisticas&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(GraficoBarras,{data:data,xKey:\"Departamento\",yKey:\"TotalEmpleados\",titulo:\"Empleados por Departamento\"})}),tipoReporte==='nomina'&&configuracion.tipo==='salarios'&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(GraficoBarras,{data:data,xKey:\"Departamento\",yKey:\"SalarioPromedio\",titulo:\"Salario Promedio por Departamento\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{className:\"bg-gray-50\",children:Object.keys(data[0]||{}).map(key=>/*#__PURE__*/_jsx(\"th\",{className:\"border-b-2 border-gray-200 px-4 py-3 text-left text-sm font-semibold text-gray-700\",children:formatearNombreColumna(key)},key))})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map((row,index)=>/*#__PURE__*/_jsx(\"tr\",{className:\"hover:bg-gray-50 transition-colors\",children:Object.entries(row).map((_ref,cellIndex)=>{let[key,value]=_ref;return/*#__PURE__*/_jsx(\"td\",{className:\"border-b border-gray-100 px-4 py-3 text-sm text-gray-900\",children:formatearValor(key,value)},cellIndex);})},index))})]})}),tipoReporte==='nomina'&&configuracion.tipo==='severance'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-blue-900 mb-2\",children:\"\\uD83D\\uDCB0 Resumen Total\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-5 gap-4\",children:calcularTotalesSeverance(data)})]})]})]}),!tipoReporte&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm p-12 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(FileText,{className:\"w-10 h-10 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-700 mb-2\",children:\"Selecciona un tipo de reporte para comenzar\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Elige uno de los tipos de reporte disponibles arriba\"})]})]});// ============================================\n// FUNCIONES AUXILIARES\n// ============================================\nfunction obtenerValorConfig(config,campo){const campos=campo.split('.');let valor=config;for(const c of campos){var _valor;valor=(_valor=valor)===null||_valor===void 0?void 0:_valor[c];}return valor;}function actualizarConfiguracion(campo,valor){const campos=campo.split('.');const nuevaConfig={...configuracion};let ref=nuevaConfig;for(let i=0;i<campos.length-1;i++){if(!ref[campos[i]])ref[campos[i]]={};ref=ref[campos[i]];}ref[campos[campos.length-1]]=valor;setConfiguracion(nuevaConfig);}function formatearNombreColumna(nombre){return nombre.replace(/([A-Z])/g,' $1').replace(/_/g,' ').replace(/^./,str=>str.toUpperCase()).trim();}function formatearValor(key,value){if(value===null||value===undefined)return'-';// Fechas\nif(key.toLowerCase().includes('fecha')&&value){return new Date(value).toLocaleDateString('es-DO');}// Moneda\nif(key.toLowerCase().includes('salario')||key.toLowerCase().includes('preaviso')||key.toLowerCase().includes('cesantia')||key.toLowerCase().includes('vacaciones')||key.toLowerCase().includes('regalia')||key.toLowerCase().includes('total')||key.toLowerCase().includes('presupuesto')){return`$${parseFloat(value).toLocaleString('es-DO',{minimumFractionDigits:2,maximumFractionDigits:2})}`;}// Números\nif(typeof value==='number'){return value.toLocaleString('es-DO');}return value;}function calcularTotalesSeverance(data){const totales={Preaviso:0,Cesantia:0,Vacaciones:0,Regalia:0,Total:0};data.forEach(emp=>{totales.Preaviso+=emp.Preaviso||0;totales.Cesantia+=emp.Cesantia||0;totales.Vacaciones+=emp.Vacaciones||0;totales.Regalia+=emp.Regalia||0;totales.Total+=emp.Total||0;});return/*#__PURE__*/_jsx(_Fragment,{children:Object.entries(totales).map(_ref2=>{let[key,value]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-blue-700 font-medium\",children:key}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-blue-900\",children:[\"$\",value.toLocaleString('es-DO',{minimumFractionDigits:2})]})]},key);})});}};// ============================================\n// COMPONENTE: Campo de Configuración\n// ============================================\nconst ConfiguracionCampo=_ref3=>{let{config,valor,onChange}=_ref3;const[departamentos,setDepartamentos]=useState([]);useEffect(()=>{if(config.tipo==='select-departamentos'){cargarDepartamentos();}},[config.tipo]);const cargarDepartamentos=async()=>{try{const response=await fetch(`${API_URL}/departamentos`,{headers:{Authorization:`Bearer ${getStoredToken()}`}});const data=await response.json();setDepartamentos(data);}catch(error){console.error('Error cargando departamentos:',error);}};// Multiselect\nif(config.tipo==='multiselect'){const valoresSeleccionados=valor||config.default||[];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium text-gray-700 mb-3\",children:config.label}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-3\",children:config.opciones.map(opcion=>{const isSelected=valoresSeleccionados.includes(opcion.value);return/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const nuevosValores=isSelected?valoresSeleccionados.filter(v=>v!==opcion.value):[...valoresSeleccionados,opcion.value];onChange(nuevosValores);},className:`p-3 rounded-lg border-2 text-sm text-left transition-all ${isSelected?'border-blue-500 bg-blue-50 text-blue-700':'border-gray-200 hover:border-blue-300 text-gray-700'}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:opcion.label}),isSelected&&/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-bold\",children:\"\\u2713\"})]})},opcion.value);})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-2\",children:[valoresSeleccionados.length,\" seleccionado(s)\"]})]});}// Select simple\nif(config.tipo==='select'){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium text-gray-700 mb-2\",children:config.label}),/*#__PURE__*/_jsx(\"select\",{value:valor||config.default,onChange:e=>onChange(e.target.value),className:\"w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",children:config.opciones.map(opcion=>/*#__PURE__*/_jsx(\"option\",{value:opcion.value,children:opcion.label},opcion.value))})]});}// Select de departamentos\nif(config.tipo==='select-departamentos'){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium text-gray-700 mb-2\",children:config.label}),/*#__PURE__*/_jsxs(\"select\",{value:valor||'',onChange:e=>onChange(e.target.value||null),className:\"w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Todos los departamentos\"}),departamentos.map(dept=>/*#__PURE__*/_jsx(\"option\",{value:dept.DepartamentoID,children:dept.Nombre},dept.DepartamentoID))]})]});}// Checkbox\nif(config.tipo==='checkbox'){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:valor!==undefined?valor:config.default,onChange:e=>onChange(e.target.checked),className:\"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"label\",{className:\"ml-3 font-medium text-gray-700\",children:config.label})]});}// Date\nif(config.tipo==='date'){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium text-gray-700 mb-2\",children:config.label}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:valor||config.default||'',onChange:e=>onChange(e.target.value),className:\"w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"})]});}return null;};// ============================================\n// COMPONENTE: Gráfico de Barras\n// ============================================\nconst GraficoBarras=_ref4=>{let{data,xKey,yKey,titulo}=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-6 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-800 mb-4\",children:titulo}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:data,children:[/*#__PURE__*/_jsx(XAxis,{dataKey:xKey}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:yKey,fill:\"#3B82F6\"})]})})]});};export default ReportesVisualModule;","map":{"version":3,"names":["React","useState","useEffect","Play","Download","Save","TrendingUp","Users","Building","FileText","DollarSign","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ReportesVisualModule","_metricas$salarioProm","tipoReporte","setTipoReporte","configuracion","setConfiguracion","data","setData","loading","setLoading","metricas","setMetricas","cargarMetricas","response","fetch","API_URL","headers","Authorization","getStoredToken","result","json","success","error","console","TIPOS_REPORTES","id","nombre","descripcion","icono","color","configuraciones","campo","label","tipo","opciones","value","default","Date","toISOString","split","ejecutarReporte","alert","method","body","JSON","stringify","exportarReporte","formato","blob","url","window","URL","createObjectURL","a","document","createElement","href","download","click","reporteSeleccionado","find","r","className","children","totalEmpleados","contratacionesUltimos30Dias","salarioPromedio","toLocaleString","vacantesAbiertas","map","Icon","isSelected","onClick","config","index","ConfiguracionCampo","valor","obtenerValorConfig","onChange","actualizarConfiguracion","disabled","length","incluirEstadisticas","GraficoBarras","xKey","yKey","titulo","Object","keys","key","formatearNombreColumna","row","entries","_ref","cellIndex","formatearValor","calcularTotalesSeverance","campos","c","_valor","nuevaConfig","ref","i","replace","str","toUpperCase","trim","undefined","toLowerCase","includes","toLocaleDateString","parseFloat","minimumFractionDigits","maximumFractionDigits","totales","Preaviso","Cesantia","Vacaciones","Regalia","Total","forEach","emp","_ref2","_ref3","departamentos","setDepartamentos","cargarDepartamentos","valoresSeleccionados","opcion","nuevosValores","filter","v","e","target","dept","DepartamentoID","Nombre","type","checked","_ref4","ResponsiveContainer","width","height","BarChart","XAxis","dataKey","YAxis","Tooltip","Legend","Bar","fill"],"sources":["C:/Users/josemontedeoca/rrhh-system/frontend/src/components/modules/Reportes/ReportesModule.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Play, Download, Save, TrendingUp, Users, Building, FileText, DollarSign } from 'lucide-react';\r\n\r\nconst ReportesVisualModule = () => {\r\n  const [tipoReporte, setTipoReporte] = useState('');\r\n  const [configuracion, setConfiguracion] = useState({});\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [metricas, setMetricas] = useState(null);\r\n\r\n  // Cargar métricas al inicio\r\n  useEffect(() => {\r\n    cargarMetricas();\r\n  }, []);\r\n\r\n  const cargarMetricas = async () => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/reportes/metricas`, {\r\n        headers: { Authorization: `Bearer ${getStoredToken()}` }\r\n      });\r\n      const result = await response.json();\r\n      if (result.success) {\r\n        setMetricas(result.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error cargando métricas:', error);\r\n    }\r\n  };\r\n\r\n  const TIPOS_REPORTES = [\r\n    {\r\n      id: 'empleados',\r\n      nombre: 'Reporte de Empleados',\r\n      descripcion: 'Información detallada del personal',\r\n      icono: Users,\r\n      color: 'blue',\r\n      configuraciones: [\r\n        {\r\n          campo: 'campos',\r\n          label: 'Información a mostrar',\r\n          tipo: 'multiselect',\r\n          opciones: [\r\n            { value: 'nombre', label: 'Nombre' },\r\n            { value: 'apellido', label: 'Apellido' },\r\n            { value: 'email', label: 'Email' },\r\n            { value: 'cargo', label: 'Cargo' },\r\n            { value: 'salario', label: 'Salario' },\r\n            { value: 'fechaIngreso', label: 'Fecha de Ingreso' },\r\n            { value: 'departamento', label: 'Departamento' },\r\n            { value: 'estado', label: 'Estado' },\r\n            { value: 'cedula', label: 'Cédula' }\r\n          ],\r\n          default: ['nombre', 'apellido', 'cargo', 'departamento']\r\n        },\r\n        {\r\n          campo: 'filtros.estado',\r\n          label: 'Estado del empleado',\r\n          tipo: 'select',\r\n          opciones: [\r\n            { value: 'todos', label: 'Todos' },\r\n            { value: 'activo', label: 'Solo Activos' },\r\n            { value: 'inactivo', label: 'Solo Inactivos' }\r\n          ],\r\n          default: 'activo'\r\n        },\r\n        {\r\n          campo: 'filtros.departamentoId',\r\n          label: 'Departamento',\r\n          tipo: 'select-departamentos',\r\n          default: null\r\n        },\r\n        {\r\n          campo: 'ordenamiento.campo',\r\n          label: 'Ordenar por',\r\n          tipo: 'select',\r\n          opciones: [\r\n            { value: 'nombre', label: 'Nombre' },\r\n            { value: 'apellido', label: 'Apellido' },\r\n            { value: 'fechaIngreso', label: 'Fecha de Ingreso' },\r\n            { value: 'salario', label: 'Salario' }\r\n          ],\r\n          default: 'nombre'\r\n        },\r\n        {\r\n          campo: 'ordenamiento.direccion',\r\n          label: 'Dirección',\r\n          tipo: 'select',\r\n          opciones: [\r\n            { value: 'ASC', label: 'Ascendente (A-Z, 0-9)' },\r\n            { value: 'DESC', label: 'Descendente (Z-A, 9-0)' }\r\n          ],\r\n          default: 'ASC'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'departamentos',\r\n      nombre: 'Reporte de Departamentos',\r\n      descripcion: 'Análisis por departamento',\r\n      icono: Building,\r\n      color: 'green',\r\n      configuraciones: [\r\n        {\r\n          campo: 'incluirEstadisticas',\r\n          label: '¿Incluir estadísticas de empleados?',\r\n          tipo: 'checkbox',\r\n          default: true\r\n        },\r\n        {\r\n          campo: 'incluirEmpleados',\r\n          label: '¿Incluir lista de empleados?',\r\n          tipo: 'checkbox',\r\n          default: false\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'vacantes',\r\n      nombre: 'Reporte de Vacantes',\r\n      descripcion: 'Estado de vacantes y postulaciones',\r\n      icono: FileText,\r\n      color: 'purple',\r\n      configuraciones: [\r\n        {\r\n          campo: 'estado',\r\n          label: 'Estado de vacantes',\r\n          tipo: 'select',\r\n          opciones: [\r\n            { value: 'Todas', label: 'Todas' },\r\n            { value: 'Abierta', label: 'Solo Abiertas' },\r\n            { value: 'Cerrada', label: 'Solo Cerradas' }\r\n          ],\r\n          default: 'Abierta'\r\n        },\r\n        {\r\n          campo: 'incluirPostulaciones',\r\n          label: '¿Incluir estadísticas de postulaciones?',\r\n          tipo: 'checkbox',\r\n          default: true\r\n        },\r\n        {\r\n          campo: 'fechaDesde',\r\n          label: 'Desde',\r\n          tipo: 'date',\r\n          default: null\r\n        },\r\n        {\r\n          campo: 'fechaHasta',\r\n          label: 'Hasta',\r\n          tipo: 'date',\r\n          default: null\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'nomina',\r\n      nombre: 'Reporte de Nómina',\r\n      descripcion: 'Severance, salarios y aumentos',\r\n      icono: DollarSign,\r\n      color: 'orange',\r\n      configuraciones: [\r\n        {\r\n          campo: 'tipo',\r\n          label: 'Tipo de reporte',\r\n          tipo: 'select',\r\n          opciones: [\r\n            { value: 'severance', label: 'Cálculo de Severance' },\r\n            { value: 'salarios', label: 'Análisis de Salarios' },\r\n            { value: 'aumentos', label: 'Historial de Aumentos' }\r\n          ],\r\n          default: 'severance'\r\n        },\r\n        {\r\n          campo: 'departamentoId',\r\n          label: 'Departamento',\r\n          tipo: 'select-departamentos',\r\n          default: null\r\n        },\r\n        {\r\n          campo: 'fechaReferencia',\r\n          label: 'Fecha de referencia',\r\n          tipo: 'date',\r\n          default: new Date().toISOString().split('T')[0]\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  const ejecutarReporte = async () => {\r\n    if (!tipoReporte) {\r\n      alert('Selecciona un tipo de reporte');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${API_URL}/reportes/${tipoReporte}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${getStoredToken()}`\r\n        },\r\n        body: JSON.stringify(configuracion)\r\n      });\r\n\r\n      const result = await response.json();\r\n      if (result.success) {\r\n        setData(result.data);\r\n      } else {\r\n        alert('Error generando reporte: ' + result.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      alert('Error ejecutando reporte');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const exportarReporte = async (formato) => {\r\n    // Implementar exportación\r\n    try {\r\n      const response = await fetch(`${API_URL}/reportes/export/${formato}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${getStoredToken()}`\r\n        },\r\n        body: JSON.stringify({\r\n          tipoReporte,\r\n          configuracion,\r\n          data\r\n        })\r\n      });\r\n\r\n      const blob = await response.blob();\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `reporte_${tipoReporte}_${new Date().toISOString().split('T')[0]}.${formato}`;\r\n      a.click();\r\n    } catch (error) {\r\n      console.error('Error exportando:', error);\r\n      alert('Error al exportar');\r\n    }\r\n  };\r\n\r\n  const reporteSeleccionado = TIPOS_REPORTES.find(r => r.id === tipoReporte);\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-7xl mx-auto bg-gray-50 min-h-screen\">\r\n      {/* Header */}\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">📊 Reportes RRHH</h1>\r\n        <p className=\"text-gray-600\">Sistema de reportería visual - Sin necesidad de SQL</p>\r\n      </div>\r\n\r\n      {/* Dashboard de Métricas */}\r\n      {metricas && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\r\n          <div className=\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-blue-500\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-gray-600 text-sm\">Total Empleados</p>\r\n                <p className=\"text-3xl font-bold text-gray-900\">{metricas.totalEmpleados}</p>\r\n              </div>\r\n              <Users className=\"w-12 h-12 text-blue-500 opacity-20\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-green-500\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-gray-600 text-sm\">Contrataciones (30d)</p>\r\n                <p className=\"text-3xl font-bold text-gray-900\">{metricas.contratacionesUltimos30Dias}</p>\r\n              </div>\r\n              <TrendingUp className=\"w-12 h-12 text-green-500 opacity-20\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-purple-500\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-gray-600 text-sm\">Salario Promedio</p>\r\n                <p className=\"text-3xl font-bold text-gray-900\">\r\n                  ${metricas.salarioPromedio?.toLocaleString()}\r\n                </p>\r\n              </div>\r\n              <DollarSign className=\"w-12 h-12 text-purple-500 opacity-20\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-xl shadow-sm p-6 border-l-4 border-orange-500\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-gray-600 text-sm\">Vacantes Abiertas</p>\r\n                <p className=\"text-3xl font-bold text-gray-900\">{metricas.vacantesAbiertas}</p>\r\n              </div>\r\n              <FileText className=\"w-12 h-12 text-orange-500 opacity-20\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Selección de Tipo de Reporte */}\r\n      <div className=\"bg-white rounded-xl shadow-sm p-6 mb-6\">\r\n        <h2 className=\"text-xl font-semibold mb-4 text-gray-800\">Selecciona el tipo de reporte</h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          {TIPOS_REPORTES.map(tipo => {\r\n            const Icon = tipo.icono;\r\n            const isSelected = tipoReporte === tipo.id;\r\n            return (\r\n              <button\r\n                key={tipo.id}\r\n                onClick={() => {\r\n                  setTipoReporte(tipo.id);\r\n                  setConfiguracion({});\r\n                  setData([]);\r\n                }}\r\n                className={`p-6 rounded-xl border-2 transition-all text-left ${\r\n                  isSelected\r\n                    ? `border-${tipo.color}-500 bg-${tipo.color}-50 shadow-lg`: 'border-gray-200 hover:border-gray-300 hover:shadow-md'\r\n                }`}\r\n              >\r\n                <Icon className={`w-10 h-10 mb-3 ${isSelected ? `text-${tipo.color}-600` : 'text-gray-400'}`} />\r\n                <h3 className=\"font-semibold text-gray-900 mb-1\">{tipo.nombre}</h3>\r\n                <p className=\"text-sm text-gray-600\">{tipo.descripcion}</p>\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Configuración del Reporte */}\r\n      {reporteSeleccionado && (\r\n        <div className=\"bg-white rounded-xl shadow-sm p-6 mb-6\">\r\n          <h2 className=\"text-xl font-semibold mb-4 text-gray-800\">\r\n            Configurar {reporteSeleccionado.nombre}\r\n          </h2>\r\n          \r\n          <div className=\"space-y-6\">\r\n            {reporteSeleccionado.configuraciones.map((config, index) => (\r\n              <ConfiguracionCampo\r\n                key={index}\r\n                config={config}\r\n                valor={obtenerValorConfig(configuracion, config.campo)}\r\n                onChange={(valor) => actualizarConfiguracion(config.campo, valor)}\r\n              />\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"flex gap-3 mt-6 pt-6 border-t\">\r\n            <button\r\n              onClick={ejecutarReporte}\r\n              disabled={loading}\r\n              className={`flex-1 bg-${reporteSeleccionado.color}-600 text-white px-6 py-3 rounded-lg hover:bg-${reporteSeleccionado.color}-700 disabled:opacity-50 transition-all flex items-center justify-center gap-2 font-medium shadow-lg`}\r\n            >\r\n              <Play className=\"w-5 h-5\" />\r\n              {loading ? 'Generando...' : 'Generar Reporte'}\r\n            </button>\r\n            \r\n            {data.length > 0 && (\r\n              <>\r\n                <button\r\n                  onClick={() => exportarReporte('excel')}\r\n                  className=\"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-all flex items-center gap-2\"\r\n                >\r\n                  <Download className=\"w-5 h-5\" />\r\n                  Excel\r\n                </button>\r\n                <button\r\n                  onClick={() => exportarReporte('pdf')}\r\n                  className=\"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-all flex items-center gap-2\"\r\n                >\r\n                  <Download className=\"w-5 h-5\" />\r\n                  PDF\r\n                </button>\r\n                <button\r\n                  onClick={() => exportarReporte('csv')}\r\n                  className=\"bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-all flex items-center gap-2\"\r\n                >\r\n                  <Download className=\"w-5 h-5\" />\r\n                  CSV\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Resultados */}\r\n      {data.length > 0 && (\r\n        <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\r\n          <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4\">\r\n            <h3 className=\"text-white font-semibold flex items-center gap-2\">\r\n              📊 Resultados ({data.length} registros)\r\n            </h3>\r\n          </div>\r\n          \r\n          <div className=\"p-6\">\r\n            {/* Gráficos si aplica */}\r\n            {tipoReporte === 'departamentos' && configuracion.incluirEstadisticas && (\r\n              <div className=\"mb-6\">\r\n                <GraficoBarras \r\n                  data={data}\r\n                  xKey=\"Departamento\"\r\n                  yKey=\"TotalEmpleados\"\r\n                  titulo=\"Empleados por Departamento\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {tipoReporte === 'nomina' && configuracion.tipo === 'salarios' && (\r\n              <div className=\"mb-6\">\r\n                <GraficoBarras \r\n                  data={data}\r\n                  xKey=\"Departamento\"\r\n                  yKey=\"SalarioPromedio\"\r\n                  titulo=\"Salario Promedio por Departamento\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* Tabla de datos */}\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full border-collapse\">\r\n                <thead>\r\n                  <tr className=\"bg-gray-50\">\r\n                    {Object.keys(data[0] || {}).map((key) => (\r\n                      <th key={key} className=\"border-b-2 border-gray-200 px-4 py-3 text-left text-sm font-semibold text-gray-700\">\r\n                        {formatearNombreColumna(key)}\r\n                      </th>\r\n                    ))}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {data.map((row, index) => (\r\n                    <tr key={index} className=\"hover:bg-gray-50 transition-colors\">\r\n                      {Object.entries(row).map(([key, value], cellIndex) => (\r\n                        <td key={cellIndex} className=\"border-b border-gray-100 px-4 py-3 text-sm text-gray-900\">\r\n                          {formatearValor(key, value)}\r\n                        </td>\r\n                      ))}\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n\r\n            {/* Resumen si es reporte de nómina */}\r\n            {tipoReporte === 'nomina' && configuracion.tipo === 'severance' && (\r\n              <div className=\"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200\">\r\n                <h4 className=\"font-semibold text-blue-900 mb-2\">💰 Resumen Total</h4>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\r\n                  {calcularTotalesSeverance(data)}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Estado vacío */}\r\n      {!tipoReporte && (\r\n        <div className=\"bg-white rounded-xl shadow-sm p-12 text-center\">\r\n          <div className=\"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n            <FileText className=\"w-10 h-10 text-gray-400\" />\r\n          </div>\r\n          <h3 className=\"text-xl font-semibold text-gray-700 mb-2\">\r\n            Selecciona un tipo de reporte para comenzar\r\n          </h3>\r\n          <p className=\"text-gray-500\">\r\n            Elige uno de los tipos de reporte disponibles arriba\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  // ============================================\r\n  // FUNCIONES AUXILIARES\r\n  // ============================================\r\n\r\n  function obtenerValorConfig(config, campo) {\r\n    const campos = campo.split('.');\r\n    let valor = config;\r\n    for (const c of campos) {\r\n      valor = valor?.[c];\r\n    }\r\n    return valor;\r\n  }\r\n\r\n  function actualizarConfiguracion(campo, valor) {\r\n    const campos = campo.split('.');\r\n    const nuevaConfig = { ...configuracion };\r\n    \r\n    let ref = nuevaConfig;\r\n    for (let i = 0; i < campos.length - 1; i++) {\r\n      if (!ref[campos[i]]) ref[campos[i]] = {};\r\n      ref = ref[campos[i]];\r\n    }\r\n    \r\n    ref[campos[campos.length - 1]] = valor;\r\n    setConfiguracion(nuevaConfig);\r\n  }\r\n\r\n  function formatearNombreColumna(nombre) {\r\n    return nombre\r\n      .replace(/([A-Z])/g, ' $1')\r\n      .replace(/_/g, ' ')\r\n      .replace(/^./, str => str.toUpperCase())\r\n      .trim();\r\n  }\r\n\r\n  function formatearValor(key, value) {\r\n    if (value === null || value === undefined) return '-';\r\n    \r\n    // Fechas\r\n    if (key.toLowerCase().includes('fecha') && value) {\r\n      return new Date(value).toLocaleDateString('es-DO');\r\n    }\r\n    \r\n    // Moneda\r\n    if (key.toLowerCase().includes('salario') || \r\n        key.toLowerCase().includes('preaviso') ||\r\n        key.toLowerCase().includes('cesantia') ||\r\n        key.toLowerCase().includes('vacaciones') ||\r\n        key.toLowerCase().includes('regalia') ||\r\n        key.toLowerCase().includes('total') ||\r\n        key.toLowerCase().includes('presupuesto')) {\r\n      return `$${parseFloat(value).toLocaleString('es-DO', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\r\n    }\r\n    \r\n    // Números\r\n    if (typeof value === 'number') {\r\n      return value.toLocaleString('es-DO');\r\n    }\r\n    \r\n    return value;\r\n  }\r\n\r\n  function calcularTotalesSeverance(data) {\r\n    const totales = {\r\n      Preaviso: 0,\r\n      Cesantia: 0,\r\n      Vacaciones: 0,\r\n      Regalia: 0,\r\n      Total: 0\r\n    };\r\n\r\n    data.forEach(emp => {\r\n      totales.Preaviso += emp.Preaviso || 0;\r\n      totales.Cesantia += emp.Cesantia || 0;\r\n      totales.Vacaciones += emp.Vacaciones || 0;\r\n      totales.Regalia += emp.Regalia || 0;\r\n      totales.Total += emp.Total || 0;\r\n    });\r\n\r\n    return (\r\n      <>\r\n        {Object.entries(totales).map(([key, value]) => (\r\n          <div key={key}>\r\n            <div className=\"text-xs text-blue-700 font-medium\">{key}</div>\r\n            <div className=\"text-lg font-bold text-blue-900\">\r\n              ${value.toLocaleString('es-DO', { minimumFractionDigits: 2 })}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\n// ============================================\r\n// COMPONENTE: Campo de Configuración\r\n// ============================================\r\n\r\nconst ConfiguracionCampo = ({ config, valor, onChange }) => {\r\n  const [departamentos, setDepartamentos] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (config.tipo === 'select-departamentos') {\r\n      cargarDepartamentos();\r\n    }\r\n  }, [config.tipo]);\r\n\r\n  const cargarDepartamentos = async () => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/departamentos`, {\r\n        headers: { Authorization: `Bearer ${getStoredToken()}` }\r\n      });\r\n      const data = await response.json();\r\n      setDepartamentos(data);\r\n    } catch (error) {\r\n      console.error('Error cargando departamentos:', error);\r\n    }\r\n  };\r\n\r\n  // Multiselect\r\n  if (config.tipo === 'multiselect') {\r\n    const valoresSeleccionados = valor || config.default || [];\r\n    \r\n    return (\r\n      <div>\r\n        <label className=\"block font-medium text-gray-700 mb-3\">{config.label}</label>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\r\n          {config.opciones.map(opcion => {\r\n            const isSelected = valoresSeleccionados.includes(opcion.value);\r\n            return (\r\n              <button\r\n                key={opcion.value}\r\n                onClick={() => {\r\n                  const nuevosValores = isSelected\r\n                    ? valoresSeleccionados.filter(v => v !== opcion.value)\r\n                    : [...valoresSeleccionados, opcion.value];\r\n                  onChange(nuevosValores);\r\n                }}\r\n                className={`p-3 rounded-lg border-2 text-sm text-left transition-all ${\r\n                  isSelected\r\n                    ? 'border-blue-500 bg-blue-50 text-blue-700'\r\n                    : 'border-gray-200 hover:border-blue-300 text-gray-700'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span>{opcion.label}</span>\r\n                  {isSelected && (\r\n                    <span className=\"text-blue-600 font-bold\">✓</span>\r\n                  )}\r\n                </div>\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n        <p className=\"text-xs text-gray-500 mt-2\">\r\n          {valoresSeleccionados.length} seleccionado(s)\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Select simple\r\n  if (config.tipo === 'select') {\r\n    return (\r\n      <div>\r\n        <label className=\"block font-medium text-gray-700 mb-2\">{config.label}</label>\r\n        <select\r\n          value={valor || config.default}\r\n          onChange={(e) => onChange(e.target.value)}\r\n          className=\"w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n        >\r\n          {config.opciones.map(opcion => (\r\n            <option key={opcion.value} value={opcion.value}>\r\n              {opcion.label}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Select de departamentos\r\n  if (config.tipo === 'select-departamentos') {\r\n    return (\r\n      <div>\r\n        <label className=\"block font-medium text-gray-700 mb-2\">{config.label}</label>\r\n        <select\r\n          value={valor || ''}\r\n          onChange={(e) => onChange(e.target.value || null)}\r\n          className=\"w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n        >\r\n          <option value=\"\">Todos los departamentos</option>\r\n          {departamentos.map(dept => (\r\n            <option key={dept.DepartamentoID} value={dept.DepartamentoID}>\r\n              {dept.Nombre}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Checkbox\r\n  if (config.tipo === 'checkbox') {\r\n    return (\r\n      <div className=\"flex items-center\">\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={valor !== undefined ? valor : config.default}\r\n          onChange={(e) => onChange(e.target.checked)}\r\n          className=\"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n        />\r\n        <label className=\"ml-3 font-medium text-gray-700\">{config.label}</label>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Date\r\n  if (config.tipo === 'date') {\r\n    return (\r\n      <div>\r\n        <label className=\"block font-medium text-gray-700 mb-2\">{config.label}</label>\r\n        <input\r\n          type=\"date\"\r\n          value={valor || config.default || ''}\r\n          onChange={(e) => onChange(e.target.value)}\r\n          className=\"w-full border-2 border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n// ============================================\r\n// COMPONENTE: Gráfico de Barras\r\n// ============================================\r\n\r\nconst GraficoBarras = ({ data, xKey, yKey, titulo }) => {\r\n  return (\r\n    <div className=\"bg-gray-50 p-6 rounded-lg\">\r\n      <h4 className=\"font-semibold text-gray-800 mb-4\">{titulo}</h4>\r\n      <ResponsiveContainer width=\"100%\" height={300}>\r\n        <BarChart data={data}>\r\n          <XAxis dataKey={xKey} />\r\n          <YAxis />\r\n          <Tooltip />\r\n          <Legend />\r\n          <Bar dataKey={yKey} fill=\"#3B82F6\" />\r\n        </BarChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportesVisualModule;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
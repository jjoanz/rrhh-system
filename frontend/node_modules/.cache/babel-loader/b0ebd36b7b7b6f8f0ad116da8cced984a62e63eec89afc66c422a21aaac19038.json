{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../../../context/AuthContext';import{useApp}from'../../../context/AppContext';import vacacionesService from'../../../api/vacacionesService';import empleadosService from'../../../api/empleadosService';import{Calendar,Plus,Clock,Check,X,FileText,Users,ArrowRight,AlertTriangle,Edit,Package}from'lucide-react';import{showNotification}from'@mantine/notifications';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const VacacionesModule=()=>{var _user$role,_user$role3,_user$role4;const{user}=useAuth();// const { showNotification } = useApp();  //  Solo obtener showNotification\n// const notify = (message, type = 'info') => {\n//  if (showNotification) {\n//   showNotification({ type, message });\n// } else {\n//   console.warn('showNotification no disponible:', message);\n//  }\n// };\n// âœ… LOGS DETALLADOS\nconsole.log('ðŸ” Usuario completo:',user);console.log('ðŸ” ROL DEL USUARIO:',user.role);console.log('ðŸ” ROL NORMALIZADO:',(_user$role=user.role)===null||_user$role===void 0?void 0:_user$role.toLowerCase().replace(/\\s+/g,'_'));const[activeTab,setActiveTab]=useState('solicitar');const[loading,setLoading]=useState(false);// Estados principales\nconst[solicitudes,setSolicitudes]=useState([]);const[estadisticas,setEstadisticas]=useState({diasTotales:0,diasUsados:0,diasDisponibles:0});const[solicitudSeleccionada,setSolicitudSeleccionada]=useState(null);const[mostrarModalAprobacion,setMostrarModalAprobacion]=useState(false);const[mostrarModalRechazo,setMostrarModalRechazo]=useState(false);const[periodos,setPeriodos]=useState([]);const diasDisponibles=(estadisticas===null||estadisticas===void 0?void 0:estadisticas.diasDisponibles)||0;const diasUsados=(estadisticas===null||estadisticas===void 0?void 0:estadisticas.diasUsados)||0;const diasTotales=(estadisticas===null||estadisticas===void 0?void 0:estadisticas.diasTotales)||0;const diasPendientes=(estadisticas===null||estadisticas===void 0?void 0:estadisticas.diasPendientes)||0;// Modal de aprobaciÃ³n manual\nconst[showManualModal,setShowManualModal]=useState(false);const[manualApprovalData,setManualApprovalData]=useState({solicitudId:null,motivo:'',accion:'aprobada'});// Modal de selecciÃ³n de perÃ­odos\nconst[showPeriodosModal,setShowPeriodosModal]=useState(false);const[periodosSeleccionados,setPeriodosSeleccionados]=useState([]);// Formulario de solicitud\nconst[solicitudForm,setSolicitudForm]=useState({fechaInicio:'',fechaFin:'',motivo:'',tipo:'vacaciones'});// Estados para entrada manual\nconst[empleados,setEmpleados]=useState([]);const[empleadoBusqueda,setEmpleadoBusqueda]=useState('');const[mostrarListaEmpleados,setMostrarListaEmpleados]=useState(false);const[entradaManualForm,setEntradaManualForm]=useState({empleadoId:null,empleadoNombre:'',tipoSolicitud:'vacaciones',fechaInicio:'',fechaFin:'',justificacion:'',documentoReferencia:''});// Roles con aprobaciÃ³n manual (RRHH)\nconst ROLES_APROBACION_MANUAL=['rrhh','gerente_rrhh','director_rrhh'];const ROLES_LABELS={'gerente':'Gerente','director':'Director','gerente_rrhh':'Gerente RRHH','director_rrhh':'Director RRHH','rrhh':'RRHH','colaborador':'Colaborador'};// FunciÃ³n para mostrar notificaciones (usa los helpers globales si existen)\n// FunciÃ³n para recargar las solicitudes\nconst cargarSolicitudes=async()=>{try{const response=await vacacionesService.obtenerSolicitudes();setSolicitudes(response.data||[]);}catch(error){showNotification('Error al cargar las solicitudes','error');}};const cargarEmpleados=async()=>{try{const response=await empleadosService.getEmpleados();setEmpleados(response.data||[]);}catch(error){console.error('Error al cargar empleados:',error);showNotification({title:'Error',message:'Error al cargar lista de empleados',color:'red'});}};// Cargar datos al montar\nuseEffect(()=>{if(user!==null&&user!==void 0&&user.id&&user!==null&&user!==void 0&&user.empleadoId){cargarDatos();}},[user]);const cargarDatos=async()=>{try{setLoading(true);const solicitudesData=await vacacionesService.getSolicitudes(user.id,user.role);setSolicitudes(solicitudesData);// Cargar estadÃ­sticas detalladas\nconst statsData=await vacacionesService.getEstadisticasDetalladas(user.empleadoId);console.log('EstadÃ­sticas recibidas:',statsData);// Validar que exista el objeto totales\nif(statsData.totales){setEstadisticas(statsData.totales);}else{// Fallback si no existe\nsetEstadisticas({diasTotales:0,diasUsados:0,diasDisponibles:0,diasPendientes:0});}setPeriodos(statsData.periodos||[]);}catch(error){showNotification('Error al cargar datos de vacaciones','error');console.error('Error:',error);// Establecer valores por defecto en caso de error\nsetEstadisticas({diasTotales:0,diasUsados:0,diasDisponibles:0,diasPendientes:0});setPeriodos([]);}finally{setLoading(false);}};// Calcular dÃ­as\nconst calcularDias=()=>{if(solicitudForm.fechaInicio&&solicitudForm.fechaFin){const inicio=new Date(solicitudForm.fechaInicio);const fin=new Date(solicitudForm.fechaFin);const diffTime=fin-inicio;const diffDays=Math.ceil(diffTime/(1000*60*60*24))+1;return diffDays>0?diffDays:0;}return 0;};const calcularDiasHabiles=()=>{if(solicitudForm.fechaInicio&&solicitudForm.fechaFin){const inicio=new Date(solicitudForm.fechaInicio);const fin=new Date(solicitudForm.fechaFin);let diasHabiles=0;for(let d=new Date(inicio);d<=fin;d.setDate(d.getDate()+1)){const diaSemana=d.getDay();if(diaSemana!==0&&diaSemana!==6){diasHabiles++;}}return diasHabiles;}return 0;};// Abrir modal de perÃ­odos\n// Abrir modal de perÃ­odos\nconst abrirModalPeriodos=()=>{console.log('ðŸ”§ Abriendo modal de perÃ­odos');console.log('ðŸ“‹ PerÃ­odos disponibles:',periodos);try{const diasSolicitados=calcularDias();const seleccionInicial=[];let diasRestantes=diasSolicitados;for(const periodo of periodos){if(diasRestantes<=0)break;// âœ… Normalizar nombres de campos (SQL Server usa MAYÃšSCULAS, JS usa camelCase)\nconst balanceId=periodo.balanceId||periodo.BalanceID||periodo.id;const diasDisponibles=periodo.diasDisponibles||periodo.DiasDisponibles||periodo.DiasPendientes;const descripcion=periodo.descripcion||periodo.Descripcion||`${periodo.anioInicio||periodo.AnioInicio}-${periodo.anioFin||periodo.AnioFin}`;if(!balanceId){console.error('âš ï¸ PerÃ­odo sin balanceId:',periodo);continue;}const diasAUsar=Math.min(diasRestantes,diasDisponibles);if(diasAUsar>0){seleccionInicial.push({balanceId:balanceId,descripcion:descripcion,diasDisponibles:diasDisponibles,dias:diasAUsar});diasRestantes-=diasAUsar;console.log(`âœ… PerÃ­odo agregado: ${descripcion} - ${diasAUsar} dÃ­as`);}}console.log('ðŸ“¦ SelecciÃ³n inicial:',seleccionInicial);setPeriodosSeleccionados(seleccionInicial);setShowPeriodosModal(true);}catch(error){console.error('âŒ Error en abrirModalPeriodos:',error);showNotification({type:'error',message:'Error al abrir selecciÃ³n de perÃ­odos'});}};// Actualizar dÃ­as de un perÃ­odo seleccionado\nconst actualizarDiasPeriodo=(balanceId,nuevosDias)=>{setPeriodosSeleccionados(prev=>prev.map(p=>p.balanceId===balanceId?{...p,dias:parseInt(nuevosDias)||0}:p));};// Calcular total de dÃ­as seleccionados\nconst calcularTotalSeleccionado=()=>{return periodosSeleccionados.reduce((sum,p)=>sum+p.dias,0);};// Crear solicitud con perÃ­odos\n// Crear solicitud con perÃ­odos\nconst handleSubmitSolicitud=async e=>{e.preventDefault();console.log('=== DEBUG SUBMIT ===');console.log('Tipo solicitud:',solicitudForm.tipo);console.log('Cantidad de perÃ­odos:',periodos.length);console.log('PerÃ­odos:',periodos);if(!solicitudForm.fechaInicio||!solicitudForm.fechaFin||!solicitudForm.motivo.trim()){showNotification('Por favor completa todos los campos obligatorios','error');return;}const inicio=new Date(solicitudForm.fechaInicio);const fin=new Date(solicitudForm.fechaFin);if(inicio>=fin){showNotification({type:'error',message:'La fecha de fin debe ser posterior a la fecha de inicio'});return;}if(inicio<=new Date()){showNotification({type:'error',message:'La fecha de inicio debe ser futura'});return;}const diasSolicitados=calcularDias();if(diasSolicitados>diasDisponibles&&solicitudForm.tipo==='vacaciones'){showNotification({type:'error',message:`No tienes suficientes dÃ­as disponibles. Solicitas ${diasSolicitados} dÃ­as pero solo tienes ${diasDisponibles} disponibles.`});return;}console.log('Â¿Abrir modal?',solicitudForm.tipo==='vacaciones'&&periodos.length>1);if(solicitudForm.tipo==='vacaciones'&&periodos.length>1){console.log('ABRIENDO MODAL');abrirModalPeriodos();return;}console.log('Crear solicitud directa');await crearSolicitudDirecta();};const crearSolicitudDirecta=async()=>{setLoading(true);try{const diasSolicitados=calcularDias();// Llamada al servicio para crear la solicitud\nawait vacacionesService.crearSolicitud({empleadoId:user.empleadoId,tipo:solicitudForm.tipo,fechaInicio:solicitudForm.fechaInicio,fechaFin:solicitudForm.fechaFin,dias:diasSolicitados,diasHabiles:calcularDiasHabiles(),motivo:solicitudForm.motivo});// Recargar datos despuÃ©s de crear la solicitud\nawait cargarDatos();// NotificaciÃ³n de Ã©xito\nshowNotification({title:'Ã‰xito',message:`Solicitud de ${diasSolicitados} dÃ­as enviada correctamente.`,color:'green'});// Reiniciar formulario\nsetSolicitudForm({fechaInicio:'',fechaFin:'',motivo:'',tipo:'vacaciones'});}catch(error){var _error$response,_error$response$data;// NotificaciÃ³n de error\nshowNotification({title:'Error',message:'Error al crear solicitud: '+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||error.message),color:'red'});}finally{setLoading(false);}};const confirmarSolicitudConPeriodos=async()=>{const diasSolicitados=calcularDias();const totalSeleccionado=calcularTotalSeleccionado();if(totalSeleccionado!==diasSolicitados){showNotification({title:'AtenciÃ³n',message:`La suma de dÃ­as seleccionados (${totalSeleccionado}) debe ser igual a los dÃ­as solicitados (${diasSolicitados})`,color:'yellow'});return;}try{setLoading(true);await vacacionesService.crearSolicitudConPeriodos({empleadoId:user.empleadoId,tipo:solicitudForm.tipo,fechaInicio:solicitudForm.fechaInicio,fechaFin:solicitudForm.fechaFin,dias:diasSolicitados,diasHabiles:calcularDiasHabiles(),motivo:solicitudForm.motivo,periodosSeleccionados:periodosSeleccionados.map(p=>({balanceId:p.balanceId,dias:p.dias}))});// Resetear formulario ANTES de recargar datos\nsetSolicitudForm({fechaInicio:'',fechaFin:'',motivo:'',tipo:'vacaciones'});setShowPeriodosModal(false);setPeriodosSeleccionados([]);// Recargar datos al final\nawait cargarDatos();// Mostrar mensaje de Ã©xito\nshowNotification({title:'Ã‰xito',message:`Solicitud de ${diasSolicitados} dÃ­as enviada correctamente.`,color:'green'});}catch(error){var _error$response2,_error$response2$data;console.error('Error:',error);showNotification({title:'Error',message:'Error al crear solicitud: '+((error===null||error===void 0?void 0:(_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||(error===null||error===void 0?void 0:error.message)||'Error desconocido'),color:'red'});}finally{setLoading(false);}};const handleManualApproval=async()=>{if(!manualApprovalData.motivo.trim()){showNotification({title:'AtenciÃ³n',message:'Debes proporcionar un motivo para la aprobaciÃ³n manual',color:'red'// 'red' para error\n});return;}try{setLoading(true);await vacacionesService.procesarSolicitud(manualApprovalData.solicitudId,{usuarioID:user.id,accion:manualApprovalData.accion,esManual:true,motivoManual:manualApprovalData.motivo});// NotificaciÃ³n de Ã©xito\nshowNotification({title:'Ã‰xito',message:manualApprovalData.accion==='aprobada'?'Solicitud aprobada manualmente':'Solicitud rechazada manualmente',color:'green'});await cargarDatos();}catch(error){var _error$response3,_error$response3$data;// NotificaciÃ³n de error\nshowNotification({title:'Error',message:'Error al procesar: '+(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||error.message),color:'red'});}finally{setLoading(false);}setShowManualModal(false);setManualApprovalData({solicitudId:null,motivo:'',accion:'aprobada'});};const openManualModal=function(solicitudId){let accion=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'aprobada';setManualApprovalData({solicitudId,motivo:'',accion});setShowManualModal(true);};// Verificar si puede aprobar\n// Verificar si puede aprobar\nconst puedeAprobar=solicitud=>{var _user$role2,_nivelPendiente$rol;if(!solicitud.flujoAprobacion||!Array.isArray(solicitud.flujoAprobacion)){console.log('âŒ Sin flujo o no es array:',{solicitudId:solicitud.id,tieneFlujo:!!solicitud.flujoAprobacion,esArray:Array.isArray(solicitud.flujoAprobacion)});return{puede:false};}// Encontrar el primer nivel pendiente (sin accion)\nconst nivelPendiente=solicitud.flujoAprobacion.find(nivel=>!nivel.accion);if(!nivelPendiente){console.log('â­ï¸ No hay niveles pendientes (todo aprobado/rechazado):',{solicitudId:solicitud.id,niveles:solicitud.flujoAprobacion.map(n=>({rol:n.rol,accion:n.accion}))});return{puede:false};}// Normalizar roles para comparaciÃ³n\nconst rolUsuario=(_user$role2=user.role)===null||_user$role2===void 0?void 0:_user$role2.toLowerCase().replace(/\\s+/g,'_');const rolPendiente=(_nivelPendiente$rol=nivelPendiente.rol)===null||_nivelPendiente$rol===void 0?void 0:_nivelPendiente$rol.toLowerCase().replace(/\\s+/g,'_');console.log('ðŸ” Verificando permisos detallados:',{solicitudId:solicitud.id,empleado:solicitud.empleado,rolUsuario,rolPendiente,nivelPendiente,coincide:rolUsuario===rolPendiente,flujoCompleto:solicitud.flujoAprobacion});// Si el rol del usuario coincide con el nivel pendiente\nif(rolUsuario===rolPendiente){console.log('âœ… PUEDE APROBAR - Rol coincide');return{puede:true,motivo:'normal'};}// RRHH puede hacer aprobaciÃ³n manual\nif(ROLES_APROBACION_MANUAL.includes(user.role)){console.log('âœ… PUEDE APROBAR - AprobaciÃ³n manual (RRHH)');return{puede:true,motivo:'manual'};}console.log('âŒ NO PUEDE APROBAR');return{puede:false};};// Obtener solicitudes pendientes\nconst solicitudesPendientes=solicitudes.filter(sol=>{if(sol.estado!=='pendiente')return false;const permisos=puedeAprobar(sol);return permisos.puede;});const getEstadoColor=estado=>{switch(estado){case'aprobada':return{bg:'#f0fdf4',color:'#166534',border:'#bbf7d0'};case'rechazada':return{bg:'#fef2f2',color:'#dc2626',border:'#fecaca'};case'pendiente':return{bg:'#fff7ed',color:'#ea580c',border:'#fed7aa'};default:return{bg:'#f9fafb',color:'#374151',border:'#e5e7eb'};}};const getTipoLabel=tipo=>{switch(tipo){case'vacaciones':return'Vacaciones';case'permiso':return'Permiso Personal';case'medico':return'Permiso MÃ©dico';default:return tipo;}};const getEtiquetaVista=()=>{switch(user.role){case'Director RRHH':case'Gerente RRHH':return'Vista Global Completa - Toda la Empresa';case'RRHH':return'Vista RRHH - Gerentes y Colaboradores';case'Director':return'Vista Directiva - Gerentes y Colaboradores';case'Gerente':return'Vista Gerencial - Colaboradores Directos';default:return'Vista Personal - Mis Solicitudes';}};const FlujAprobacion=_ref=>{let{flujo,estado,aprobacionManual}=_ref;if(!flujo||!Array.isArray(flujo)||flujo.length===0)return null;return/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'1rem',padding:'1rem',background:'#f8fafc',borderRadius:'0.5rem',border:'1px solid #e2e8f0'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:'0.75rem'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{fontSize:'0.875rem',fontWeight:'600',color:'#374151',margin:0},children:\"Flujo de Aprobaci\\xF3n\"}),aprobacionManual&&/*#__PURE__*/_jsx(\"span\",{style:{padding:'0.25rem 0.5rem',borderRadius:'9999px',fontSize:'0.625rem',fontWeight:'600',background:'#fef3c7',color:'#92400e',border:'1px solid #fcd34d'},children:\"APROBACI\\xD3N MANUAL\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.5rem',flexWrap:'wrap'},children:flujo.map((nivel,index)=>{var _flujo;const isCompleted=nivel.accion!==null;const isCurrent=nivel.accion===null&&(index===0||((_flujo=flujo[index-1])===null||_flujo===void 0?void 0:_flujo.accion)!==null);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'0.25rem 0.75rem',borderRadius:'9999px',fontSize:'0.75rem',fontWeight:'500',background:isCompleted?'#f0fdf4':isCurrent?'#fff7ed':'#f1f5f9',color:isCompleted?'#166534':isCurrent?'#ea580c':'#64748b',border:`1px solid ${isCompleted?'#bbf7d0':isCurrent?'#fed7aa':'#cbd5e1'}`,display:'flex',alignItems:'center',gap:'0.25rem'},children:[isCompleted&&/*#__PURE__*/_jsx(Check,{style:{width:'0.75rem',height:'0.75rem'}}),isCurrent&&/*#__PURE__*/_jsx(Clock,{style:{width:'0.75rem',height:'0.75rem'}}),ROLES_LABELS[nivel.rol]||nivel.rol]}),index<flujo.length-1&&/*#__PURE__*/_jsx(ArrowRight,{style:{width:'1rem',height:'1rem',color:'#9ca3af'}})]},nivel.orden||index);})}),flujo.some(n=>n.aprobadoPor)&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'0.75rem'},children:[/*#__PURE__*/_jsx(\"h6\",{style:{fontSize:'0.75rem',fontWeight:'600',color:'#6b7280',margin:0,marginBottom:'0.5rem'},children:\"HISTORIAL DE APROBACIONES\"}),flujo.map((nivel,index)=>{if(!nivel.aprobadoPor&&!nivel.accion)return null;return/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.75rem',color:'#6b7280',marginBottom:'0.5rem',padding:'0.5rem',background:nivel.tipo==='manual'?'#fef3c7':'transparent',borderRadius:'0.25rem',border:nivel.tipo==='manual'?'1px solid #fcd34d':'none'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.5rem'},children:[nivel.accion==='aprobada'?'âœ…':nivel.accion==='rechazada'?'âŒ':'â³',/*#__PURE__*/_jsx(\"strong\",{children:ROLES_LABELS[nivel.rol]||nivel.rol}),nivel.aprobadoPor&&`: ${nivel.aprobadoPor}`,nivel.tipo==='manual'&&/*#__PURE__*/_jsx(\"span\",{style:{padding:'0.125rem 0.375rem',borderRadius:'9999px',fontSize:'0.625rem',fontWeight:'600',background:'#92400e',color:'#fef3c7'},children:\"MANUAL\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:'1.25rem',marginTop:'0.25rem'},children:[nivel.fecha?/*#__PURE__*/_jsxs(_Fragment,{children:[\"Fecha: \",new Date(nivel.fecha).toLocaleString()]}):/*#__PURE__*/_jsx(\"em\",{style:{color:'#9ca3af'},children:\"Pendiente de aprobaci\\xF3n\"}),nivel.motivoManual&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'0.25rem',fontStyle:'italic'},children:[\"Motivo: \",nivel.motivoManual]})]})]},index);})]})]});};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'1.5rem',background:'#f1eeeeff',minHeight:'100vh'},children:[showPeriodosModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0, 0, 0, 0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'0.75rem',padding:'1.5rem',maxWidth:'40rem',width:'90%',maxHeight:'80vh',overflow:'auto',boxShadow:'0 20px 25px -5px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.25rem',fontWeight:'600',color:'#111827',marginBottom:'1rem'},children:\"Seleccionar Per\\xEDodos\"}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#f0f9ff',border:'1px solid #bae6fd',borderRadius:'0.5rem',padding:'1rem',marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'0.875rem',color:'#0369a1',margin:0,marginBottom:'0.5rem'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"D\\xEDas a solicitar:\"}),\" \",calcularDias(),\" d\\xEDas\"]}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'0.875rem',color:'#0369a1',margin:0},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"D\\xEDas seleccionados:\"}),\" \",calcularTotalSeleccionado(),\" d\\xEDas\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'1rem',marginBottom:'1.5rem'},children:periodosSeleccionados.map(periodo=>/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'0.5rem',padding:'1rem',background:'#f9fafb'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'0.5rem'},children:[/*#__PURE__*/_jsx(\"strong\",{style:{fontSize:'0.875rem',color:'#111827'},children:periodo.descripcion}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'0.75rem',color:'#6b7280',margin:0},children:[\"Disponibles: \",periodo.diasDisponibles,\" d\\xEDas\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:'0.75rem',color:'#374151',marginBottom:'0.25rem'},children:\"D\\xEDas a usar de este per\\xEDodo:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:periodo.diasDisponibles,value:periodo.dias,onChange:e=>actualizarDiasPeriodo(periodo.balanceId,e.target.value),style:{width:'100%',padding:'0.5rem',border:'1px solid #d1d5db',borderRadius:'0.375rem',fontSize:'0.875rem'}})]})]},periodo.balanceId))}),calcularTotalSeleccionado()!==calcularDias()&&/*#__PURE__*/_jsx(\"div\",{style:{background:'#fef2f2',border:'1px solid #fecaca',borderRadius:'0.5rem',padding:'0.75rem',marginBottom:'1rem'},children:/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'0.75rem',color:'#dc2626',margin:0},children:[\"\\u26A0\\uFE0F La suma de d\\xEDas debe ser igual a \",calcularDias(),\" d\\xEDas\"]})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.75rem',justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowPeriodosModal(false);setPeriodosSeleccionados([]);},style:{padding:'0.5rem 1rem',background:'#f3f4f6',color:'#374151',border:'1px solid #d1d5db',borderRadius:'0.375rem',fontSize:'0.875rem',cursor:'pointer'},children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:confirmarSolicitudConPeriodos,disabled:calcularTotalSeleccionado()!==calcularDias()||loading,style:{padding:'0.5rem 1rem',background:calcularTotalSeleccionado()===calcularDias()&&!loading?'#3b82f6':'#9ca3af',color:'white',border:'none',borderRadius:'0.375rem',fontSize:'0.875rem',fontWeight:'500',cursor:calcularTotalSeleccionado()===calcularDias()&&!loading?'pointer':'not-allowed'},children:loading?'Enviando...':'Confirmar Solicitud'})]})]})}),mostrarModalRechazo&&solicitudSeleccionada&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0, 0, 0, 0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'0.5rem',padding:'2rem',maxWidth:'28rem',width:'90%'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.25rem',fontWeight:'600',marginBottom:'1rem'},children:\"Rechazar Solicitud\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#6b7280',marginBottom:'1.5rem'},children:[\"\\xBFEst\\xE1s seguro de rechazar la solicitud de \",/*#__PURE__*/_jsx(\"strong\",{children:solicitudSeleccionada.empleado}),\"?\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.75rem',justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setMostrarModalRechazo(false);setSolicitudSeleccionada(null);},style:{padding:'0.5rem 1rem',background:'#f3f4f6',color:'#374151',border:'none',borderRadius:'0.375rem',cursor:'pointer'},children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:async()=>{try{setLoading(true);await vacacionesService.procesarSolicitud(solicitudSeleccionada.id,{usuarioID:user.id,accion:'rechazada',esManual:false,motivoManual:''});showNotification({title:'Ã‰xito',message:'Solicitud rechazada correctamente.',color:'green'});setMostrarModalRechazo(false);setSolicitudSeleccionada(null);await cargarDatos();}catch(error){var _error$response4,_error$response4$data;// NotificaciÃ³n de error\nshowNotification({title:'Error',message:'Error al rechazar: '+(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||error.message),color:'red'});}finally{setLoading(false);}},disabled:loading,style:{display:'flex',alignItems:'center',gap:'0.5rem',padding:'0.5rem 1rem',background:'#ef4444',color:'white',border:'none',borderRadius:'0.375rem',fontSize:'0.875rem',fontWeight:'500',cursor:loading?'not-allowed':'pointer'},children:[/*#__PURE__*/_jsx(X,{style:{width:'1rem',height:'1rem'}}),\"Rechazar\"]})]})]})}),showManualModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0, 0, 0, 0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'0.75rem',padding:'1.5rem',maxWidth:'28rem',width:'90%',boxShadow:'0 20px 25px -5px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.25rem',fontWeight:'600',color:'#111827',marginBottom:'1rem'},children:\"Aprobaci\\xF3n Manual\"}),/*#__PURE__*/_jsx(\"div\",{style:{background:'#fef3c7',border:'1px solid #fcd34d',borderRadius:'0.5rem',padding:'0.75rem',marginBottom:'1rem'},children:/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.875rem',color:'#92400e',margin:0},children:\"\\u26A0\\uFE0F Esta acci\\xF3n saltar\\xE1 el flujo normal de aprobaci\\xF3n y ser\\xE1 registrada como aprobaci\\xF3n manual.\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:'0.875rem',fontWeight:'500',color:'#374151',marginBottom:'0.5rem'},children:\"Acci\\xF3n\"}),/*#__PURE__*/_jsxs(\"select\",{value:manualApprovalData.accion,onChange:e=>setManualApprovalData(prev=>({...prev,accion:e.target.value})),style:{width:'100%',padding:'0.75rem',border:'1px solid #d1d5db',borderRadius:'0.5rem',fontSize:'1rem'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"aprobada\",children:\"Aprobar\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rechazada\",children:\"Rechazar\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:'0.875rem',fontWeight:'500',color:'#374151',marginBottom:'0.5rem'},children:\"Motivo de la aprobaci\\xF3n manual *\"}),/*#__PURE__*/_jsx(\"textarea\",{value:manualApprovalData.motivo,onChange:e=>setManualApprovalData(prev=>({...prev,motivo:e.target.value})),placeholder:\"Ej: Aprobaci\\xF3n urgente por emergencia familiar, autorizaci\\xF3n directa del CEO, etc.\",rows:3,style:{width:'100%',padding:'0.75rem',border:'1px solid #d1d5db',borderRadius:'0.5rem',fontSize:'1rem',resize:'vertical'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.75rem',justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowManualModal(false),style:{padding:'0.5rem 1rem',background:'#f3f4f6',color:'#374151',border:'1px solid #d1d5db',borderRadius:'0.375rem',fontSize:'0.875rem',cursor:'pointer'},children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleManualApproval,style:{padding:'0.5rem 1rem',background:'#dc2626',color:'white',border:'none',borderRadius:'0.375rem',fontSize:'0.875rem',fontWeight:'500',cursor:'pointer'},children:\"Confirmar Aprobaci\\xF3n Manual\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'112rem',margin:'0 auto'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'2rem',fontWeight:'bold',color:'#111827',marginBottom:'0.5rem'},children:\"Sistema de Gesti\\xF3n de Autoservicio\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280',fontSize:'1.125rem',marginBottom:'2rem'},children:getEtiquetaVista()}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(15rem, 1fr))',gap:'1.5rem',marginBottom:'2rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'0.75rem',boxShadow:'0 1px 3px rgba(0,0,0,0.1)',border:'1px solid #e5e7eb',padding:'1.5rem'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.125rem',fontWeight:'600',color:'#111827',marginBottom:'1rem'},children:\"D\\xEDas Disponibles de Vacaciones\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'2rem',fontWeight:'bold',color:'#10b981',margin:0},children:periodos.reduce((sum,p)=>sum+p.diasDisponibles,0)}),periodos.length>1&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('periodos'),style:{marginTop:'0.5rem',fontSize:'0.75rem',color:'#3b82f6',background:'none',border:'none',cursor:'pointer',textDecoration:'underline'},children:\"Ver detalle por per\\xEDodo\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'0.75rem',boxShadow:'0 1px 3px rgba(0,0,0,0.1)',border:'1px solid #e5e7eb',padding:'1.5rem'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.125rem',fontWeight:'600',color:'#111827',marginBottom:'1rem'},children:\"D\\xEDas de Vacaciones Usados\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'2rem',fontWeight:'bold',color:'#6b7280',margin:0},children:estadisticas.diasUsados||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'0.75rem',boxShadow:'0 1px 3px rgba(0,0,0,0.1)',border:'1px solid #e5e7eb',padding:'1.5rem'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.125rem',fontWeight:'600',color:'#111827',marginBottom:'1rem'},children:\"Pendientes en Mi Nivel\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'2rem',fontWeight:'bold',color:'#f59e0b',margin:0},children:solicitudesPendientes.length})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'0.75rem',boxShadow:'0 1px 3px rgba(0,0,0,0.1)',border:'1px solid #e5e7eb',padding:'1.5rem'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.125rem',fontWeight:'600',color:'#111827',marginBottom:'1rem'},children:\"Total Solicitudes\"}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'1rem',fontWeight:'bold',color:'#3b82f6',margin:0},children:[solicitudes.length,\" solicitudes\",ROLES_APROBACION_MANUAL.includes(user.role)&&/*#__PURE__*/_jsx(\"span\",{style:{display:'block',fontSize:'0.75rem',color:'#dc2626',fontWeight:'500'},children:\"+ Aprobaci\\xF3n Manual\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'0.75rem',boxShadow:'0 1px 3px rgba(0,0,0,0.1)',border:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',borderBottom:'1px solid #e5e7eb',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('solicitar'),style:{flex:1,minWidth:'150px',padding:'1rem',border:'none',background:activeTab==='solicitar'?'#f8fafc':'transparent',color:activeTab==='solicitar'?'#3b82f6':'#6b7280',fontWeight:activeTab==='solicitar'?'600':'500',cursor:'pointer'},children:\"Realizar\"}),periodos.length>1&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('periodos'),style:{flex:1,minWidth:'150px',padding:'1rem',border:'none',background:activeTab==='periodos'?'#f8fafc':'transparent',color:activeTab==='periodos'?'#3b82f6':'#6b7280',fontWeight:activeTab==='periodos'?'600':'500',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(Package,{style:{width:'1rem',height:'1rem'}}),\"Per\\xEDodos (\",periodos.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('historial'),style:{flex:1,minWidth:'150px',padding:'1rem',border:'none',background:activeTab==='historial'?'#f8fafc':'transparent',color:activeTab==='historial'?'#3b82f6':'#6b7280',fontWeight:activeTab==='historial'?'600':'500',cursor:'pointer'},children:[\"Historial (\",solicitudes.length,\")\"]}),['gerente','director','rrhh','gerente_rrhh','director_rrhh'].includes((_user$role3=user.role)===null||_user$role3===void 0?void 0:_user$role3.toLowerCase())&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('aprobar'),style:{flex:1,minWidth:'150px',padding:'1rem',border:'none',background:activeTab==='aprobar'?'#f8fafc':'transparent',color:activeTab==='aprobar'?'#3b82f6':'#6b7280',fontWeight:activeTab==='aprobar'?'600':'500',cursor:'pointer',position:'relative'},children:[\"Aprobar Solicitudes\",solicitudesPendientes.length>0&&/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',top:'0.5rem',right:'0.5rem',background:'#dc2626',color:'white',borderRadius:'50%',width:'1.5rem',height:'1.5rem',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'0.75rem',fontWeight:'bold'},children:solicitudesPendientes.length})]}),ROLES_APROBACION_MANUAL.includes((_user$role4=user.role)===null||_user$role4===void 0?void 0:_user$role4.toLowerCase())&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setActiveTab('entrada_manual');cargarEmpleados();// Cargar empleados al abrir la pestaÃ±a\n},style:{flex:1,minWidth:'150px',padding:'1rem',border:'none',background:activeTab==='entrada_manual'?'#f8fafc':'transparent',color:activeTab==='entrada_manual'?'#3b82f6':'#6b7280',fontWeight:activeTab==='entrada_manual'?'600':'500',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(FileText,{style:{width:'1rem',height:'1rem'}}),\"Entrada Manual\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'2rem'},children:[activeTab==='periodos'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.25rem',fontWeight:'600',color:'#111827',marginBottom:'1.5rem'},children:\"Per\\xEDodos de Vacaciones\"}),/*#__PURE__*/_jsx(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'0.5rem',overflow:'hidden'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:'#f9fafb'},children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem',textAlign:'left',fontSize:'0.875rem',fontWeight:'600',color:'#374151',borderBottom:'1px solid #e5e7eb'},children:\"Per\\xEDodo\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem',textAlign:'right',fontSize:'0.875rem',fontWeight:'600',color:'#374151',borderBottom:'1px solid #e5e7eb'},children:\"Total Acumulado\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[periodos.map((periodo,index)=>/*#__PURE__*/_jsxs(\"tr\",{style:{background:index%2===0?'white':'#f9fafb'},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'1rem',fontSize:'0.875rem',color:'#111827',borderBottom:'1px solid #e5e7eb'},children:periodo.anioInicio&&periodo.anioFin?`${periodo.anioInicio}-${periodo.anioFin}`:periodo.descripcion}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'1rem',textAlign:'right',fontSize:'0.875rem',fontWeight:'500',color:'#111827',borderBottom:'1px solid #e5e7eb'},children:periodo.diasDisponibles})]},periodo.balanceId)),/*#__PURE__*/_jsxs(\"tr\",{style:{background:'#f0f9ff'},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'1rem',fontSize:'0.875rem',fontWeight:'700',color:'#0369a1'},children:\"Total Acumulado\"}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'1rem',textAlign:'right',fontSize:'1rem',fontWeight:'700',color:'#0369a1'},children:periodos.reduce((sum,p)=>sum+p.diasDisponibles,0)})]})]})]})})]}),activeTab==='solicitar'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.25rem',fontWeight:'600',color:'#111827',marginBottom:'1.5rem'},children:\"Nueva Solicitud\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitSolicitud,style:{maxWidth:'32rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:'0.875rem',fontWeight:'500',color:'#374151',marginBottom:'0.5rem'},children:\"Tipo de Solicitud *\"}),/*#__PURE__*/_jsxs(\"select\",{value:solicitudForm.tipo,onChange:e=>setSolicitudForm(prev=>({...prev,tipo:e.target.value})),style:{width:'100%',padding:'0.75rem',border:'1px solid #d1d5db',borderRadius:'0.5rem',fontSize:'1rem'},required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"vacaciones\",children:\"Vacaciones\"}),/*#__PURE__*/_jsx(\"option\",{value:\"permiso\",children:\"Permiso del a\\xF1o\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cumplea\\xF1os\",children:\"Permiso de cumplea\\xF1os\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Certificacion\",children:\"Certificaci\\xF3n Laboral\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'1rem',marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:'0.875rem',fontWeight:'500',color:'#374151',marginBottom:'0.5rem'},children:\"Fecha de Inicio *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:solicitudForm.fechaInicio,onChange:e=>setSolicitudForm(prev=>({...prev,fechaInicio:e.target.value})),min:new Date(Date.now()+86400000).toISOString().split('T')[0],style:{width:'100%',padding:'0.75rem',border:'1px solid #d1d5db',borderRadius:'0.5rem',fontSize:'1rem'},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:'0.875rem',fontWeight:'500',color:'#374151',marginBottom:'0.5rem'},children:\"Fecha de Fin *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:solicitudForm.fechaFin,onChange:e=>setSolicitudForm(prev=>({...prev,fechaFin:e.target.value})),min:solicitudForm.fechaInicio||new Date(Date.now()+86400000).toISOString().split('T')[0],style:{width:'100%',padding:'0.75rem',border:'1px solid #d1d5db',borderRadius:'0.5rem',fontSize:'1rem'},required:true})]})]}),calcularDias()>0&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#f0f9ff',border:'1px solid #bae6fd',borderRadius:'0.5rem',padding:'1rem',marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(8rem, 1fr))',gap:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.75rem',color:'#0369a1',margin:0,marginBottom:'0.25rem',fontWeight:'600'},children:\"D\\xCDAS TOTALES\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'1.5rem',fontWeight:'bold',color:'#0369a1',margin:0},children:calcularDias()})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.75rem',color:'#0369a1',margin:0,marginBottom:'0.25rem',fontWeight:'600'},children:\"D\\xCDAS H\\xC1BILES\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'1.5rem',fontWeight:'bold',color:'#0369a1',margin:0},children:calcularDiasHabiles()})]}),solicitudForm.tipo==='vacaciones'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.75rem',color:'#0369a1',margin:0,marginBottom:'0.25rem',fontWeight:'600'},children:\"D\\xCDAS DISPONIBLES\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'1.5rem',fontWeight:'bold',color:estadisticas.diasDisponibles>=calcularDias()?'#0369a1':'#dc2626',margin:0},children:estadisticas.diasDisponibles})]})]}),solicitudForm.tipo==='vacaciones'&&calcularDias()>estadisticas.diasDisponibles&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'0.75rem',padding:'0.5rem',background:'#fef2f2',border:'1px solid #fecaca',borderRadius:'0.375rem'},children:/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.75rem',color:'#dc2626',margin:0},children:\"\\u26A0\\uFE0F No tienes suficientes d\\xEDas de vacaciones disponibles\"})}),solicitudForm.tipo==='vacaciones'&&periodos.length>1&&calcularDias()<=estadisticas.diasDisponibles&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'0.75rem',padding:'0.5rem',background:'#fef3c7',border:'1px solid #fcd34d',borderRadius:'0.375rem'},children:/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'0.75rem',color:'#92400e',margin:0},children:[\"\\u2139\\uFE0F Tienes \",periodos.length,\" per\\xEDodos disponibles. Podr\\xE1s seleccionar de cu\\xE1l per\\xEDodo usar d\\xEDas.\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',fontSize:'0.875rem',fontWeight:'500',color:'#374151',marginBottom:'0.5rem'},children:\"Motivo / Justificaci\\xF3n *\"}),/*#__PURE__*/_jsx(\"textarea\",{value:solicitudForm.motivo,onChange:e=>setSolicitudForm(prev=>({...prev,motivo:e.target.value})),placeholder:\"Describe el motivo de tu solicitud...\",rows:4,style:{width:'100%',padding:'0.75rem',border:'1px solid #d1d5db',borderRadius:'0.5rem',fontSize:'1rem',resize:'vertical'},required:true})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:loading,style:{background:loading?'#9ca3af':'#3b82f6',color:'white',padding:'0.75rem 1.5rem',borderRadius:'0.5rem',border:'none',fontSize:'1rem',fontWeight:'500',cursor:loading?'not-allowed':'pointer',display:'flex',alignItems:'center',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(Plus,{style:{width:'1rem',height:'1rem'}}),loading?'Enviando...':'Enviar Solicitud']})]})]}),activeTab==='historial'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.25rem',fontWeight:'600',color:'#111827',marginBottom:'1rem'},children:\"Historial de Solicitudes\"}),loading?/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'3rem'},children:/*#__PURE__*/_jsx(\"p\",{children:\"Cargando...\"})}):solicitudes.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'3rem',background:'#f9fafb',borderRadius:'0.5rem',border:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(FileText,{style:{width:'3rem',height:'3rem',color:'#9ca3af',margin:'0 auto 1rem'}}),/*#__PURE__*/_jsx(\"h4\",{style:{fontSize:'1.125rem',fontWeight:'600',color:'#111827',margin:0,marginBottom:'0.5rem'},children:\"No hay solicitudes\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280',margin:0},children:\"A\\xFAn no tienes solicitudes de vacaciones registradas.\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'1rem'},children:solicitudes.map(solicitud=>{const estadoStyle=getEstadoColor(solicitud.estado);const esMia=solicitud.empleadoId===user.empleadoId;const permisoAprobacion=puedeAprobar(solicitud);return/*#__PURE__*/_jsxs(\"div\",{style:{border:esMia?'2px solid #3b82f6':'1px solid #e5e7eb',borderRadius:'0.5rem',padding:'1.5rem',background:esMia?'#f8fafc':'white'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'start',marginBottom:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{style:{fontSize:'1.125rem',fontWeight:'600',color:'#111827',margin:0,marginBottom:'0.5rem'},children:[solicitud.empleado,\" - \",getTipoLabel(solicitud.tipo),esMia&&/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'0.5rem',padding:'0.125rem 0.5rem',borderRadius:'9999px',fontSize:'0.75rem',fontWeight:'500',background:'#dbeafe',color:'#1d4ed8'},children:\"M\\xCDA\"})]}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'0.875rem',color:'#6b7280',margin:0},children:[solicitud.puesto,\" \\u2022 \",solicitud.departamento]})]}),/*#__PURE__*/_jsxs(\"span\",{style:{padding:'0.25rem 0.75rem',borderRadius:'9999px',fontSize:'0.75rem',fontWeight:'500',background:estadoStyle.bg,color:estadoStyle.color,border:`1px solid ${estadoStyle.border}`,textTransform:'capitalize'},children:[solicitud.estado==='pendiente'&&/*#__PURE__*/_jsx(Clock,{style:{width:'0.75rem',height:'0.75rem',display:'inline',marginRight:'0.25rem'}}),solicitud.estado==='aprobada'&&/*#__PURE__*/_jsx(Check,{style:{width:'0.75rem',height:'0.75rem',display:'inline',marginRight:'0.25rem'}}),solicitud.estado==='rechazada'&&/*#__PURE__*/_jsx(X,{style:{width:'0.75rem',height:'0.75rem',display:'inline',marginRight:'0.25rem'}}),solicitud.estado]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(10rem, 1fr))',gap:'1rem',marginBottom:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.75rem',color:'#6b7280',margin:0},children:\"FECHA INICIO\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.875rem',fontWeight:'500',color:'#111827',margin:0},children:new Date(solicitud.fechaInicio).toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.75rem',color:'#6b7280',margin:0},children:\"FECHA FIN\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.875rem',fontWeight:'500',color:'#111827',margin:0},children:new Date(solicitud.fechaFin).toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.75rem',color:'#6b7280',margin:0},children:\"D\\xCDAS\"}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'0.875rem',fontWeight:'500',color:'#111827',margin:0},children:[solicitud.dias,\" d\\xEDas\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.75rem',color:'#6b7280',margin:0},children:\"MOTIVO\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.875rem',color:'#111827',margin:0},children:solicitud.motivo})]}),/*#__PURE__*/_jsx(FlujAprobacion,{flujo:solicitud.flujoAprobacion,estado:solicitud.estado,aprobacionManual:solicitud.aprobacionManual}),permisoAprobacion.puede&&solicitud.estado==='pendiente'&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'1rem',paddingTop:'1rem',borderTop:'1px solid #e5e7eb',display:'flex',gap:'0.75rem',alignItems:'center'},children:[permisoAprobacion.motivo==='manual'&&/*#__PURE__*/_jsx(\"div\",{style:{flex:1,padding:'0.75rem',background:'#fef3c7',border:'1px solid #fcd34d',borderRadius:'0.375rem',fontSize:'0.75rem',color:'#92400e',fontWeight:'500'},children:\"\\u26A0\\uFE0F Aprobaci\\xF3n manual - Debes proporcionar un motivo\"}),permisoAprobacion.motivo==='normal'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:async()=>{try{setLoading(true);await vacacionesService.procesarSolicitud(solicitud.id,{usuarioID:user.id,accion:'aprobada',esManual:false,motivoManual:''});showNotification({title:'Ã‰xito',message:'Solicitud aprobada correctamente.',color:'green'});await cargarDatos();}catch(error){var _error$response5,_error$response5$data;showNotification({title:'Error',message:'Error al aprobar: '+(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.error)||error.message),color:'red'});}finally{setLoading(false);}},disabled:loading,style:{padding:'0.625rem 1.25rem',background:loading?'#9ca3af':'#10b981',color:'white',border:'none',borderRadius:'0.375rem',fontSize:'0.875rem',fontWeight:'500',cursor:loading?'not-allowed':'pointer',display:'flex',alignItems:'center',gap:'0.375rem',transition:'all 0.2s'},onMouseOver:e=>!loading&&(e.target.style.background='#059669'),onMouseOut:e=>!loading&&(e.target.style.background='#10b981'),children:[/*#__PURE__*/_jsx(Check,{style:{width:'1rem',height:'1rem'}}),\"Aprobar\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:async()=>{try{setLoading(true);await vacacionesService.procesarSolicitud(solicitud.id,{usuarioID:user.id,accion:'rechazada',esManual:false,motivoManual:''});// NotificaciÃ³n de Ã©xito\nshowNotification({title:'Ã‰xito',message:'Solicitud rechazada correctamente.',color:'green'});await cargarDatos();}catch(error){var _error$response6,_error$response6$data;// NotificaciÃ³n de error\nshowNotification({title:'Error',message:'Error al rechazar: '+(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.error)||error.message),color:'red'});}finally{setLoading(false);}},disabled:loading,style:{padding:'0.625rem 1.25rem',background:loading?'#9ca3af':'#ef4444',color:'white',border:'none',borderRadius:'0.375rem',fontSize:'0.875rem',fontWeight:'500',cursor:loading?'not-allowed':'pointer',display:'flex',alignItems:'center',gap:'0.375rem',transition:'all 0.2s'},onMouseOver:e=>!loading&&(e.target.style.background='#dc2626'),onMouseOut:e=>!loading&&(e.target.style.background='#ef4444'),children:[/*#__PURE__*/_jsx(X,{style:{width:'1rem',height:'1rem'}}),\"Rechazar\"]})]}):/*#__PURE__*/_jsxs(\"button\",{onClick:()=>openManualModal(solicitud.id,'aprobada'),disabled:loading,style:{padding:'0.625rem 1.25rem',background:loading?'#9ca3af':'#dc2626',color:'white',border:'none',borderRadius:'0.375rem',fontSize:'0.875rem',fontWeight:'500',cursor:loading?'not-allowed':'pointer',display:'flex',alignItems:'center',gap:'0.375rem'},children:[/*#__PURE__*/_jsx(Edit,{style:{width:'1rem',height:'1rem'}}),\"Aprobaci\\xF3n Manual\"]})]})]},solicitud.id);})})]}),activeTab==='aprobar'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{style:{fontSize:'1.25rem',fontWeight:'600',color:'#111827',marginBottom:'1rem'},children:[\"Solicitudes Pendientes (\",solicitudesPendientes.length,\")\"]}),ROLES_APROBACION_MANUAL.includes(user.role)&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fef3c7',border:'1px solid #fcd34d',borderRadius:'0.5rem',padding:'1rem',marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontSize:'0.875rem',fontWeight:'600',color:'#92400e',margin:0,marginBottom:'0.5rem'},children:\"\\uD83D\\uDD11 Privilegios de Aprobaci\\xF3n Manual\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.75rem',color:'#92400e',margin:0},children:\"Puedes realizar aprobaciones manuales que saltan el flujo normal.\"})]}),solicitudesPendientes.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'3rem',background:'#f9fafb',borderRadius:'0.5rem',border:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(Users,{style:{width:'3rem',height:'3rem',color:'#9ca3af',margin:'0 auto 1rem'}}),/*#__PURE__*/_jsx(\"h4\",{style:{fontSize:'1.125rem',fontWeight:'600',color:'#111827',margin:0},children:\"No hay solicitudes pendientes\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'1rem'},children:solicitudesPendientes.map(solicitud=>{const permisos=puedeAprobar(solicitud);const esNormal=permisos.motivo==='normal';return/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'0.5rem',padding:'1.5rem',background:esNormal?'#fffbeb':'#fef3c7'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'1rem'},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{style:{fontSize:'1.125rem',fontWeight:'600',color:'#111827',margin:0},children:[solicitud.empleado,\" - \",getTipoLabel(solicitud.tipo)]}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'0.875rem',color:'#6b7280',margin:0},children:[solicitud.dias,\" d\\xEDas \\u2022 \",new Date(solicitud.fechaInicio).toLocaleDateString(),\" - \",new Date(solicitud.fechaFin).toLocaleDateString()]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.75rem',color:'#6b7280',margin:0},children:\"MOTIVO\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.875rem',color:'#111827',margin:0},children:solicitud.motivo})]}),/*#__PURE__*/_jsx(FlujAprobacion,{flujo:solicitud.flujoAprobacion,estado:solicitud.estado}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'1.5rem',display:'flex',gap:'0.75rem'},children:esNormal?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:async()=>{try{setLoading(true);await vacacionesService.procesarSolicitud(solicitud.id,{usuarioID:user.id,accion:'aprobada',esManual:false,motivoManual:''});// âœ… NotificaciÃ³n moderna\nshowNotification({title:'Ã‰xito',message:'Solicitud aprobada correctamente',color:'green'// 'green' para Ã©xito, 'red' para error, 'yellow' para advertencia\n});await cargarDatos();}catch(error){var _error$response7,_error$response7$data;showNotification({title:'Error',message:'Error al aprobar: '+(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.error)||error.message),color:'red'// 'red' para errores\n});}finally{setLoading(false);}},disabled:loading,style:{display:'flex',alignItems:'center',gap:'0.5rem',padding:'0.5rem 1rem',background:loading?'#9ca3af':'#10b981',color:'white',border:'none',borderRadius:'0.375rem',fontSize:'0.875rem',fontWeight:'500',cursor:loading?'not-allowed':'pointer'},children:[/*#__PURE__*/_jsx(Check,{style:{width:'1rem',height:'1rem'}}),\"Aprobar\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:async()=>{try{setLoading(true);await vacacionesService.procesarSolicitud(solicitud.id,{usuarioID:user.id,accion:'rechazada',esManual:false,motivoManual:''});// âœ… NotificaciÃ³n unificada\nshowNotification({title:'Ã‰xito',message:'Solicitud rechazada correctamente',color:'green'// 'green' indica Ã©xito\n});await cargarDatos();}catch(error){var _error$response8,_error$response8$data;showNotification({title:'Error',message:'Error al rechazar: '+(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.error)||error.message),color:'red'// ðŸ”´ rojo para error\n});}finally{setLoading(false);}},disabled:loading,style:{display:'flex',alignItems:'center',gap:'0.5rem',padding:'0.5rem 1rem',background:loading?'#9ca3af':'#ef4444',color:'white',border:'none',borderRadius:'0.375rem',fontSize:'0.875rem',fontWeight:'500',cursor:loading?'not-allowed':'pointer'},children:[/*#__PURE__*/_jsx(X,{style:{width:'1rem',height:'1rem'}}),\"Rechazar\"]})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>openManualModal(solicitud.id,'aprobada'),disabled:loading,style:{display:'flex',alignItems:'center',gap:'0.5rem',padding:'0.5rem 1rem',background:loading?'#9ca3af':'#dc2626',color:'white',border:'none',borderRadius:'0.375rem',fontSize:'0.875rem',fontWeight:'500',cursor:loading?'not-allowed':'pointer'},children:[/*#__PURE__*/_jsx(Edit,{style:{width:'1rem',height:'1rem'}}),\"Aprobaci\\xF3n Manual\"]})})})]},solicitud.id);})})]}),activeTab==='entrada_manual'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fef3c7',border:'1px solid #fcd34d',borderRadius:'0.5rem',padding:'1rem',marginBottom:'2rem',display:'flex',alignItems:'center',gap:'0.75rem'},children:[/*#__PURE__*/_jsx(AlertTriangle,{style:{width:'1.25rem',height:'1.25rem',color:'#92400e'}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontSize:'0.875rem',fontWeight:'600',color:'#92400e',margin:0,marginBottom:'0.25rem'},children:\"Entrada Manual de Solicitudes Ejecutadas\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'0.75rem',color:'#92400e',margin:0},children:\"Registra solicitudes que YA fueron ejecutadas para descontar los d\\xEDas del balance.\"})]})]}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.25rem',fontWeight:'600',color:'#111827',marginBottom:'1.5rem'},children:\"Registrar Solicitud Ejecutada\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:async e=>{e.preventDefault();if(!entradaManualForm.empleadoId){showNotification({title:'Error',message:'Debes seleccionar un empleado',color:'red'});return;}const inicio=new Date(entradaManualForm.fechaInicio);const fin=new Date(entradaManualForm.fechaFin);if(fin<inicio){showNotification({title:'Error',message:'La fecha de fin debe ser posterior a la fecha de inicio',color:'red'});return;}const diffTime=fin-inicio;const dias=Math.ceil(diffTime/(1000*60*60*24))+1;let diasHabiles=0;for(let d=new Date(inicio);d<=fin;d.setDate(d.getDate()+1)){const diaSemana=d.getDay();if(diaSemana!==0&&diaSemana!==6)diasHabiles++;}try{setLoading(true);await vacacionesService.crearSolicitudManual({empleadoId:entradaManualForm.empleadoId,tipo:entradaManualForm.tipoSolicitud,fechaInicio:entradaManualForm.fechaInicio,fechaFin:entradaManualForm.fechaFin,dias:dias,diasHabiles:diasHabiles,motivo:`[ENTRADA MANUAL - RRHH] ${entradaManualForm.justificacion}${entradaManualForm.documentoReferencia?` | Ref: ${entradaManualForm.documentoReferencia}`:''}`});showNotification({title:'Ã‰xito',message:`Solicitud registrada y ${dias} dÃ­as descontados del balance de ${entradaManualForm.empleadoNombre}`,color:'green'});setEntradaManualForm({empleadoId:null,empleadoNombre:'',tipoSolicitud:'vacaciones',fechaInicio:'',fechaFin:'',justificacion:'',documentoReferencia:''});setEmpleadoBusqueda('');await cargarDatos();}catch(error){var _error$response9,_error$response9$data;showNotification({title:'Error',message:'Error al registrar: '+(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.error)||error.message),color:'red'});}finally{setLoading(false);}},style:{maxWidth:'48rem'}})]})]})]})]})]});};export default VacacionesModule;","map":{"version":3,"names":["React","useState","useEffect","useAuth","useApp","vacacionesService","empleadosService","Calendar","Plus","Clock","Check","X","FileText","Users","ArrowRight","AlertTriangle","Edit","Package","showNotification","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","VacacionesModule","_user$role","_user$role3","_user$role4","user","console","log","role","toLowerCase","replace","activeTab","setActiveTab","loading","setLoading","solicitudes","setSolicitudes","estadisticas","setEstadisticas","diasTotales","diasUsados","diasDisponibles","solicitudSeleccionada","setSolicitudSeleccionada","mostrarModalAprobacion","setMostrarModalAprobacion","mostrarModalRechazo","setMostrarModalRechazo","periodos","setPeriodos","diasPendientes","showManualModal","setShowManualModal","manualApprovalData","setManualApprovalData","solicitudId","motivo","accion","showPeriodosModal","setShowPeriodosModal","periodosSeleccionados","setPeriodosSeleccionados","solicitudForm","setSolicitudForm","fechaInicio","fechaFin","tipo","empleados","setEmpleados","empleadoBusqueda","setEmpleadoBusqueda","mostrarListaEmpleados","setMostrarListaEmpleados","entradaManualForm","setEntradaManualForm","empleadoId","empleadoNombre","tipoSolicitud","justificacion","documentoReferencia","ROLES_APROBACION_MANUAL","ROLES_LABELS","cargarSolicitudes","response","obtenerSolicitudes","data","error","cargarEmpleados","getEmpleados","title","message","color","id","cargarDatos","solicitudesData","getSolicitudes","statsData","getEstadisticasDetalladas","totales","calcularDias","inicio","Date","fin","diffTime","diffDays","Math","ceil","calcularDiasHabiles","diasHabiles","d","setDate","getDate","diaSemana","getDay","abrirModalPeriodos","diasSolicitados","seleccionInicial","diasRestantes","periodo","balanceId","BalanceID","DiasDisponibles","DiasPendientes","descripcion","Descripcion","anioInicio","AnioInicio","anioFin","AnioFin","diasAUsar","min","push","dias","type","actualizarDiasPeriodo","nuevosDias","prev","map","p","parseInt","calcularTotalSeleccionado","reduce","sum","handleSubmitSolicitud","e","preventDefault","length","trim","crearSolicitudDirecta","crearSolicitud","_error$response","_error$response$data","confirmarSolicitudConPeriodos","totalSeleccionado","crearSolicitudConPeriodos","_error$response2","_error$response2$data","handleManualApproval","procesarSolicitud","usuarioID","esManual","motivoManual","_error$response3","_error$response3$data","openManualModal","arguments","undefined","puedeAprobar","solicitud","_user$role2","_nivelPendiente$rol","flujoAprobacion","Array","isArray","tieneFlujo","esArray","puede","nivelPendiente","find","nivel","niveles","n","rol","rolUsuario","rolPendiente","empleado","coincide","flujoCompleto","includes","solicitudesPendientes","filter","sol","estado","permisos","getEstadoColor","bg","border","getTipoLabel","getEtiquetaVista","FlujAprobacion","_ref","flujo","aprobacionManual","style","marginTop","padding","background","borderRadius","children","display","alignItems","justifyContent","marginBottom","fontSize","fontWeight","margin","gap","flexWrap","index","_flujo","isCompleted","isCurrent","width","height","orden","some","aprobadoPor","marginLeft","fecha","toLocaleString","fontStyle","minHeight","position","top","left","right","bottom","zIndex","maxWidth","maxHeight","overflow","boxShadow","flexDirection","max","value","onChange","target","onClick","cursor","disabled","_error$response4","_error$response4$data","placeholder","rows","resize","gridTemplateColumns","textDecoration","borderBottom","flex","minWidth","borderCollapse","textAlign","onSubmit","required","now","toISOString","split","estadoStyle","esMia","permisoAprobacion","puesto","departamento","textTransform","marginRight","toLocaleDateString","paddingTop","borderTop","_error$response5","_error$response5$data","transition","onMouseOver","onMouseOut","_error$response6","_error$response6$data","esNormal","_error$response7","_error$response7$data","_error$response8","_error$response8$data","crearSolicitudManual","_error$response9","_error$response9$data"],"sources":["C:/Users/josemontedeoca/rrhh-system/frontend/src/components/modules/vacaciones/VacacionesModule.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../../context/AuthContext';\r\nimport { useApp } from '../../../context/AppContext';\r\nimport vacacionesService from '../../../api/vacacionesService';\r\nimport empleadosService from '../../../api/empleadosService';\r\nimport { Calendar, Plus, Clock, Check, X, FileText, Users, ArrowRight, AlertTriangle, Edit, Package } from 'lucide-react';\r\nimport { showNotification } from '@mantine/notifications';\r\n\r\n\r\nconst VacacionesModule = () => {\r\n  const { user } = useAuth();\r\n // const { showNotification } = useApp();  //  Solo obtener showNotification\r\n   \r\n // const notify = (message, type = 'info') => {\r\n  //  if (showNotification) {\r\n   //   showNotification({ type, message });\r\n   // } else {\r\n   //   console.warn('showNotification no disponible:', message);\r\n  //  }\r\n // };\r\n\r\n  // âœ… LOGS DETALLADOS\r\n  console.log('ðŸ” Usuario completo:', user);\r\n  console.log('ðŸ” ROL DEL USUARIO:', user.role);\r\n  console.log('ðŸ” ROL NORMALIZADO:', user.role?.toLowerCase().replace(/\\s+/g, '_'));\r\n\r\n  const [activeTab, setActiveTab] = useState('solicitar');\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  // Estados principales\r\n  const [solicitudes, setSolicitudes] = useState([]);\r\n  const [estadisticas, setEstadisticas] = useState({\r\n    diasTotales: 0,\r\n    diasUsados: 0,\r\n    diasDisponibles: 0\r\n  });\r\n\r\n  const [solicitudSeleccionada, setSolicitudSeleccionada] = useState(null);\r\n  const [mostrarModalAprobacion, setMostrarModalAprobacion] = useState(false);\r\n  const [mostrarModalRechazo, setMostrarModalRechazo] = useState(false);\r\n\r\n  const [periodos, setPeriodos] = useState([]);\r\n\r\n  const diasDisponibles = estadisticas?.diasDisponibles || 0;\r\n  const diasUsados = estadisticas?.diasUsados || 0;\r\n  const diasTotales = estadisticas?.diasTotales || 0;\r\n  const diasPendientes = estadisticas?.diasPendientes || 0;\r\n\r\n  // Modal de aprobaciÃ³n manual\r\n  const [showManualModal, setShowManualModal] = useState(false);\r\n  const [manualApprovalData, setManualApprovalData] = useState({\r\n    solicitudId: null,\r\n    motivo: '',\r\n    accion: 'aprobada'\r\n  });\r\n\r\n  // Modal de selecciÃ³n de perÃ­odos\r\n  const [showPeriodosModal, setShowPeriodosModal] = useState(false);\r\n  const [periodosSeleccionados, setPeriodosSeleccionados] = useState([]);\r\n\r\n  // Formulario de solicitud\r\n  const [solicitudForm, setSolicitudForm] = useState({\r\n    fechaInicio: '',\r\n    fechaFin: '',\r\n    motivo: '',\r\n    tipo: 'vacaciones'\r\n  });\r\n\r\n  // Estados para entrada manual\r\n  const [empleados, setEmpleados] = useState([]);\r\n  const [empleadoBusqueda, setEmpleadoBusqueda] = useState('');\r\n  const [mostrarListaEmpleados, setMostrarListaEmpleados] = useState(false);\r\n  const [entradaManualForm, setEntradaManualForm] = useState({\r\n    empleadoId: null,\r\n    empleadoNombre: '',\r\n    tipoSolicitud: 'vacaciones',\r\n    fechaInicio: '',\r\n    fechaFin: '',\r\n    justificacion: '',\r\n    documentoReferencia: ''\r\n  });\r\n\r\n  // Roles con aprobaciÃ³n manual (RRHH)\r\n  const ROLES_APROBACION_MANUAL = ['rrhh', 'gerente_rrhh', 'director_rrhh'];\r\n\r\n  const ROLES_LABELS = {\r\n  'gerente': 'Gerente',\r\n  'director': 'Director',\r\n  'gerente_rrhh': 'Gerente RRHH',\r\n  'director_rrhh': 'Director RRHH',\r\n  'rrhh': 'RRHH',\r\n  'colaborador': 'Colaborador'\r\n};\r\n\r\n// FunciÃ³n para mostrar notificaciones (usa los helpers globales si existen)\r\n  \r\n\r\n  // FunciÃ³n para recargar las solicitudes\r\n  const cargarSolicitudes = async () => {\r\n    try {\r\n      const response = await vacacionesService.obtenerSolicitudes();\r\n      setSolicitudes(response.data || []);\r\n    } catch (error) {\r\n      showNotification('Error al cargar las solicitudes', 'error');\r\n    }\r\n  };\r\n\r\n  const cargarEmpleados = async () => {\r\n  try {\r\n    const response = await empleadosService.getEmpleados();\r\n    setEmpleados(response.data || []);\r\n  } catch (error) {\r\n    console.error('Error al cargar empleados:', error);\r\n    showNotification({\r\n      title: 'Error',\r\n      message: 'Error al cargar lista de empleados',\r\n      color: 'red'\r\n    });\r\n  }\r\n};\r\n\r\n  // Cargar datos al montar\r\n  useEffect(() => {\r\n    if (user?.id && user?.empleadoId) {\r\n      cargarDatos();\r\n    }\r\n  }, [user]);\r\n\r\n  const cargarDatos = async () => {\r\n  try {\r\n    setLoading(true);\r\n    \r\n    const solicitudesData = await vacacionesService.getSolicitudes(user.id, user.role);\r\n    setSolicitudes(solicitudesData);\r\n    \r\n    // Cargar estadÃ­sticas detalladas\r\n    const statsData = await vacacionesService.getEstadisticasDetalladas(user.empleadoId);\r\n    console.log('EstadÃ­sticas recibidas:', statsData);\r\n    \r\n    // Validar que exista el objeto totales\r\n    if (statsData.totales) {\r\n      setEstadisticas(statsData.totales);\r\n    } else {\r\n      // Fallback si no existe\r\n      setEstadisticas({\r\n        diasTotales: 0,\r\n        diasUsados: 0,\r\n        diasDisponibles: 0,\r\n        diasPendientes: 0\r\n      });\r\n    }\r\n    \r\n    setPeriodos(statsData.periodos || []);\r\n  } catch (error) {\r\n  showNotification('Error al cargar datos de vacaciones', 'error');\r\n  console.error('Error:', error);\r\n    \r\n    // Establecer valores por defecto en caso de error\r\n    setEstadisticas({\r\n      diasTotales: 0,\r\n      diasUsados: 0,\r\n      diasDisponibles: 0,\r\n      diasPendientes: 0\r\n    });\r\n    setPeriodos([]);\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n  // Calcular dÃ­as\r\n  const calcularDias = () => {\r\n    if (solicitudForm.fechaInicio && solicitudForm.fechaFin) {\r\n      const inicio = new Date(solicitudForm.fechaInicio);\r\n      const fin = new Date(solicitudForm.fechaFin);\r\n      const diffTime = fin - inicio;\r\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;\r\n      return diffDays > 0 ? diffDays : 0;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  const calcularDiasHabiles = () => {\r\n    if (solicitudForm.fechaInicio && solicitudForm.fechaFin) {\r\n      const inicio = new Date(solicitudForm.fechaInicio);\r\n      const fin = new Date(solicitudForm.fechaFin);\r\n      let diasHabiles = 0;\r\n      \r\n      for (let d = new Date(inicio); d <= fin; d.setDate(d.getDate() + 1)) {\r\n        const diaSemana = d.getDay();\r\n        if (diaSemana !== 0 && diaSemana !== 6) {\r\n          diasHabiles++;\r\n        }\r\n      }\r\n      return diasHabiles;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  // Abrir modal de perÃ­odos\r\n  // Abrir modal de perÃ­odos\r\nconst abrirModalPeriodos = () => {\r\n  console.log('ðŸ”§ Abriendo modal de perÃ­odos');\r\n  console.log('ðŸ“‹ PerÃ­odos disponibles:', periodos);\r\n  \r\n  try {\r\n    const diasSolicitados = calcularDias();\r\n    const seleccionInicial = [];\r\n    let diasRestantes = diasSolicitados;\r\n    \r\n    for (const periodo of periodos) {\r\n      if (diasRestantes <= 0) break;\r\n      \r\n      // âœ… Normalizar nombres de campos (SQL Server usa MAYÃšSCULAS, JS usa camelCase)\r\n      const balanceId = periodo.balanceId || periodo.BalanceID || periodo.id;\r\n      const diasDisponibles = periodo.diasDisponibles || periodo.DiasDisponibles || periodo.DiasPendientes;\r\n      const descripcion = periodo.descripcion || periodo.Descripcion || \r\n                         `${periodo.anioInicio || periodo.AnioInicio}-${periodo.anioFin || periodo.AnioFin}`;\r\n      \r\n      if (!balanceId) {\r\n        console.error('âš ï¸ PerÃ­odo sin balanceId:', periodo);\r\n        continue;\r\n      }\r\n      \r\n      const diasAUsar = Math.min(diasRestantes, diasDisponibles);\r\n      \r\n      if (diasAUsar > 0) {\r\n        seleccionInicial.push({\r\n          balanceId: balanceId,\r\n          descripcion: descripcion,\r\n          diasDisponibles: diasDisponibles,\r\n          dias: diasAUsar\r\n        });\r\n        diasRestantes -= diasAUsar;\r\n        console.log(`âœ… PerÃ­odo agregado: ${descripcion} - ${diasAUsar} dÃ­as`);\r\n      }\r\n    }\r\n    \r\n    console.log('ðŸ“¦ SelecciÃ³n inicial:', seleccionInicial);\r\n    setPeriodosSeleccionados(seleccionInicial);\r\n    setShowPeriodosModal(true);\r\n  } catch (error) {\r\n  console.error('âŒ Error en abrirModalPeriodos:', error);\r\n  showNotification({\r\n    type: 'error',\r\n    message: 'Error al abrir selecciÃ³n de perÃ­odos'\r\n  });\r\n}\r\n};\r\n\r\n\r\n  // Actualizar dÃ­as de un perÃ­odo seleccionado\r\n  const actualizarDiasPeriodo = (balanceId, nuevosDias) => {\r\n    setPeriodosSeleccionados(prev => \r\n      prev.map(p => p.balanceId === balanceId ? { ...p, dias: parseInt(nuevosDias) || 0 } : p)\r\n    );\r\n  };\r\n\r\n  // Calcular total de dÃ­as seleccionados\r\n  const calcularTotalSeleccionado = () => {\r\n    return periodosSeleccionados.reduce((sum, p) => sum + p.dias, 0);\r\n  };\r\n\r\n  // Crear solicitud con perÃ­odos\r\n // Crear solicitud con perÃ­odos\r\nconst handleSubmitSolicitud = async (e) => {\r\n  e.preventDefault();\r\n  \r\n  console.log('=== DEBUG SUBMIT ===');\r\n  console.log('Tipo solicitud:', solicitudForm.tipo);\r\n  console.log('Cantidad de perÃ­odos:', periodos.length);\r\n  console.log('PerÃ­odos:', periodos);\r\n  \r\n  if (!solicitudForm.fechaInicio || !solicitudForm.fechaFin || !solicitudForm.motivo.trim()) {\r\n  showNotification('Por favor completa todos los campos obligatorios', 'error');\r\n  return;\r\n}\r\n\r\n\r\n  const inicio = new Date(solicitudForm.fechaInicio);\r\n  const fin = new Date(solicitudForm.fechaFin);\r\n  \r\n  if (inicio >= fin) {\r\n  showNotification({\r\n    type: 'error',\r\n    message: 'La fecha de fin debe ser posterior a la fecha de inicio'\r\n  });\r\n  return;\r\n}\r\n\r\nif (inicio <= new Date()) {\r\n  showNotification({\r\n    type: 'error',\r\n    message: 'La fecha de inicio debe ser futura'\r\n  });\r\n  return;\r\n}\r\n\r\nconst diasSolicitados = calcularDias();\r\n\r\nif (diasSolicitados > diasDisponibles && solicitudForm.tipo === 'vacaciones') {\r\n  showNotification({\r\n    type: 'error',\r\n    message: `No tienes suficientes dÃ­as disponibles. Solicitas ${diasSolicitados} dÃ­as pero solo tienes ${diasDisponibles} disponibles.`\r\n  });\r\n  return;\r\n}\r\n\r\n\r\n  console.log('Â¿Abrir modal?', solicitudForm.tipo === 'vacaciones' && periodos.length > 1);\r\n  \r\n  if (solicitudForm.tipo === 'vacaciones' && periodos.length > 1) {\r\n    console.log('ABRIENDO MODAL');\r\n    abrirModalPeriodos();\r\n    return;\r\n  }\r\n\r\n  console.log('Crear solicitud directa');\r\n  await crearSolicitudDirecta();\r\n};\r\n\r\n  const crearSolicitudDirecta = async () => {\r\n  setLoading(true);\r\n\r\n  try {\r\n    const diasSolicitados = calcularDias();\r\n\r\n    // Llamada al servicio para crear la solicitud\r\n    await vacacionesService.crearSolicitud({\r\n      empleadoId: user.empleadoId,\r\n      tipo: solicitudForm.tipo,\r\n      fechaInicio: solicitudForm.fechaInicio,\r\n      fechaFin: solicitudForm.fechaFin,\r\n      dias: diasSolicitados,\r\n      diasHabiles: calcularDiasHabiles(),\r\n      motivo: solicitudForm.motivo,\r\n    });\r\n\r\n    // Recargar datos despuÃ©s de crear la solicitud\r\n    await cargarDatos();\r\n\r\n    // NotificaciÃ³n de Ã©xito\r\n    showNotification({\r\n      title: 'Ã‰xito',\r\n      message: `Solicitud de ${diasSolicitados} dÃ­as enviada correctamente.`,\r\n      color: 'green',\r\n    });\r\n\r\n    // Reiniciar formulario\r\n    setSolicitudForm({\r\n      fechaInicio: '',\r\n      fechaFin: '',\r\n      motivo: '',\r\n      tipo: 'vacaciones',\r\n    });\r\n\r\n  } catch (error) {\r\n    // NotificaciÃ³n de error\r\n    showNotification({\r\n      title: 'Error',\r\n      message: 'Error al crear solicitud: ' + (error.response?.data?.error || error.message),\r\n      color: 'red',\r\n    });\r\n\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n\r\nconst confirmarSolicitudConPeriodos = async () => {\r\n  const diasSolicitados = calcularDias();\r\n  const totalSeleccionado = calcularTotalSeleccionado();\r\n\r\n  if (totalSeleccionado !== diasSolicitados) {\r\n  showNotification({\r\n    title: 'AtenciÃ³n',\r\n    message: `La suma de dÃ­as seleccionados (${totalSeleccionado}) debe ser igual a los dÃ­as solicitados (${diasSolicitados})`,\r\n    color: 'yellow', \r\n  });\r\n  return;\r\n}\r\n\r\n\r\n  try {\r\n    setLoading(true);\r\n\r\n    await vacacionesService.crearSolicitudConPeriodos({\r\n      empleadoId: user.empleadoId,\r\n      tipo: solicitudForm.tipo,\r\n      fechaInicio: solicitudForm.fechaInicio,\r\n      fechaFin: solicitudForm.fechaFin,\r\n      dias: diasSolicitados,\r\n      diasHabiles: calcularDiasHabiles(),\r\n      motivo: solicitudForm.motivo,\r\n      periodosSeleccionados: periodosSeleccionados.map(p => ({\r\n        balanceId: p.balanceId,\r\n        dias: p.dias\r\n      }))\r\n    });\r\n\r\n    // Resetear formulario ANTES de recargar datos\r\n    setSolicitudForm({\r\n      fechaInicio: '',\r\n      fechaFin: '',\r\n      motivo: '',\r\n      tipo: 'vacaciones'\r\n    });\r\n    \r\n    setShowPeriodosModal(false);\r\n    setPeriodosSeleccionados([]);\r\n    \r\n    // Recargar datos al final\r\n    await cargarDatos();\r\n\r\n    \r\n  // Mostrar mensaje de Ã©xito\r\n  showNotification({\r\n    title: 'Ã‰xito',\r\n    message: `Solicitud de ${diasSolicitados} dÃ­as enviada correctamente.`,\r\n    color: 'green',\r\n  });\r\n\r\n    } catch (error) {\r\n  console.error('Error:', error);\r\n  showNotification({\r\n    title: 'Error',\r\n    message: 'Error al crear solicitud: ' + (error?.response?.data?.error || error?.message || 'Error desconocido'),\r\n    color: 'red',\r\n  });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n\r\n};\r\n\r\n  const handleManualApproval = async () => {\r\n  if (!manualApprovalData.motivo.trim()) {\r\n    showNotification({\r\n      title: 'AtenciÃ³n',\r\n      message: 'Debes proporcionar un motivo para la aprobaciÃ³n manual',\r\n      color: 'red', // 'red' para error\r\n    });\r\n    return;\r\n  }\r\n\r\n  try {\r\n    setLoading(true);\r\n    await vacacionesService.procesarSolicitud(manualApprovalData.solicitudId, {\r\n      usuarioID: user.id,\r\n      accion: manualApprovalData.accion,\r\n      esManual: true,\r\n      motivoManual: manualApprovalData.motivo\r\n    });\r\n\r\n    // NotificaciÃ³n de Ã©xito\r\n      showNotification({\r\n        title: 'Ã‰xito',\r\n        message:\r\n          manualApprovalData.accion === 'aprobada'\r\n            ? 'Solicitud aprobada manualmente'\r\n            : 'Solicitud rechazada manualmente',\r\n        color: 'green',\r\n      });\r\n\r\n    await cargarDatos();\r\n  } catch (error) {\r\n  // NotificaciÃ³n de error\r\n  showNotification({\r\n    title: 'Error',\r\n    message: 'Error al procesar: ' + (error.response?.data?.error || error.message),\r\n    color: 'red',\r\n  });\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n\r\n  setShowManualModal(false);\r\n  setManualApprovalData({\r\n    solicitudId: null,\r\n    motivo: '',\r\n    accion: 'aprobada'\r\n  });\r\n\r\n};\r\n\r\n  const openManualModal = (solicitudId, accion = 'aprobada') => {\r\n    setManualApprovalData({\r\n      solicitudId,\r\n      motivo: '',\r\n      accion\r\n    });\r\n    setShowManualModal(true);\r\n  };\r\n\r\n  // Verificar si puede aprobar\r\n // Verificar si puede aprobar\r\nconst puedeAprobar = (solicitud) => {\r\n  if (!solicitud.flujoAprobacion || !Array.isArray(solicitud.flujoAprobacion)) {\r\n    console.log('âŒ Sin flujo o no es array:', {\r\n      solicitudId: solicitud.id,\r\n      tieneFlujo: !!solicitud.flujoAprobacion,\r\n      esArray: Array.isArray(solicitud.flujoAprobacion)\r\n    });\r\n    return { puede: false };\r\n  }\r\n  \r\n  // Encontrar el primer nivel pendiente (sin accion)\r\n  const nivelPendiente = solicitud.flujoAprobacion.find(nivel => !nivel.accion);\r\n  \r\n  if (!nivelPendiente) {\r\n    console.log('â­ï¸ No hay niveles pendientes (todo aprobado/rechazado):', {\r\n      solicitudId: solicitud.id,\r\n      niveles: solicitud.flujoAprobacion.map(n => ({rol: n.rol, accion: n.accion}))\r\n    });\r\n    return { puede: false };\r\n  }\r\n  \r\n  // Normalizar roles para comparaciÃ³n\r\n  const rolUsuario = user.role?.toLowerCase().replace(/\\s+/g, '_');\r\n  const rolPendiente = nivelPendiente.rol?.toLowerCase().replace(/\\s+/g, '_');\r\n  \r\n  console.log('ðŸ” Verificando permisos detallados:', {\r\n    solicitudId: solicitud.id,\r\n    empleado: solicitud.empleado,\r\n    rolUsuario,\r\n    rolPendiente,\r\n    nivelPendiente,\r\n    coincide: rolUsuario === rolPendiente,\r\n    flujoCompleto: solicitud.flujoAprobacion\r\n  });\r\n  \r\n  // Si el rol del usuario coincide con el nivel pendiente\r\n  if (rolUsuario === rolPendiente) {\r\n    console.log('âœ… PUEDE APROBAR - Rol coincide');\r\n    return { puede: true, motivo: 'normal' };\r\n  }\r\n  \r\n  // RRHH puede hacer aprobaciÃ³n manual\r\n  if (ROLES_APROBACION_MANUAL.includes(user.role)) {\r\n    console.log('âœ… PUEDE APROBAR - AprobaciÃ³n manual (RRHH)');\r\n    return { puede: true, motivo: 'manual' };\r\n  }\r\n  \r\n  console.log('âŒ NO PUEDE APROBAR');\r\n  return { puede: false };\r\n};\r\n\r\n  // Obtener solicitudes pendientes\r\n  const solicitudesPendientes = solicitudes.filter(sol => {\r\n    if (sol.estado !== 'pendiente') return false;\r\n    const permisos = puedeAprobar(sol);\r\n    return permisos.puede;\r\n  });\r\n\r\n  const getEstadoColor = (estado) => {\r\n    switch (estado) {\r\n      case 'aprobada': return { bg: '#f0fdf4', color: '#166534', border: '#bbf7d0' };\r\n      case 'rechazada': return { bg: '#fef2f2', color: '#dc2626', border: '#fecaca' };\r\n      case 'pendiente': return { bg: '#fff7ed', color: '#ea580c', border: '#fed7aa' };\r\n      default: return { bg: '#f9fafb', color: '#374151', border: '#e5e7eb' };\r\n    }\r\n  };\r\n\r\n  const getTipoLabel = (tipo) => {\r\n    switch (tipo) {\r\n      case 'vacaciones': return 'Vacaciones';\r\n      case 'permiso': return 'Permiso Personal';\r\n      case 'medico': return 'Permiso MÃ©dico';\r\n      default: return tipo;\r\n    }\r\n  };\r\n\r\n  const getEtiquetaVista = () => {\r\n    switch (user.role) {\r\n      case 'Director RRHH':\r\n      case 'Gerente RRHH':\r\n        return 'Vista Global Completa - Toda la Empresa';\r\n      case 'RRHH':\r\n        return 'Vista RRHH - Gerentes y Colaboradores';\r\n      case 'Director':\r\n        return 'Vista Directiva - Gerentes y Colaboradores';\r\n      case 'Gerente':\r\n        return 'Vista Gerencial - Colaboradores Directos';\r\n      default:\r\n        return 'Vista Personal - Mis Solicitudes';\r\n    }\r\n  };\r\n\r\n  const FlujAprobacion = ({ flujo, estado, aprobacionManual }) => {\r\n  if (!flujo || !Array.isArray(flujo) || flujo.length === 0) return null;\r\n  \r\n  return (\r\n    <div style={{ marginTop: '1rem', padding: '1rem', background: '#f8fafc', borderRadius: '0.5rem', border: '1px solid #e2e8f0' }}>\r\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '0.75rem' }}>\r\n        <h5 style={{ fontSize: '0.875rem', fontWeight: '600', color: '#374151', margin: 0 }}>\r\n          Flujo de AprobaciÃ³n\r\n        </h5>\r\n        {aprobacionManual && (\r\n          <span style={{\r\n            padding: '0.25rem 0.5rem',\r\n            borderRadius: '9999px',\r\n            fontSize: '0.625rem',\r\n            fontWeight: '600',\r\n            background: '#fef3c7',\r\n            color: '#92400e',\r\n            border: '1px solid #fcd34d'\r\n          }}>\r\n            APROBACIÃ“N MANUAL\r\n          </span>\r\n        )}\r\n      </div>\r\n\r\n      <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', flexWrap: 'wrap' }}>\r\n        {flujo.map((nivel, index) => {\r\n          const isCompleted = nivel.accion !== null;\r\n          const isCurrent = nivel.accion === null && \r\n                           (index === 0 || flujo[index - 1]?.accion !== null);\r\n          \r\n          return (\r\n            <React.Fragment key={nivel.orden || index}>\r\n              <div style={{\r\n                padding: '0.25rem 0.75rem',\r\n                borderRadius: '9999px',\r\n                fontSize: '0.75rem',\r\n                fontWeight: '500',\r\n                background: isCompleted ? '#f0fdf4' : isCurrent ? '#fff7ed' : '#f1f5f9',\r\n                color: isCompleted ? '#166534' : isCurrent ? '#ea580c' : '#64748b',\r\n                border: `1px solid ${isCompleted ? '#bbf7d0' : isCurrent ? '#fed7aa' : '#cbd5e1'}`,\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.25rem'\r\n              }}>\r\n                {isCompleted && <Check style={{ width: '0.75rem', height: '0.75rem' }} />}\r\n                {isCurrent && <Clock style={{ width: '0.75rem', height: '0.75rem' }} />}\r\n                {ROLES_LABELS[nivel.rol] || nivel.rol}\r\n              </div>\r\n              {index < flujo.length - 1 && (\r\n                <ArrowRight style={{ width: '1rem', height: '1rem', color: '#9ca3af' }} />\r\n              )}\r\n            </React.Fragment>\r\n          );\r\n        })}\r\n      </div>\r\n      \r\n      {/* Historial */}\r\n      {flujo.some(n => n.aprobadoPor) && (\r\n        <div style={{ marginTop: '0.75rem' }}>\r\n          <h6 style={{ fontSize: '0.75rem', fontWeight: '600', color: '#6b7280', margin: 0, marginBottom: '0.5rem' }}>\r\n            HISTORIAL DE APROBACIONES\r\n          </h6>\r\n          {flujo.map((nivel, index) => {\r\n            if (!nivel.aprobadoPor && !nivel.accion) return null;\r\n            \r\n            return (\r\n              <div key={index} style={{ \r\n                fontSize: '0.75rem', \r\n                color: '#6b7280', \r\n                marginBottom: '0.5rem',\r\n                padding: '0.5rem',\r\n                background: nivel.tipo === 'manual' ? '#fef3c7' : 'transparent',\r\n                borderRadius: '0.25rem',\r\n                border: nivel.tipo === 'manual' ? '1px solid #fcd34d' : 'none'\r\n              }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                  {nivel.accion === 'aprobada' ? 'âœ…' : nivel.accion === 'rechazada' ? 'âŒ' : 'â³'} \r\n                  <strong>{ROLES_LABELS[nivel.rol] || nivel.rol}</strong>\r\n                  {nivel.aprobadoPor && `: ${nivel.aprobadoPor}`}\r\n                  {nivel.tipo === 'manual' && (\r\n                    <span style={{\r\n                      padding: '0.125rem 0.375rem',\r\n                      borderRadius: '9999px',\r\n                      fontSize: '0.625rem',\r\n                      fontWeight: '600',\r\n                      background: '#92400e',\r\n                      color: '#fef3c7'\r\n                    }}>\r\n                      MANUAL\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                <div style={{ marginLeft: '1.25rem', marginTop: '0.25rem' }}>\r\n                  {nivel.fecha ? (\r\n                    <>Fecha: {new Date(nivel.fecha).toLocaleString()}</>\r\n                  ) : (\r\n                    <em style={{ color: '#9ca3af' }}>Pendiente de aprobaciÃ³n</em>\r\n                  )}\r\n                  {nivel.motivoManual && (\r\n                    <div style={{ marginTop: '0.25rem', fontStyle: 'italic' }}>\r\n                      Motivo: {nivel.motivoManual}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n  return (\r\n    <div style={{ padding: '1.5rem', background: '#f1eeeeff', minHeight: '100vh' }}>\r\n      {/* Modal de SelecciÃ³n de PerÃ­odos */}\r\n      {showPeriodosModal && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0, 0, 0, 0.5)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          zIndex: 1000\r\n        }}>\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '0.75rem',\r\n            padding: '1.5rem',\r\n            maxWidth: '40rem',\r\n            width: '90%',\r\n            maxHeight: '80vh',\r\n            overflow: 'auto',\r\n            boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.1)'\r\n          }}>\r\n            <h3 style={{ fontSize: '1.25rem', fontWeight: '600', color: '#111827', marginBottom: '1rem' }}>\r\n              Seleccionar PerÃ­odos\r\n            </h3>\r\n            \r\n            <div style={{\r\n              background: '#f0f9ff',\r\n              border: '1px solid #bae6fd',\r\n              borderRadius: '0.5rem',\r\n              padding: '1rem',\r\n              marginBottom: '1.5rem'\r\n            }}>\r\n              <p style={{ fontSize: '0.875rem', color: '#0369a1', margin: 0, marginBottom: '0.5rem' }}>\r\n                <strong>DÃ­as a solicitar:</strong> {calcularDias()} dÃ­as\r\n              </p>\r\n              <p style={{ fontSize: '0.875rem', color: '#0369a1', margin: 0 }}>\r\n                <strong>DÃ­as seleccionados:</strong> {calcularTotalSeleccionado()} dÃ­as\r\n              </p>\r\n            </div>\r\n\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem', marginBottom: '1.5rem' }}>\r\n              {periodosSeleccionados.map((periodo) => (\r\n                <div key={periodo.balanceId} style={{\r\n                  border: '1px solid #e5e7eb',\r\n                  borderRadius: '0.5rem',\r\n                  padding: '1rem',\r\n                  background: '#f9fafb'\r\n                }}>\r\n                  <div style={{ marginBottom: '0.5rem' }}>\r\n                    <strong style={{ fontSize: '0.875rem', color: '#111827' }}>{periodo.descripcion}</strong>\r\n                    <p style={{ fontSize: '0.75rem', color: '#6b7280', margin: 0 }}>\r\n                      Disponibles: {periodo.diasDisponibles} dÃ­as\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label style={{ display: 'block', fontSize: '0.75rem', color: '#374151', marginBottom: '0.25rem' }}>\r\n                      DÃ­as a usar de este perÃ­odo:\r\n                    </label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      max={periodo.diasDisponibles}\r\n                      value={periodo.dias}\r\n                      onChange={(e) => actualizarDiasPeriodo(periodo.balanceId, e.target.value)}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '0.5rem',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '0.375rem',\r\n                        fontSize: '0.875rem'\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {calcularTotalSeleccionado() !== calcularDias() && (\r\n              <div style={{\r\n                background: '#fef2f2',\r\n                border: '1px solid #fecaca',\r\n                borderRadius: '0.5rem',\r\n                padding: '0.75rem',\r\n                marginBottom: '1rem'\r\n              }}>\r\n                <p style={{ fontSize: '0.75rem', color: '#dc2626', margin: 0 }}>\r\n                  âš ï¸ La suma de dÃ­as debe ser igual a {calcularDias()} dÃ­as\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'flex-end' }}>\r\n              <button\r\n  onClick={() => {\r\n    setShowPeriodosModal(false);\r\n    setPeriodosSeleccionados([]);\r\n  }}\r\n  style={{\r\n    padding: '0.5rem 1rem',\r\n    background: '#f3f4f6',\r\n    color: '#374151',\r\n    border: '1px solid #d1d5db',\r\n    borderRadius: '0.375rem',\r\n    fontSize: '0.875rem',\r\n    cursor: 'pointer'\r\n  }}\r\n>\r\n  Cancelar\r\n            </button>\r\n\r\n            <button\r\n              onClick={confirmarSolicitudConPeriodos}\r\n              disabled={calcularTotalSeleccionado() !== calcularDias() || loading}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                background: calcularTotalSeleccionado() === calcularDias() && !loading ? '#3b82f6' : '#9ca3af',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '0.375rem',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                cursor: calcularTotalSeleccionado() === calcularDias() && !loading ? 'pointer' : 'not-allowed'\r\n              }}\r\n            >\r\n              {loading ? 'Enviando...' : 'Confirmar Solicitud'}\r\n            </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}    \r\n\r\n       {/* Modal de Rechazo */}\r\n      {mostrarModalRechazo && solicitudSeleccionada && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0, 0, 0, 0.5)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          zIndex: 1000\r\n        }}>\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '0.5rem',\r\n            padding: '2rem',\r\n            maxWidth: '28rem',\r\n            width: '90%'\r\n          }}>\r\n            <h3 style={{ fontSize: '1.25rem', fontWeight: '600', marginBottom: '1rem' }}>\r\n              Rechazar Solicitud\r\n            </h3>\r\n            <p style={{ color: '#6b7280', marginBottom: '1.5rem' }}>\r\n              Â¿EstÃ¡s seguro de rechazar la solicitud de <strong>{solicitudSeleccionada.empleado}</strong>?\r\n            </p>\r\n            <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'flex-end' }}>\r\n              <button\r\n                onClick={() => {\r\n                  setMostrarModalRechazo(false);\r\n                  setSolicitudSeleccionada(null);\r\n                }}\r\n                style={{\r\n                  padding: '0.5rem 1rem',\r\n                  background: '#f3f4f6',\r\n                  color: '#374151',\r\n                  border: 'none',\r\n                  borderRadius: '0.375rem',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                Cancelar\r\n              </button>\r\n              <button\r\n                onClick={async () => {\r\n                  try {\r\n                    setLoading(true);\r\n                    await vacacionesService.procesarSolicitud(solicitudSeleccionada.id, {\r\n                      usuarioID: user.id,\r\n                      accion: 'rechazada',\r\n                      esManual: false,\r\n                      motivoManual: ''\r\n                    });\r\n                    showNotification({\r\n                      title: 'Ã‰xito',\r\n                      message: 'Solicitud rechazada correctamente.',\r\n                      color: 'green',\r\n                    });\r\n                    setMostrarModalRechazo(false);\r\n                    setSolicitudSeleccionada(null);\r\n                    await cargarDatos();\r\n                  } catch (error) {\r\n                    // NotificaciÃ³n de error\r\n                  showNotification({\r\n                    title: 'Error',\r\n                    message: 'Error al rechazar: ' + (error.response?.data?.error || error.message),\r\n                    color: 'red',\r\n                  });\r\n                  } finally {\r\n                    setLoading(false);\r\n                  }\r\n                }}\r\n                disabled={loading}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  padding: '0.5rem 1rem',\r\n                  background: '#ef4444',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '0.375rem',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  cursor: loading ? 'not-allowed' : 'pointer'\r\n                }}\r\n              >\r\n                <X style={{ width: '1rem', height: '1rem' }} />\r\n                Rechazar\r\n              </button>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal de AprobaciÃ³n Manual */}\r\n      {showManualModal && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0, 0, 0, 0.5)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          zIndex: 1000\r\n        }}>\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '0.75rem',\r\n            padding: '1.5rem',\r\n            maxWidth: '28rem',\r\n            width: '90%',\r\n            boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.1)'\r\n          }}>\r\n            <h3 style={{ fontSize: '1.25rem', fontWeight: '600', color: '#111827', marginBottom: '1rem' }}>\r\n              AprobaciÃ³n Manual\r\n            </h3>\r\n            <div style={{\r\n              background: '#fef3c7',\r\n              border: '1px solid #fcd34d',\r\n              borderRadius: '0.5rem',\r\n              padding: '0.75rem',\r\n              marginBottom: '1rem'\r\n            }}>\r\n              <p style={{ fontSize: '0.875rem', color: '#92400e', margin: 0 }}>\r\n                âš ï¸ Esta acciÃ³n saltarÃ¡ el flujo normal de aprobaciÃ³n y serÃ¡ registrada como aprobaciÃ³n manual.\r\n              </p>\r\n            </div>\r\n            \r\n            <div style={{ marginBottom: '1rem' }}>\r\n              <label style={{ display: 'block', fontSize: '0.875rem', fontWeight: '500', color: '#374151', marginBottom: '0.5rem' }}>\r\n                AcciÃ³n\r\n              </label>\r\n              <select\r\n                value={manualApprovalData.accion}\r\n                onChange={(e) => setManualApprovalData(prev => ({ ...prev, accion: e.target.value }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '1rem'\r\n                }}\r\n              >\r\n                <option value=\"aprobada\">Aprobar</option>\r\n                <option value=\"rechazada\">Rechazar</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div style={{ marginBottom: '1.5rem' }}>\r\n              <label style={{ display: 'block', fontSize: '0.875rem', fontWeight: '500', color: '#374151', marginBottom: '0.5rem' }}>\r\n                Motivo de la aprobaciÃ³n manual *\r\n              </label>\r\n              <textarea\r\n                value={manualApprovalData.motivo}\r\n                onChange={(e) => setManualApprovalData(prev => ({ ...prev, motivo: e.target.value }))}\r\n                placeholder=\"Ej: AprobaciÃ³n urgente por emergencia familiar, autorizaciÃ³n directa del CEO, etc.\"\r\n                rows={3}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '1rem',\r\n                  resize: 'vertical'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'flex-end' }}>\r\n              <button\r\n                onClick={() => setShowManualModal(false)}\r\n                style={{\r\n                  padding: '0.5rem 1rem',\r\n                  background: '#f3f4f6',\r\n                  color: '#374151',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.375rem',\r\n                  fontSize: '0.875rem',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                Cancelar\r\n              </button>\r\n              <button\r\n                onClick={handleManualApproval}\r\n                style={{\r\n                  padding: '0.5rem 1rem',\r\n                  background: '#dc2626',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '0.375rem',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                Confirmar AprobaciÃ³n Manual\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ maxWidth: '112rem', margin: '0 auto' }}>\r\n        <h1 style={{ fontSize: '2rem', fontWeight: 'bold', color: '#111827', marginBottom: '0.5rem' }}>\r\n          Sistema de GestiÃ³n de Autoservicio\r\n        </h1>\r\n        <p style={{ color: '#6b7280', fontSize: '1.125rem', marginBottom: '2rem' }}>\r\n          {getEtiquetaVista()}\r\n        </p>\r\n\r\n        <div style={{\r\n          display: 'grid',\r\n          gridTemplateColumns: 'repeat(auto-fit, minmax(15rem, 1fr))',\r\n          gap: '1.5rem',\r\n          marginBottom: '2rem'\r\n        }}>\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '0.75rem',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n            border: '1px solid #e5e7eb',\r\n            padding: '1.5rem'\r\n          }}>\r\n            <h3 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#111827', marginBottom: '1rem' }}>\r\n              DÃ­as Disponibles de Vacaciones\r\n            </h3>\r\n            <p style={{ fontSize: '2rem', fontWeight: 'bold', color: '#10b981', margin: 0 }}>\r\n              {periodos.reduce((sum, p) => sum + p.diasDisponibles, 0)}\r\n            </p>\r\n            {periodos.length > 1 && (\r\n              <button\r\n                onClick={() => setActiveTab('periodos')}\r\n                style={{\r\n                  marginTop: '0.5rem',\r\n                  fontSize: '0.75rem',\r\n                  color: '#3b82f6',\r\n                  background: 'none',\r\n                  border: 'none',\r\n                  cursor: 'pointer',\r\n                  textDecoration: 'underline'\r\n                }}\r\n              >\r\n                Ver detalle por perÃ­odo\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '0.75rem',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n            border: '1px solid #e5e7eb',\r\n            padding: '1.5rem'\r\n          }}>\r\n            <h3 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#111827', marginBottom: '1rem' }}>\r\n              DÃ­as de Vacaciones Usados\r\n            </h3>\r\n            <p style={{ fontSize: '2rem', fontWeight: 'bold', color: '#6b7280', margin: 0 }}>\r\n              {estadisticas.diasUsados || 0}\r\n            </p>\r\n          </div>\r\n\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '0.75rem',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n            border: '1px solid #e5e7eb',\r\n            padding: '1.5rem'\r\n          }}>\r\n            <h3 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#111827', marginBottom: '1rem' }}>\r\n              Pendientes en Mi Nivel\r\n            </h3>\r\n            <p style={{ fontSize: '2rem', fontWeight: 'bold', color: '#f59e0b', margin: 0 }}>\r\n              {solicitudesPendientes.length}\r\n            </p>\r\n          </div>\r\n\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '0.75rem',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n            border: '1px solid #e5e7eb',\r\n            padding: '1.5rem'\r\n          }}>\r\n            <h3 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#111827', marginBottom: '1rem' }}>\r\n              Total Solicitudes\r\n            </h3>\r\n            <p style={{ fontSize: '1rem', fontWeight: 'bold', color: '#3b82f6', margin: 0 }}>\r\n              {solicitudes.length} solicitudes\r\n              {ROLES_APROBACION_MANUAL.includes(user.role) && (\r\n                <span style={{ \r\n                  display: 'block', \r\n                  fontSize: '0.75rem', \r\n                  color: '#dc2626', \r\n                  fontWeight: '500' \r\n                }}>\r\n                  + AprobaciÃ³n Manual\r\n                </span>\r\n              )}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '0.75rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          border: '1px solid #e5e7eb'\r\n        }}>\r\n          <div style={{ display: 'flex', borderBottom: '1px solid #e5e7eb', flexWrap: 'wrap' }}>\r\n            <button\r\n              onClick={() => setActiveTab('solicitar')}\r\n              style={{\r\n                flex: 1,\r\n                minWidth: '150px',\r\n                padding: '1rem',\r\n                border: 'none',\r\n                background: activeTab === 'solicitar' ? '#f8fafc' : 'transparent',\r\n                color: activeTab === 'solicitar' ? '#3b82f6' : '#6b7280',\r\n                fontWeight: activeTab === 'solicitar' ? '600' : '500',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              Realizar\r\n            </button>\r\n            \r\n            {periodos.length > 1 && (\r\n              <button\r\n                onClick={() => setActiveTab('periodos')}\r\n                style={{\r\n                  flex: 1,\r\n                  minWidth: '150px',\r\n                  padding: '1rem',\r\n                  border: 'none',\r\n                  background: activeTab === 'periodos' ? '#f8fafc' : 'transparent',\r\n                  color: activeTab === 'periodos' ? '#3b82f6' : '#6b7280',\r\n                  fontWeight: activeTab === 'periodos' ? '600' : '500',\r\n                  cursor: 'pointer',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  gap: '0.5rem'\r\n                }}\r\n              >\r\n                <Package style={{ width: '1rem', height: '1rem' }} />\r\n                PerÃ­odos ({periodos.length})\r\n              </button>\r\n            )}\r\n            \r\n            <button\r\n              onClick={() => setActiveTab('historial')}\r\n              style={{\r\n                flex: 1,\r\n                minWidth: '150px',\r\n                padding: '1rem',\r\n                border: 'none',\r\n                background: activeTab === 'historial' ? '#f8fafc' : 'transparent',\r\n                color: activeTab === 'historial' ? '#3b82f6' : '#6b7280',\r\n                fontWeight: activeTab === 'historial' ? '600' : '500',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              Historial ({solicitudes.length})\r\n            </button>\r\n            \r\n            {['gerente', 'director', 'rrhh', 'gerente_rrhh', 'director_rrhh'].includes(user.role?.toLowerCase()) && (\r\n              <button\r\n                onClick={() => setActiveTab('aprobar')}\r\n                style={{\r\n                  flex: 1,\r\n                  minWidth: '150px',\r\n                  padding: '1rem',\r\n                  border: 'none',\r\n                  background: activeTab === 'aprobar' ? '#f8fafc' : 'transparent',\r\n                  color: activeTab === 'aprobar' ? '#3b82f6' : '#6b7280',\r\n                  fontWeight: activeTab === 'aprobar' ? '600' : '500',\r\n                  cursor: 'pointer',\r\n                  position: 'relative'\r\n                }}\r\n              >\r\n                Aprobar Solicitudes\r\n                {solicitudesPendientes.length > 0 && (\r\n                  <span style={{\r\n                    position: 'absolute',\r\n                    top: '0.5rem',\r\n                    right: '0.5rem',\r\n                    background: '#dc2626',\r\n                    color: 'white',\r\n                    borderRadius: '50%',\r\n                    width: '1.5rem',\r\n                    height: '1.5rem',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    fontSize: '0.75rem',\r\n                    fontWeight: 'bold'\r\n                  }}>\r\n                    {solicitudesPendientes.length}\r\n                  </span>\r\n                )}\r\n              </button>\r\n            )}\r\n            {ROLES_APROBACION_MANUAL.includes(user.role?.toLowerCase()) && (\r\n              <button\r\n                onClick={() => {\r\n                  setActiveTab('entrada_manual');\r\n                  cargarEmpleados(); // Cargar empleados al abrir la pestaÃ±a\r\n                }}\r\n                style={{\r\n                  flex: 1,\r\n                  minWidth: '150px',\r\n                  padding: '1rem',\r\n                  border: 'none',\r\n                  background: activeTab === 'entrada_manual' ? '#f8fafc' : 'transparent',\r\n                  color: activeTab === 'entrada_manual' ? '#3b82f6' : '#6b7280',\r\n                  fontWeight: activeTab === 'entrada_manual' ? '600' : '500',\r\n                  cursor: 'pointer',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  gap: '0.5rem'\r\n                }}\r\n              >\r\n                <FileText style={{ width: '1rem', height: '1rem' }} />\r\n                Entrada Manual\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ padding: '2rem' }}>\r\n           {activeTab === 'periodos' && (\r\n                <div>\r\n                  <h3 style={{ fontSize: '1.25rem', fontWeight: '600', color: '#111827', marginBottom: '1.5rem' }}>\r\n                    PerÃ­odos de Vacaciones\r\n                  </h3>\r\n                  \r\n                  {/* Tabla de PerÃ­odos */}\r\n                  <div style={{\r\n                    border: '1px solid #e5e7eb',\r\n                    borderRadius: '0.5rem',\r\n                    overflow: 'hidden'\r\n                  }}>\r\n                    <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                      <thead>\r\n                        <tr style={{ background: '#f9fafb' }}>\r\n                          <th style={{\r\n                            padding: '1rem',\r\n                            textAlign: 'left',\r\n                            fontSize: '0.875rem',\r\n                            fontWeight: '600',\r\n                            color: '#374151',\r\n                            borderBottom: '1px solid #e5e7eb'\r\n                          }}>\r\n                            PerÃ­odo\r\n                          </th>\r\n                          <th style={{\r\n                            padding: '1rem',\r\n                            textAlign: 'right',\r\n                            fontSize: '0.875rem',\r\n                            fontWeight: '600',\r\n                            color: '#374151',\r\n                            borderBottom: '1px solid #e5e7eb'\r\n                          }}>\r\n                            Total Acumulado\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {periodos.map((periodo, index) => (\r\n                          <tr key={periodo.balanceId} style={{\r\n                            background: index % 2 === 0 ? 'white' : '#f9fafb'\r\n                          }}>\r\n                            <td style={{\r\n                              padding: '1rem',\r\n                              fontSize: '0.875rem',\r\n                              color: '#111827',\r\n                              borderBottom: '1px solid #e5e7eb'\r\n                            }}>\r\n                              {periodo.anioInicio && periodo.anioFin \r\n                                ? `${periodo.anioInicio}-${periodo.anioFin}` \r\n                                : periodo.descripcion}\r\n                            </td>\r\n                            <td style={{\r\n                              padding: '1rem',\r\n                              textAlign: 'right',\r\n                              fontSize: '0.875rem',\r\n                              fontWeight: '500',\r\n                              color: '#111827',\r\n                              borderBottom: '1px solid #e5e7eb'\r\n                            }}>\r\n                              {periodo.diasDisponibles}\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                        {/* Fila de Total */}\r\n                        <tr style={{ background: '#f0f9ff' }}>\r\n                          <td style={{\r\n                            padding: '1rem',\r\n                            fontSize: '0.875rem',\r\n                            fontWeight: '700',\r\n                            color: '#0369a1'\r\n                          }}>\r\n                            Total Acumulado\r\n                          </td>\r\n                          <td style={{\r\n                            padding: '1rem',\r\n                            textAlign: 'right',\r\n                            fontSize: '1rem',\r\n                            fontWeight: '700',\r\n                            color: '#0369a1'\r\n                          }}>\r\n                            {periodos.reduce((sum, p) => sum + p.diasDisponibles, 0)}\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n                        )}\r\n\r\n              \r\n\r\n            {activeTab === 'solicitar' && (\r\n              <div>\r\n                <h3 style={{ fontSize: '1.25rem', fontWeight: '600', color: '#111827', marginBottom: '1.5rem' }}>\r\n                  Nueva Solicitud\r\n                </h3>\r\n\r\n                <form onSubmit={handleSubmitSolicitud} style={{ maxWidth: '32rem' }}>\r\n                  <div style={{ marginBottom: '1.5rem' }}>\r\n                    <label style={{ display: 'block', fontSize: '0.875rem', fontWeight: '500', color: '#374151', marginBottom: '0.5rem' }}>\r\n                      Tipo de Solicitud *\r\n                    </label>\r\n                    <select\r\n                      value={solicitudForm.tipo}\r\n                      onChange={(e) => setSolicitudForm(prev => ({ ...prev, tipo: e.target.value }))}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '0.75rem',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '0.5rem',\r\n                        fontSize: '1rem'\r\n                      }}\r\n                      required\r\n                    >\r\n                      <option value=\"vacaciones\">Vacaciones</option>\r\n                      <option value=\"permiso\">Permiso del aÃ±o</option>\r\n                      <option value=\"cumpleaÃ±os\">Permiso de cumpleaÃ±os</option>\r\n                      <option value=\"Certificacion\">CertificaciÃ³n Laboral</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem', marginBottom: '1.5rem' }}>\r\n                    <div>\r\n                      <label style={{ display: 'block', fontSize: '0.875rem', fontWeight: '500', color: '#374151', marginBottom: '0.5rem' }}>\r\n                        Fecha de Inicio *\r\n                      </label>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={solicitudForm.fechaInicio}\r\n                        onChange={(e) => setSolicitudForm(prev => ({ ...prev, fechaInicio: e.target.value }))}\r\n                        min={new Date(Date.now() + 86400000).toISOString().split('T')[0]}\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '0.75rem',\r\n                          border: '1px solid #d1d5db',\r\n                          borderRadius: '0.5rem',\r\n                          fontSize: '1rem'\r\n                        }}\r\n                        required\r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label style={{ display: 'block', fontSize: '0.875rem', fontWeight: '500', color: '#374151', marginBottom: '0.5rem' }}>\r\n                        Fecha de Fin *\r\n                      </label>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={solicitudForm.fechaFin}\r\n                        onChange={(e) => setSolicitudForm(prev => ({ ...prev, fechaFin: e.target.value }))}\r\n                        min={solicitudForm.fechaInicio || new Date(Date.now() + 86400000).toISOString().split('T')[0]}\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '0.75rem',\r\n                          border: '1px solid #d1d5db',\r\n                          borderRadius: '0.5rem',\r\n                          fontSize: '1rem'\r\n                        }}\r\n                        required\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  {calcularDias() > 0 && (\r\n                    <div style={{\r\n                      background: '#f0f9ff',\r\n                      border: '1px solid #bae6fd',\r\n                      borderRadius: '0.5rem',\r\n                      padding: '1rem',\r\n                      marginBottom: '1.5rem'\r\n                    }}>\r\n                      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(8rem, 1fr))', gap: '1rem' }}>\r\n                        <div>\r\n                          <p style={{ fontSize: '0.75rem', color: '#0369a1', margin: 0, marginBottom: '0.25rem', fontWeight: '600' }}>\r\n                            DÃAS TOTALES\r\n                          </p>\r\n                          <p style={{ fontSize: '1.5rem', fontWeight: 'bold', color: '#0369a1', margin: 0 }}>\r\n                            {calcularDias()}\r\n                          </p>\r\n                        </div>\r\n                        <div>\r\n                          <p style={{ fontSize: '0.75rem', color: '#0369a1', margin: 0, marginBottom: '0.25rem', fontWeight: '600' }}>\r\n                            DÃAS HÃBILES\r\n                          </p>\r\n                          <p style={{ fontSize: '1.5rem', fontWeight: 'bold', color: '#0369a1', margin: 0 }}>\r\n                            {calcularDiasHabiles()}\r\n                          </p>\r\n                        </div>\r\n                        {solicitudForm.tipo === 'vacaciones' && (\r\n                          <div>\r\n                            <p style={{ fontSize: '0.75rem', color: '#0369a1', margin: 0, marginBottom: '0.25rem', fontWeight: '600' }}>\r\n                              DÃAS DISPONIBLES\r\n                            </p>\r\n                            <p style={{ \r\n                              fontSize: '1.5rem', \r\n                              fontWeight: 'bold', \r\n                              color: estadisticas.diasDisponibles >= calcularDias() ? '#0369a1' : '#dc2626', \r\n                              margin: 0 \r\n                            }}>\r\n                              {estadisticas.diasDisponibles}\r\n                            </p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                      \r\n                      {solicitudForm.tipo === 'vacaciones' && calcularDias() > estadisticas.diasDisponibles && (\r\n                        <div style={{ marginTop: '0.75rem', padding: '0.5rem', background: '#fef2f2', border: '1px solid #fecaca', borderRadius: '0.375rem' }}>\r\n                          <p style={{ fontSize: '0.75rem', color: '#dc2626', margin: 0 }}>\r\n                            âš ï¸ No tienes suficientes dÃ­as de vacaciones disponibles\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      {solicitudForm.tipo === 'vacaciones' && periodos.length > 1 && calcularDias() <= estadisticas.diasDisponibles && (\r\n                        <div style={{ marginTop: '0.75rem', padding: '0.5rem', background: '#fef3c7', border: '1px solid #fcd34d', borderRadius: '0.375rem' }}>\r\n                          <p style={{ fontSize: '0.75rem', color: '#92400e', margin: 0 }}>\r\n                            â„¹ï¸ Tienes {periodos.length} perÃ­odos disponibles. PodrÃ¡s seleccionar de cuÃ¡l perÃ­odo usar dÃ­as.\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n\r\n                  <div style={{ marginBottom: '1.5rem' }}>\r\n                    <label style={{ display: 'block', fontSize: '0.875rem', fontWeight: '500', color: '#374151', marginBottom: '0.5rem' }}>\r\n                      Motivo / JustificaciÃ³n *\r\n                    </label>\r\n                    <textarea\r\n                      value={solicitudForm.motivo}\r\n                      onChange={(e) => setSolicitudForm(prev => ({ ...prev, motivo: e.target.value }))}\r\n                      placeholder=\"Describe el motivo de tu solicitud...\"\r\n                      rows={4}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '0.75rem',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '0.5rem',\r\n                        fontSize: '1rem',\r\n                        resize: 'vertical'\r\n                      }}\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={loading}\r\n                    style={{\r\n                      background: loading ? '#9ca3af' : '#3b82f6',\r\n                      color: 'white',\r\n                      padding: '0.75rem 1.5rem',\r\n                      borderRadius: '0.5rem',\r\n                      border: 'none',\r\n                      fontSize: '1rem',\r\n                      fontWeight: '500',\r\n                      cursor: loading ? 'not-allowed' : 'pointer',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: '0.5rem'\r\n                    }}\r\n                  >\r\n                    <Plus style={{ width: '1rem', height: '1rem' }} />\r\n                    {loading ? 'Enviando...' : 'Enviar Solicitud'}\r\n                  </button>\r\n                </form>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'historial' && (\r\n              <div>\r\n                <h3 style={{ fontSize: '1.25rem', fontWeight: '600', color: '#111827', marginBottom: '1rem' }}>\r\n                  Historial de Solicitudes\r\n                </h3>\r\n\r\n                {loading ? (\r\n                  <div style={{ textAlign: 'center', padding: '3rem' }}>\r\n                    <p>Cargando...</p>\r\n                  </div>\r\n                ) : solicitudes.length === 0 ? (\r\n                  <div style={{\r\n                    textAlign: 'center',\r\n                    padding: '3rem',\r\n                    background: '#f9fafb',\r\n                    borderRadius: '0.5rem',\r\n                    border: '1px solid #e5e7eb'\r\n                  }}>\r\n                    <FileText style={{ width: '3rem', height: '3rem', color: '#9ca3af', margin: '0 auto 1rem' }} />\r\n                    <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#111827', margin: 0, marginBottom: '0.5rem' }}>\r\n                      No hay solicitudes\r\n                    </h4>\r\n                    <p style={{ color: '#6b7280', margin: 0 }}>\r\n                      AÃºn no tienes solicitudes de vacaciones registradas.\r\n                    </p>\r\n                  </div>\r\n                ) : (\r\n                  <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                    {solicitudes.map(solicitud => {\r\n                      const estadoStyle = getEstadoColor(solicitud.estado);\r\n                      const esMia = solicitud.empleadoId === user.empleadoId;\r\n                      const permisoAprobacion = puedeAprobar(solicitud);\r\n                      \r\n                      return (\r\n                        <div\r\n                          key={solicitud.id}\r\n                          style={{\r\n                            border: esMia ? '2px solid #3b82f6' : '1px solid #e5e7eb',\r\n                            borderRadius: '0.5rem',\r\n                            padding: '1.5rem',\r\n                            background: esMia ? '#f8fafc' : 'white'\r\n                          }}\r\n                        >\r\n                          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', marginBottom: '1rem' }}>\r\n                            <div>\r\n                              <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#111827', margin: 0, marginBottom: '0.5rem' }}>\r\n                                {solicitud.empleado} - {getTipoLabel(solicitud.tipo)}\r\n                                {esMia && (\r\n                                  <span style={{\r\n                                    marginLeft: '0.5rem',\r\n                                    padding: '0.125rem 0.5rem',\r\n                                    borderRadius: '9999px',\r\n                                    fontSize: '0.75rem',\r\n                                    fontWeight: '500',\r\n                                    background: '#dbeafe',\r\n                                    color: '#1d4ed8'\r\n                                  }}>\r\n                                    MÃA\r\n                                  </span>\r\n                                )}\r\n                              </h4>\r\n                              <p style={{ fontSize: '0.875rem', color: '#6b7280', margin: 0 }}>\r\n                                {solicitud.puesto} â€¢ {solicitud.departamento}\r\n                              </p>\r\n                            </div>\r\n                            <span style={{\r\n                              padding: '0.25rem 0.75rem',\r\n                              borderRadius: '9999px',\r\n                              fontSize: '0.75rem',\r\n                              fontWeight: '500',\r\n                              background: estadoStyle.bg,\r\n                              color: estadoStyle.color,\r\n                              border: `1px solid ${estadoStyle.border}`,\r\n                              textTransform: 'capitalize'\r\n                            }}>\r\n                              {solicitud.estado === 'pendiente' && <Clock style={{ width: '0.75rem', height: '0.75rem', display: 'inline', marginRight: '0.25rem' }} />}\r\n                              {solicitud.estado === 'aprobada' && <Check style={{ width: '0.75rem', height: '0.75rem', display: 'inline', marginRight: '0.25rem' }} />}\r\n                              {solicitud.estado === 'rechazada' && <X style={{ width: '0.75rem', height: '0.75rem', display: 'inline', marginRight: '0.25rem' }} />}\r\n                              {solicitud.estado}\r\n                            </span>\r\n                          </div>\r\n\r\n                          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(10rem, 1fr))', gap: '1rem', marginBottom: '1rem' }}>\r\n                            <div>\r\n                              <p style={{ fontSize: '0.75rem', color: '#6b7280', margin: 0 }}>FECHA INICIO</p>\r\n                              <p style={{ fontSize: '0.875rem', fontWeight: '500', color: '#111827', margin: 0 }}>\r\n                                {new Date(solicitud.fechaInicio).toLocaleDateString()}\r\n                              </p>\r\n                            </div>\r\n                            <div>\r\n                              <p style={{ fontSize: '0.75rem', color: '#6b7280', margin: 0 }}>FECHA FIN</p>\r\n                              <p style={{ fontSize: '0.875rem', fontWeight: '500', color: '#111827', margin: 0 }}>\r\n                                {new Date(solicitud.fechaFin).toLocaleDateString()}\r\n                              </p>\r\n                            </div>\r\n                            <div>\r\n                              <p style={{ fontSize: '0.75rem', color: '#6b7280', margin: 0 }}>DÃAS</p>\r\n                              <p style={{ fontSize: '0.875rem', fontWeight: '500', color: '#111827', margin: 0 }}>\r\n                                {solicitud.dias} dÃ­as\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div style={{ marginBottom: '1rem' }}>\r\n                            <p style={{ fontSize: '0.75rem', color: '#6b7280', margin: 0 }}>MOTIVO</p>\r\n                            <p style={{ fontSize: '0.875rem', color: '#111827', margin: 0 }}>\r\n                              {solicitud.motivo}\r\n                            </p>\r\n                          </div>\r\n\r\n                          <FlujAprobacion \r\n                            flujo={solicitud.flujoAprobacion} \r\n                            estado={solicitud.estado}\r\n                            aprobacionManual={solicitud.aprobacionManual}\r\n                          />\r\n\r\n                          {/* BOTONES DE APROBACIÃ“N */}\r\n                            {permisoAprobacion.puede && solicitud.estado === 'pendiente' && (\r\n                              <div style={{ \r\n                                marginTop: '1rem', \r\n                                paddingTop: '1rem', \r\n                                borderTop: '1px solid #e5e7eb',\r\n                                display: 'flex',\r\n                                gap: '0.75rem',\r\n                                alignItems: 'center'\r\n                              }}>\r\n                                {permisoAprobacion.motivo === 'manual' && (\r\n                                  <div style={{\r\n                                    flex: 1,\r\n                                    padding: '0.75rem',\r\n                                    background: '#fef3c7',\r\n                                    border: '1px solid #fcd34d',\r\n                                    borderRadius: '0.375rem',\r\n                                    fontSize: '0.75rem',\r\n                                    color: '#92400e',\r\n                                    fontWeight: '500'\r\n                                  }}>\r\n                                    âš ï¸ AprobaciÃ³n manual - Debes proporcionar un motivo\r\n                                  </div>\r\n                                )}\r\n                                \r\n                                {permisoAprobacion.motivo === 'normal' ? (\r\n                                  <>\r\n                                   <button\r\n                                      onClick={async () => {\r\n                                        try {\r\n                                          setLoading(true);\r\n                                          await vacacionesService.procesarSolicitud(solicitud.id, {\r\n                                            usuarioID: user.id,\r\n                                            accion: 'aprobada',\r\n                                            esManual: false,\r\n                                            motivoManual: ''\r\n                                          });\r\n                                          showNotification({\r\n                                            title: 'Ã‰xito',\r\n                                            message: 'Solicitud aprobada correctamente.',\r\n                                            color: 'green',\r\n                                          });\r\n                                          await cargarDatos();\r\n                                        } catch (error) {\r\n                                          showNotification({\r\n                                            title: 'Error',\r\n                                            message: 'Error al aprobar: ' + (error.response?.data?.error || error.message),\r\n                                            color: 'red',\r\n                                          });\r\n                                        } finally {\r\n                                          setLoading(false);\r\n                                        }\r\n                                      }}\r\n                                      disabled={loading}\r\n                                      style={{\r\n                                        padding: '0.625rem 1.25rem',\r\n                                        background: loading ? '#9ca3af' : '#10b981',\r\n                                        color: 'white',\r\n                                        border: 'none',\r\n                                        borderRadius: '0.375rem',\r\n                                        fontSize: '0.875rem',\r\n                                        fontWeight: '500',\r\n                                        cursor: loading ? 'not-allowed' : 'pointer',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.375rem',\r\n                                        transition: 'all 0.2s'\r\n                                      }}\r\n                                      onMouseOver={(e) => !loading && (e.target.style.background = '#059669')}\r\n                                      onMouseOut={(e) => !loading && (e.target.style.background = '#10b981')}\r\n                                    >\r\n                                      <Check style={{ width: '1rem', height: '1rem' }} />\r\n                                      Aprobar\r\n                                    </button>\r\n\r\n                                    \r\n                                    <button\r\n                                        onClick={async () => {\r\n                                          try {\r\n                                            setLoading(true);\r\n                                            await vacacionesService.procesarSolicitud(solicitud.id, {\r\n                                              usuarioID: user.id,\r\n                                              accion: 'rechazada',\r\n                                              esManual: false,\r\n                                              motivoManual: ''\r\n                                            });\r\n                                           // NotificaciÃ³n de Ã©xito\r\n                                              showNotification({\r\n                                                title: 'Ã‰xito',\r\n                                                message: 'Solicitud rechazada correctamente.',\r\n                                                color: 'green',\r\n                                              });\r\n                                          await cargarDatos();\r\n                                          } catch (error) {\r\n                                            // NotificaciÃ³n de error\r\n                                            showNotification({\r\n                                              title: 'Error',\r\n                                              message: 'Error al rechazar: ' + (error.response?.data?.error || error.message),\r\n                                              color: 'red',\r\n                                            });\r\n                                          } finally {\r\n                                            setLoading(false);\r\n                                          }\r\n                                        }}\r\n                                        disabled={loading}\r\n                                        style={{\r\n                                          padding: '0.625rem 1.25rem',\r\n                                          background: loading ? '#9ca3af' : '#ef4444',\r\n                                          color: 'white',\r\n                                          border: 'none',\r\n                                          borderRadius: '0.375rem',\r\n                                          fontSize: '0.875rem',\r\n                                          fontWeight: '500',\r\n                                          cursor: loading ? 'not-allowed' : 'pointer',\r\n                                          display: 'flex',\r\n                                          alignItems: 'center',\r\n                                          gap: '0.375rem',\r\n                                          transition: 'all 0.2s'\r\n                                        }}\r\n                                        onMouseOver={(e) => !loading && (e.target.style.background = '#dc2626')}\r\n                                        onMouseOut={(e) => !loading && (e.target.style.background = '#ef4444')}\r\n                                      >\r\n                                        <X style={{ width: '1rem', height: '1rem' }} />\r\n                                        Rechazar\r\n                                      </button>\r\n\r\n                                  </>\r\n                                ) : (\r\n                                  <button\r\n                                    onClick={() => openManualModal(solicitud.id, 'aprobada')}\r\n                                    disabled={loading}\r\n                                    style={{\r\n                                      padding: '0.625rem 1.25rem',\r\n                                      background: loading ? '#9ca3af' : '#dc2626',\r\n                                      color: 'white',\r\n                                      border: 'none',\r\n                                      borderRadius: '0.375rem',\r\n                                      fontSize: '0.875rem',\r\n                                      fontWeight: '500',\r\n                                      cursor: loading ? 'not-allowed' : 'pointer',\r\n                                      display: 'flex',\r\n                                      alignItems: 'center',\r\n                                      gap: '0.375rem'\r\n                                    }}\r\n                                  >\r\n                                    <Edit style={{ width: '1rem', height: '1rem' }} />\r\n                                    AprobaciÃ³n Manual\r\n                                  </button>\r\n                                )}\r\n                              </div>\r\n                            )}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'aprobar' && (\r\n              <div>\r\n                <h3 style={{ fontSize: '1.25rem', fontWeight: '600', color: '#111827', marginBottom: '1rem' }}>\r\n                  Solicitudes Pendientes ({solicitudesPendientes.length})\r\n                </h3>\r\n                \r\n                {ROLES_APROBACION_MANUAL.includes(user.role) && (\r\n                  <div style={{\r\n                    background: '#fef3c7',\r\n                    border: '1px solid #fcd34d',\r\n                    borderRadius: '0.5rem',\r\n                    padding: '1rem',\r\n                    marginBottom: '1.5rem'\r\n                  }}>\r\n                    <h4 style={{ fontSize: '0.875rem', fontWeight: '600', color: '#92400e', margin: 0, marginBottom: '0.5rem' }}>\r\n                      ðŸ”‘ Privilegios de AprobaciÃ³n Manual\r\n                    </h4>\r\n                    <p style={{ fontSize: '0.75rem', color: '#92400e', margin: 0 }}>\r\n                      Puedes realizar aprobaciones manuales que saltan el flujo normal.\r\n                    </p>\r\n                  </div>\r\n                )}\r\n\r\n                {solicitudesPendientes.length === 0 ? (\r\n                  <div style={{\r\n                    textAlign: 'center',\r\n                    padding: '3rem',\r\n                    background: '#f9fafb',\r\n                    borderRadius: '0.5rem',\r\n                    border: '1px solid #e5e7eb'\r\n                  }}>\r\n                    <Users style={{ width: '3rem', height: '3rem', color: '#9ca3af', margin: '0 auto 1rem' }} />\r\n                    <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#111827', margin: 0 }}>\r\n                      No hay solicitudes pendientes\r\n                    </h4>\r\n                  </div>\r\n                ) : (\r\n                  <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                    {solicitudesPendientes.map(solicitud => {\r\n                      const permisos = puedeAprobar(solicitud);\r\n                      const esNormal = permisos.motivo === 'normal';\r\n                      \r\n                      return (\r\n                        <div key={solicitud.id} style={{\r\n                          border: '1px solid #e5e7eb',\r\n                          borderRadius: '0.5rem',\r\n                          padding: '1.5rem',\r\n                          background: esNormal ? '#fffbeb' : '#fef3c7'\r\n                        }}>\r\n                          <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '1rem' }}>\r\n                            <div>\r\n                              <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#111827', margin: 0 }}>\r\n                                {solicitud.empleado} - {getTipoLabel(solicitud.tipo)}\r\n                              </h4>\r\n                              <p style={{ fontSize: '0.875rem', color: '#6b7280', margin: 0 }}>\r\n                                {solicitud.dias} dÃ­as â€¢ {new Date(solicitud.fechaInicio).toLocaleDateString()} - {new Date(solicitud.fechaFin).toLocaleDateString()}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div style={{ marginBottom: '1rem' }}>\r\n                            <p style={{ fontSize: '0.75rem', color: '#6b7280', margin: 0 }}>MOTIVO</p>\r\n                            <p style={{ fontSize: '0.875rem', color: '#111827', margin: 0 }}>{solicitud.motivo}</p>\r\n                          </div>\r\n\r\n                          <FlujAprobacion flujo={solicitud.flujoAprobacion} estado={solicitud.estado} />\r\n\r\n                          <div style={{ marginTop: '1.5rem', display: 'flex', gap: '0.75rem' }}>\r\n                            {esNormal ? (\r\n                              <>\r\n                                <button\r\n                                    onClick={async () => {\r\n                                      try {\r\n                                        setLoading(true);\r\n                                        await vacacionesService.procesarSolicitud(solicitud.id, {\r\n                                          usuarioID: user.id,\r\n                                          accion: 'aprobada',\r\n                                          esManual: false,\r\n                                          motivoManual: ''\r\n                                        });\r\n\r\n                                        // âœ… NotificaciÃ³n moderna\r\n                                        showNotification({\r\n                                          title: 'Ã‰xito',\r\n                                          message: 'Solicitud aprobada correctamente',\r\n                                          color: 'green', // 'green' para Ã©xito, 'red' para error, 'yellow' para advertencia\r\n                                        });\r\n\r\n                                        await cargarDatos();\r\n                                      } catch (error) {\r\n                                        showNotification({\r\n                                          title: 'Error',\r\n                                          message: 'Error al aprobar: ' + (error.response?.data?.error || error.message),\r\n                                          color: 'red', // 'red' para errores\r\n                                        });\r\n\r\n                                      } finally {\r\n                                        setLoading(false);\r\n                                      }\r\n                                    }}\r\n                                    disabled={loading}\r\n                                    style={{\r\n                                      display: 'flex',\r\n                                      alignItems: 'center',\r\n                                      gap: '0.5rem',\r\n                                      padding: '0.5rem 1rem',\r\n                                      background: loading ? '#9ca3af' : '#10b981',\r\n                                      color: 'white',\r\n                                      border: 'none',\r\n                                      borderRadius: '0.375rem',\r\n                                      fontSize: '0.875rem',\r\n                                      fontWeight: '500',\r\n                                      cursor: loading ? 'not-allowed' : 'pointer'\r\n                                    }}\r\n                                  >\r\n                                    <Check style={{ width: '1rem', height: '1rem' }} />\r\n                                    Aprobar\r\n                                  </button>\r\n\r\n                                <button\r\n                                    onClick={async () => {\r\n                                      try {\r\n                                        setLoading(true);\r\n                                        await vacacionesService.procesarSolicitud(solicitud.id, {\r\n                                          usuarioID: user.id,\r\n                                          accion: 'rechazada',\r\n                                          esManual: false,\r\n                                          motivoManual: ''\r\n                                        });\r\n\r\n                                        // âœ… NotificaciÃ³n unificada\r\n                                        showNotification({\r\n                                          title: 'Ã‰xito',\r\n                                          message: 'Solicitud rechazada correctamente',\r\n                                          color: 'green', // 'green' indica Ã©xito\r\n                                        });\r\n\r\n\r\n                                        await cargarDatos();\r\n                                      } catch (error) {\r\n                                        showNotification({\r\n                                          title: 'Error',\r\n                                          message: 'Error al rechazar: ' + (error.response?.data?.error || error.message),\r\n                                          color: 'red', // ðŸ”´ rojo para error\r\n                                        });\r\n\r\n                                      } finally {\r\n                                        setLoading(false);\r\n                                      }\r\n                                    }}\r\n                                    disabled={loading}\r\n                                    style={{\r\n                                      display: 'flex',\r\n                                      alignItems: 'center',\r\n                                      gap: '0.5rem',\r\n                                      padding: '0.5rem 1rem',\r\n                                      background: loading ? '#9ca3af' : '#ef4444',\r\n                                      color: 'white',\r\n                                      border: 'none',\r\n                                      borderRadius: '0.375rem',\r\n                                      fontSize: '0.875rem',\r\n                                      fontWeight: '500',\r\n                                      cursor: loading ? 'not-allowed' : 'pointer'\r\n                                    }}\r\n                                  >\r\n                                    <X style={{ width: '1rem', height: '1rem' }} />\r\n                                    Rechazar\r\n                                  </button>\r\n\r\n                              </>\r\n                            ) : (\r\n                              <>\r\n                                <button\r\n                                  onClick={() => openManualModal(solicitud.id, 'aprobada')}\r\n                                  disabled={loading}\r\n                                  style={{\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.5rem',\r\n                                    padding: '0.5rem 1rem',\r\n                                    background: loading ? '#9ca3af' : '#dc2626',\r\n                                    color: 'white',\r\n                                    border: 'none',\r\n                                    borderRadius: '0.375rem',\r\n                                    fontSize: '0.875rem',\r\n                                    fontWeight: '500',\r\n                                    cursor: loading ? 'not-allowed' : 'pointer'\r\n                                  }}\r\n                                >\r\n                                  <Edit style={{ width: '1rem', height: '1rem' }} />\r\n                                  AprobaciÃ³n Manual\r\n                                </button>\r\n                              </>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n            {activeTab === 'entrada_manual' && (\r\n            <div>\r\n              {/* Alerta informativa */}\r\n              <div style={{\r\n                background: '#fef3c7',\r\n                border: '1px solid #fcd34d',\r\n                borderRadius: '0.5rem',\r\n                padding: '1rem',\r\n                marginBottom: '2rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.75rem'\r\n              }}>\r\n                <AlertTriangle style={{ width: '1.25rem', height: '1.25rem', color: '#92400e' }} />\r\n                <div>\r\n                  <h4 style={{ fontSize: '0.875rem', fontWeight: '600', color: '#92400e', margin: 0, marginBottom: '0.25rem' }}>\r\n                    Entrada Manual de Solicitudes Ejecutadas\r\n                  </h4>\r\n                  <p style={{ fontSize: '0.75rem', color: '#92400e', margin: 0 }}>\r\n                    Registra solicitudes que YA fueron ejecutadas para descontar los dÃ­as del balance.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              <h3 style={{ fontSize: '1.25rem', fontWeight: '600', color: '#111827', marginBottom: '1.5rem' }}>\r\n                Registrar Solicitud Ejecutada\r\n              </h3>\r\n\r\n              {/* AquÃ­ va TODO el formulario completo que te enviÃ© antes */}\r\n              <form onSubmit={async (e) => {\r\n                e.preventDefault();\r\n                \r\n                if (!entradaManualForm.empleadoId) {\r\n                  showNotification({\r\n                    title: 'Error',\r\n                    message: 'Debes seleccionar un empleado',\r\n                    color: 'red'\r\n                  });\r\n                  return;\r\n                }\r\n\r\n                const inicio = new Date(entradaManualForm.fechaInicio);\r\n                const fin = new Date(entradaManualForm.fechaFin);\r\n                \r\n                if (fin < inicio) {\r\n                  showNotification({\r\n                    title: 'Error',\r\n                    message: 'La fecha de fin debe ser posterior a la fecha de inicio',\r\n                    color: 'red'\r\n                  });\r\n                  return;\r\n                }\r\n\r\n                const diffTime = fin - inicio;\r\n                const dias = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;\r\n                \r\n                let diasHabiles = 0;\r\n                for (let d = new Date(inicio); d <= fin; d.setDate(d.getDate() + 1)) {\r\n                  const diaSemana = d.getDay();\r\n                  if (diaSemana !== 0 && diaSemana !== 6) diasHabiles++;\r\n                }\r\n\r\n                try {\r\n                  setLoading(true);\r\n                  \r\n                  await vacacionesService.crearSolicitudManual({\r\n                    empleadoId: entradaManualForm.empleadoId,\r\n                    tipo: entradaManualForm.tipoSolicitud,\r\n                    fechaInicio: entradaManualForm.fechaInicio,\r\n                    fechaFin: entradaManualForm.fechaFin,\r\n                    dias: dias,\r\n                    diasHabiles: diasHabiles,\r\n                    motivo: `[ENTRADA MANUAL - RRHH] ${entradaManualForm.justificacion}${entradaManualForm.documentoReferencia ? ` | Ref: ${entradaManualForm.documentoReferencia}` : ''}`\r\n                  });\r\n\r\n                  showNotification({\r\n                    title: 'Ã‰xito',\r\n                    message: `Solicitud registrada y ${dias} dÃ­as descontados del balance de ${entradaManualForm.empleadoNombre}`,\r\n                    color: 'green'\r\n                  });\r\n\r\n                  setEntradaManualForm({\r\n                    empleadoId: null,\r\n                    empleadoNombre: '',\r\n                    tipoSolicitud: 'vacaciones',\r\n                    fechaInicio: '',\r\n                    fechaFin: '',\r\n                    justificacion: '',\r\n                    documentoReferencia: ''\r\n                  });\r\n                  setEmpleadoBusqueda('');\r\n\r\n                  await cargarDatos();\r\n                } catch (error) {\r\n                  showNotification({\r\n                    title: 'Error',\r\n                    message: 'Error al registrar: ' + (error.response?.data?.error || error.message),\r\n                    color: 'red'\r\n                  });\r\n                } finally {\r\n                  setLoading(false);\r\n                }\r\n              }} style={{ maxWidth: '48rem' }}>\r\n                \r\n                {/* AquÃ­ va todo el resto del formulario que te di en el mensaje anterior */}\r\n              </form>\r\n            </div>\r\n          )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VacacionesModule;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{BarChart,Bar,XAxis,YAxis,Tooltip,Legend,ResponsiveContainer,LineChart,Line}from\"recharts\";import{Play,Save,Plus,Database,Download,FileText,BarChart3,X,Users,Building}from\"lucide-react\";import{useAuth}from\"../../../context/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||\"http://192.168.0.239:5000/api\";// Plantillas predefinidas para RRHH\nconst PLANTILLAS_RRHH=[{id:\"empleados_activos\",nombre:\"Empleados Activos\",descripcion:\"Lista de todos los empleados activos\",sql:\"SELECT e.Nombre, e.Apellido, e.Email, e.Cargo as Puesto, d.Nombre as Departamento FROM Empleados e LEFT JOIN Departamentos d ON e.DepartamentoID = d.DepartamentoID WHERE e.Estado = 1\"},{id:\"empleados_por_departamento\",nombre:\"Empleados por Departamento\",descripcion:\"Cantidad de empleados por departamento\",sql:\"SELECT d.Nombre as Departamento, COUNT(e.EmpleadoID) as Total_Empleados FROM Departamentos d LEFT JOIN Empleados e ON d.DepartamentoID = e.DepartamentoID WHERE e.Estado = 1 GROUP BY d.Nombre ORDER BY Total_Empleados DESC\"},{id:\"contrataciones_recientes\",nombre:\"Contrataciones Recientes\",descripcion:\"Empleados contratados en los últimos 90 días\",sql:\"SELECT e.Nombre, e.Apellido, e.Email, e.Cargo as Puesto, e.FechaIngreso, d.Nombre as Departamento FROM Empleados e LEFT JOIN Departamentos d ON e.DepartamentoID = d.DepartamentoID WHERE e.FechaIngreso >= DATEADD(day, -90, GETDATE()) ORDER BY e.FechaIngreso DESC\"},{id:\"salarios_promedio\",nombre:\"Salarios Promedio por Departamento\",descripcion:\"Salario promedio por departamento\",sql:\"SELECT d.Nombre as Departamento, AVG(CAST(e.Salario AS FLOAT)) as Salario_Promedio, COUNT(e.EmpleadoID) as Cantidad_Empleados FROM Departamentos d LEFT JOIN Empleados e ON d.DepartamentoID = e.DepartamentoID WHERE e.Estado = 1 GROUP BY d.Nombre ORDER BY Salario_Promedio DESC\"},{id:\"Severance\",nombre:\"Reporte Severance\",descripcion:\"Detalle de Preaviso, Cesantía, Vacaciones, Regalía y Total por empleado\",sql:`\n    SELECT \n        ROW_NUMBER() OVER (ORDER BY e.Cedula) AS No,\n        e.Nombre + ' ' + e.Apellido AS [Colaborador (a)],\n        e.Cedula,\n        e.Cargo AS Puesto, \n        FORMAT(e.FechaIngreso, 'dd-MMM-yy', 'es-DO') AS [Fecha de Ingreso],\n        e.Salario,\n\n        -- Preaviso (según años de servicio)\n        CASE \n            WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 3 THEN 0\n            WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 6 THEN ROUND((e.Salario / 30) * 7, 2)\n            WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 12 THEN ROUND((e.Salario / 30) * 14, 2)\n            ELSE ROUND((e.Salario / 30) * 28, 2)\n        END AS Preaviso,\n\n        -- Cesantía (según años de servicio)\n        CASE \n            WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 3 THEN 0\n            WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) BETWEEN 3 AND 5 \n                THEN ROUND((e.Salario / 30) * 6 * DATEDIFF(YEAR, e.FechaIngreso, GETDATE()), 2)\n            WHEN DATEDIFF(YEAR, e.FechaIngreso, GETDATE()) < 1 \n                THEN ROUND((e.Salario / 30) * 13, 2)\n            WHEN DATEDIFF(YEAR, e.FechaIngreso, GETDATE()) BETWEEN 1 AND 5 \n                THEN ROUND((e.Salario / 30) * 21 * DATEDIFF(YEAR, e.FechaIngreso, GETDATE()), 2)\n            ELSE ROUND((e.Salario / 30) * 23 * DATEDIFF(YEAR, e.FechaIngreso, GETDATE()), 2)\n        END AS Cesantia,\n\n        -- Vacaciones (14 días de salario por año trabajado)\n        ROUND((e.Salario / 30) * 14, 2) AS Vacaciones,\n\n        -- Regalía (2/3 de salario, ajusta a 1.0 si quieres salario completo)\n        ROUND(e.Salario * 0.6667, 2) AS Regalia,\n\n        -- Total beneficios\n        (\n            CASE \n                WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 3 THEN 0\n                WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 6 THEN ROUND((e.Salario / 30) * 7, 2)\n                WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 12 THEN ROUND((e.Salario / 30) * 14, 2)\n                ELSE ROUND((e.Salario / 30) * 28, 2)\n            END \n            +\n            CASE \n                WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 3 THEN 0\n                WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) BETWEEN 3 AND 5 \n                    THEN ROUND((e.Salario / 30) * 6 * DATEDIFF(YEAR, e.FechaIngreso, GETDATE()), 2)\n                WHEN DATEDIFF(YEAR, e.FechaIngreso, GETDATE()) < 1 \n                    THEN ROUND((e.Salario / 30) * 13, 2)\n                WHEN DATEDIFF(YEAR, e.FechaIngreso, GETDATE()) BETWEEN 1 AND 5 \n                    THEN ROUND((e.Salario / 30) * 21 * DATEDIFF(YEAR, e.FechaIngreso, GETDATE()), 2)\n                ELSE ROUND((e.Salario / 30) * 23 * DATEDIFF(YEAR, e.FechaIngreso, GETDATE()), 2)\n            END \n            + ROUND((e.Salario / 30) * 14, 2)\n            + ROUND(e.Salario * 0.6667, 2)\n        ) AS Total\n\n    FROM dbo.Empleados e\n    WHERE e.Estado = 1\n    ORDER BY e.Cedula;\n  `}];// Modal para crear nuevo reporte\nconst NuevoReporteModal=_ref=>{let{show,onClose,onSave}=_ref;const[formData,setFormData]=useState({nombre:\"\",descripcion:\"\",plantilla:\"\",sqlPersonalizado:\"\"});const[usarPlantilla,setUsarPlantilla]=useState(true);const handleSave=()=>{if(!formData.nombre.trim()){alert(\"El nombre del reporte es obligatorio\");return;}let sqlFinal=\"\";if(usarPlantilla&&formData.plantilla){const plantilla=PLANTILLAS_RRHH.find(p=>p.id===formData.plantilla);sqlFinal=plantilla?plantilla.sql:\"\";}else{sqlFinal=formData.sqlPersonalizado;}if(!sqlFinal.trim()){alert(\"Debe seleccionar una plantilla o escribir SQL personalizado\");return;}const reporte={nombre:formData.nombre.trim(),descripcion:formData.descripcion.trim(),origen:\"personalizado\",configuracion:{tipo:usarPlantilla?'plantilla':'personalizado',plantillaId:formData.plantilla,sqlQuery:sqlFinal}};onSave(reporte);resetForm();};const resetForm=()=>{setFormData({nombre:\"\",descripcion:\"\",plantilla:\"\",sqlPersonalizado:\"\"});setUsarPlantilla(true);};const handleClose=()=>{resetForm();onClose();};if(!show)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl w-[600px] max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800\",children:\"Crear Nuevo Reporte\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClose,className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-2 text-gray-700\",children:\"Nombre del Reporte *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.nombre,onChange:e=>setFormData(prev=>({...prev,nombre:e.target.value})),className:\"w-full border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Ej: Reporte Mensual de Empleados\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-2 text-gray-700\",children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.descripcion,onChange:e=>setFormData(prev=>({...prev,descripcion:e.target.value})),className:\"w-full border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",rows:3,placeholder:\"Describe brevemente este reporte...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-3 text-gray-700\",children:\"Tipo de Reporte\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",checked:usarPlantilla,onChange:()=>setUsarPlantilla(true),className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Usar plantilla predefinida\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",checked:!usarPlantilla,onChange:()=>setUsarPlantilla(false),className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:\"SQL personalizado\"})]})]})]}),usarPlantilla&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-2 text-gray-700\",children:\"Seleccionar Plantilla *\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.plantilla,onChange:e=>setFormData(prev=>({...prev,plantilla:e.target.value})),className:\"w-full border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Seleccione una plantilla --\"}),PLANTILLAS_RRHH.map(plantilla=>/*#__PURE__*/_jsxs(\"option\",{value:plantilla.id,children:[plantilla.nombre,\" - \",plantilla.descripcion]},plantilla.id))]})]}),!usarPlantilla&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium mb-2 text-gray-700\",children:\"Consulta SQL *\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.sqlPersonalizado,onChange:e=>setFormData(prev=>({...prev,sqlPersonalizado:e.target.value})),className:\"w-full border border-gray-300 p-3 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",rows:6,placeholder:\"SELECT columna1, columna2 FROM tabla WHERE condicion...\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-3 mt-6 pt-4 border-t\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleClose,className:\"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors\",children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,className:\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),\"Crear Reporte\"]})]})]})});};// Componente principal\nconst ReportesModule=()=>{const{getStoredToken}=useAuth();// Estados principales\nconst[reportes,setReportes]=useState([]);const[showModal,setShowModal]=useState(false);const[sqlQuery,setSqlQuery]=useState(\"\");const[data,setData]=useState([]);const[loading,setLoading]=useState(false);const[exportLoading,setExportLoading]=useState(false);const[error,setError]=useState(null);// Estados para plantillas rápidas\nconst[plantillaSeleccionada,setPlantillaSeleccionada]=useState(\"\");// Cargar reportes guardados\nuseEffect(()=>{cargarReportes();},[]);const cargarReportes=async()=>{try{const token=getStoredToken();if(!token)return;const response=await fetch(`${API_URL}/reportes/guardados`,{headers:{Authorization:`Bearer ${token}`,'Content-Type':'application/json'}});if(response.ok){const data=await response.json();setReportes(Array.isArray(data)?data:[]);}else if(response.status!==403){console.warn(\"Error cargando reportes:\",response.status);}}catch(err){console.warn(\"Error conectando:\",err.message);}};// Ejecutar consulta\nconst ejecutarConsulta=async function(){let sql=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;const queryToExecute=sql||sqlQuery;if(!queryToExecute.trim()){alert(\"Escriba una consulta SQL o seleccione una plantilla\");return;}setLoading(true);setError(null);try{const response=await fetch(`${API_URL}/reportes/custom`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${getStoredToken()}`},body:JSON.stringify({sqlQuery:queryToExecute})});if(response.ok){const result=await response.json();setData(result.data||[]);}else{const errorData=await response.json();throw new Error(errorData.details||`Error ${response.status}`);}}catch(err){setError(err.message);console.error(\"Error ejecutando consulta:\",err);}finally{setLoading(false);}};// Guardar reporte\nconst guardarReporte=async nuevoReporte=>{try{const response=await fetch(`${API_URL}/reportes/guardados`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${getStoredToken()}`},body:JSON.stringify(nuevoReporte)});if(response.ok){const saved=await response.json();setReportes(prev=>[...prev,saved]);setShowModal(false);alert(\"Reporte guardado exitosamente\");}else{const errorData=await response.json();throw new Error(errorData.details||`Error ${response.status}`);}}catch(err){console.error(\"Error guardando reporte:\",err);alert(\"Error guardando reporte: \"+err.message);}};// Ejecutar plantilla rápida\nconst ejecutarPlantilla=plantillaId=>{const plantilla=PLANTILLAS_RRHH.find(p=>p.id===plantillaId);if(plantilla){setSqlQuery(plantilla.sql);ejecutarConsulta(plantilla.sql);}};// Exportar datos\nconst exportarDatos=async formato=>{if(data.length===0){alert(\"No hay datos para exportar\");return;}setExportLoading(true);try{const response=await fetch(`${API_URL}/reportes/export`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${getStoredToken()}`},body:JSON.stringify({formato,data,nombre:`reporte_rrhh_${new Date().toISOString().split('T')[0]}`})});if(response.ok){const blob=await response.blob();const url=window.URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;const extensions={excel:'xlsx',csv:'csv',pdf:'pdf',json:'json'};link.download=`reporte_rrhh_${new Date().toISOString().split('T')[0]}.${extensions[formato]}`;document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);}else{throw new Error(`Error ${response.status}`);}}catch(err){console.error(\"Error exportando:\",err);alert(\"Error al exportar: \"+err.message);}finally{setExportLoading(false);}};// Cargar reporte guardado\nconst cargarReporte=reporte=>{if(reporte.configuracion&&reporte.configuracion.sqlQuery){setSqlQuery(reporte.configuracion.sqlQuery);ejecutarConsulta(reporte.configuracion.sqlQuery);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold flex items-center gap-3 text-gray-800\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-8 h-8 text-blue-600\"}),\"Reportes RRHH\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"Genera reportes personalizados para recursos humanos\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowModal(true),className:\"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 shadow-lg\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5\"}),\"Nuevo Reporte\"]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-red-500 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-red-700\",children:error})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setError(null),className:\"text-red-500 hover:text-red-700\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold flex items-center gap-2 text-gray-800\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-5 h-5 text-blue-600\"}),\"Plantillas R\\xE1pidas\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Reportes predefinidos m\\xE1s utilizados\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\",children:PLANTILLAS_RRHH.map(plantilla=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>ejecutarPlantilla(plantilla.id),disabled:loading,className:\"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all disabled:opacity-50 text-left group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(Building,{className:\"w-4 h-4 text-blue-600 group-hover:text-blue-700\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-800 group-hover:text-blue-700\",children:plantilla.nombre})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 group-hover:text-gray-700\",children:plantilla.descripcion})]},plantilla.id))})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold flex items-center gap-2 text-gray-800\",children:[/*#__PURE__*/_jsx(Database,{className:\"w-5 h-5 text-green-600\"}),\"Editor de Consultas\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Escribe tu consulta SQL personalizada\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:sqlQuery,onChange:e=>setSqlQuery(e.target.value),className:\"w-full border border-gray-300 rounded-lg p-4 font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",rows:8,placeholder:\"SELECT e.Nombre, e.Apellido, d.Nombre as Departamento \\r\\nFROM Empleados e \\r\\nLEFT JOIN Departamentos d ON e.DepartamentoID = d.DepartamentoID \\r\\nWHERE e.Estado = 1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>ejecutarConsulta(),disabled:loading||!sqlQuery.trim(),className:\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Play,{className:\"w-4 h-4\"}),loading?\"Ejecutando...\":\"Ejecutar Consulta\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSqlQuery(\"\"),className:\"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors\",children:\"Limpiar\"})]}),data.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>exportarDatos('excel'),disabled:exportLoading,className:\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"}),\"Excel\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>exportarDatos('csv'),disabled:exportLoading,className:\"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 disabled:opacity-50 transition-colors flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"}),\"CSV\"]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold flex items-center gap-2 text-gray-800\",children:[/*#__PURE__*/_jsx(FileText,{className:\"w-5 h-5 text-purple-600\"}),\"Reportes Guardados (\",reportes.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-sm font-medium text-gray-700\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-sm font-medium text-gray-700\",children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-sm font-medium text-gray-700\",children:\"Fecha Creaci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-sm font-medium text-gray-700\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200\",children:reportes.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",className:\"px-6 py-8 text-center text-gray-500\",children:\"No hay reportes guardados. Crea tu primer reporte personalizado.\"})}):reportes.map(reporte=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 font-medium text-gray-900\",children:reporte.nombre}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-gray-600\",children:reporte.descripcion||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-gray-600\",children:reporte.fechaCreacion||\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>cargarReporte(reporte),className:\"text-blue-600 hover:text-blue-800 hover:underline text-sm font-medium\",children:\"Ejecutar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"text-green-600 hover:text-green-800 hover:underline text-sm font-medium\",children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"text-red-600 hover:text-red-800 hover:underline text-sm font-medium\",children:\"Eliminar\"})]})})]},reporte.id))})]})})]}),data.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-800\",children:[\"Resultados (\",data.length,\" registros)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Consulta ejecutada exitosamente\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[data.length>0&&Object.keys(data[0]).length>=2&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:data.slice(0,10),children:[/*#__PURE__*/_jsx(XAxis,{dataKey:Object.keys(data[0])[0]}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:Object.keys(data[0])[1],fill:\"#3B82F6\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border border-gray-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsx(\"tr\",{children:Object.keys(data[0]||{}).map(key=>/*#__PURE__*/_jsx(\"th\",{className:\"border-b border-gray-200 px-4 py-3 text-left font-medium text-sm text-gray-700\",children:key},key))})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.slice(0,100).map((row,index)=>/*#__PURE__*/_jsx(\"tr\",{className:\"hover:bg-gray-50 transition-colors\",children:Object.values(row).map((value,cellIndex)=>/*#__PURE__*/_jsx(\"td\",{className:\"border-b border-gray-100 px-4 py-3 text-sm text-gray-900\",children:value},cellIndex))},index))})]}),data.length>100&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mt-3 text-center\",children:[\"Mostrando primeros 100 de \",data.length,\" registros\"]})]})]})]}),/*#__PURE__*/_jsx(NuevoReporteModal,{show:showModal,onClose:()=>setShowModal(false),onSave:guardarReporte})]});};export default ReportesModule;","map":{"version":3,"names":["React","useState","useEffect","BarChart","Bar","XAxis","YAxis","Tooltip","Legend","ResponsiveContainer","LineChart","Line","Play","Save","Plus","Database","Download","FileText","BarChart3","X","Users","Building","useAuth","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","PLANTILLAS_RRHH","id","nombre","descripcion","sql","NuevoReporteModal","_ref","show","onClose","onSave","formData","setFormData","plantilla","sqlPersonalizado","usarPlantilla","setUsarPlantilla","handleSave","trim","alert","sqlFinal","find","p","reporte","origen","configuracion","tipo","plantillaId","sqlQuery","resetForm","handleClose","className","children","onClick","type","value","onChange","e","prev","target","placeholder","rows","checked","map","ReportesModule","getStoredToken","reportes","setReportes","showModal","setShowModal","setSqlQuery","data","setData","loading","setLoading","exportLoading","setExportLoading","error","setError","plantillaSeleccionada","setPlantillaSeleccionada","cargarReportes","token","response","fetch","headers","Authorization","ok","json","Array","isArray","status","console","warn","err","message","ejecutarConsulta","arguments","length","undefined","queryToExecute","method","body","JSON","stringify","result","errorData","Error","details","guardarReporte","nuevoReporte","saved","ejecutarPlantilla","exportarDatos","formato","Date","toISOString","split","blob","url","window","URL","createObjectURL","link","document","createElement","href","extensions","excel","csv","pdf","download","appendChild","click","removeChild","revokeObjectURL","cargarReporte","disabled","colSpan","fechaCreacion","Object","keys","width","height","slice","dataKey","fill","key","row","index","values","cellIndex"],"sources":["C:/Users/josemontedeoca/rrhh-system/frontend/src/components/modules/Reportes/ReportesModule.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { BarChart, Bar, XAxis, YAxis, Tooltip, Legend, ResponsiveContainer, LineChart, Line } from \"recharts\";\r\nimport { Play, Save, Plus, Database, Download, FileText, BarChart3, X, Users, Building } from \"lucide-react\";\r\nimport { useAuth } from \"../../../context/AuthContext\";\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || \"http://192.168.0.239:5000/api\";\r\n\r\n// Plantillas predefinidas para RRHH\r\nconst PLANTILLAS_RRHH = [\r\n  {\r\n    id: \"empleados_activos\",\r\n    nombre: \"Empleados Activos\",\r\n    descripcion: \"Lista de todos los empleados activos\",\r\n    sql: \"SELECT e.Nombre, e.Apellido, e.Email, e.Cargo as Puesto, d.Nombre as Departamento FROM Empleados e LEFT JOIN Departamentos d ON e.DepartamentoID = d.DepartamentoID WHERE e.Estado = 1\"\r\n  },\r\n  {\r\n    id: \"empleados_por_departamento\", \r\n    nombre: \"Empleados por Departamento\",\r\n    descripcion: \"Cantidad de empleados por departamento\",\r\n    sql: \"SELECT d.Nombre as Departamento, COUNT(e.EmpleadoID) as Total_Empleados FROM Departamentos d LEFT JOIN Empleados e ON d.DepartamentoID = e.DepartamentoID WHERE e.Estado = 1 GROUP BY d.Nombre ORDER BY Total_Empleados DESC\"\r\n  },\r\n  {\r\n    id: \"contrataciones_recientes\",\r\n    nombre: \"Contrataciones Recientes\", \r\n    descripcion: \"Empleados contratados en los últimos 90 días\",\r\n    sql: \"SELECT e.Nombre, e.Apellido, e.Email, e.Cargo as Puesto, e.FechaIngreso, d.Nombre as Departamento FROM Empleados e LEFT JOIN Departamentos d ON e.DepartamentoID = d.DepartamentoID WHERE e.FechaIngreso >= DATEADD(day, -90, GETDATE()) ORDER BY e.FechaIngreso DESC\"\r\n  },\r\n  {\r\n    id: \"salarios_promedio\",\r\n    nombre: \"Salarios Promedio por Departamento\",\r\n    descripcion: \"Salario promedio por departamento\",\r\n    sql: \"SELECT d.Nombre as Departamento, AVG(CAST(e.Salario AS FLOAT)) as Salario_Promedio, COUNT(e.EmpleadoID) as Cantidad_Empleados FROM Departamentos d LEFT JOIN Empleados e ON d.DepartamentoID = e.DepartamentoID WHERE e.Estado = 1 GROUP BY d.Nombre ORDER BY Salario_Promedio DESC\"\r\n  },\r\n   {\r\n  id: \"Severance\",\r\n  nombre: \"Reporte Severance\",\r\n  descripcion: \"Detalle de Preaviso, Cesantía, Vacaciones, Regalía y Total por empleado\",\r\n  sql: `\r\n    SELECT \r\n        ROW_NUMBER() OVER (ORDER BY e.Cedula) AS No,\r\n        e.Nombre + ' ' + e.Apellido AS [Colaborador (a)],\r\n        e.Cedula,\r\n        e.Cargo AS Puesto, \r\n        FORMAT(e.FechaIngreso, 'dd-MMM-yy', 'es-DO') AS [Fecha de Ingreso],\r\n        e.Salario,\r\n\r\n        -- Preaviso (según años de servicio)\r\n        CASE \r\n            WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 3 THEN 0\r\n            WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 6 THEN ROUND((e.Salario / 30) * 7, 2)\r\n            WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 12 THEN ROUND((e.Salario / 30) * 14, 2)\r\n            ELSE ROUND((e.Salario / 30) * 28, 2)\r\n        END AS Preaviso,\r\n\r\n        -- Cesantía (según años de servicio)\r\n        CASE \r\n            WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 3 THEN 0\r\n            WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) BETWEEN 3 AND 5 \r\n                THEN ROUND((e.Salario / 30) * 6 * DATEDIFF(YEAR, e.FechaIngreso, GETDATE()), 2)\r\n            WHEN DATEDIFF(YEAR, e.FechaIngreso, GETDATE()) < 1 \r\n                THEN ROUND((e.Salario / 30) * 13, 2)\r\n            WHEN DATEDIFF(YEAR, e.FechaIngreso, GETDATE()) BETWEEN 1 AND 5 \r\n                THEN ROUND((e.Salario / 30) * 21 * DATEDIFF(YEAR, e.FechaIngreso, GETDATE()), 2)\r\n            ELSE ROUND((e.Salario / 30) * 23 * DATEDIFF(YEAR, e.FechaIngreso, GETDATE()), 2)\r\n        END AS Cesantia,\r\n\r\n        -- Vacaciones (14 días de salario por año trabajado)\r\n        ROUND((e.Salario / 30) * 14, 2) AS Vacaciones,\r\n\r\n        -- Regalía (2/3 de salario, ajusta a 1.0 si quieres salario completo)\r\n        ROUND(e.Salario * 0.6667, 2) AS Regalia,\r\n\r\n        -- Total beneficios\r\n        (\r\n            CASE \r\n                WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 3 THEN 0\r\n                WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 6 THEN ROUND((e.Salario / 30) * 7, 2)\r\n                WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 12 THEN ROUND((e.Salario / 30) * 14, 2)\r\n                ELSE ROUND((e.Salario / 30) * 28, 2)\r\n            END \r\n            +\r\n            CASE \r\n                WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) < 3 THEN 0\r\n                WHEN DATEDIFF(MONTH, e.FechaIngreso, GETDATE()) BETWEEN 3 AND 5 \r\n                    THEN ROUND((e.Salario / 30) * 6 * DATEDIFF(YEAR, e.FechaIngreso, GETDATE()), 2)\r\n                WHEN DATEDIFF(YEAR, e.FechaIngreso, GETDATE()) < 1 \r\n                    THEN ROUND((e.Salario / 30) * 13, 2)\r\n                WHEN DATEDIFF(YEAR, e.FechaIngreso, GETDATE()) BETWEEN 1 AND 5 \r\n                    THEN ROUND((e.Salario / 30) * 21 * DATEDIFF(YEAR, e.FechaIngreso, GETDATE()), 2)\r\n                ELSE ROUND((e.Salario / 30) * 23 * DATEDIFF(YEAR, e.FechaIngreso, GETDATE()), 2)\r\n            END \r\n            + ROUND((e.Salario / 30) * 14, 2)\r\n            + ROUND(e.Salario * 0.6667, 2)\r\n        ) AS Total\r\n\r\n    FROM dbo.Empleados e\r\n    WHERE e.Estado = 1\r\n    ORDER BY e.Cedula;\r\n  `\r\n}\r\n\r\n  \r\n];\r\n\r\n// Modal para crear nuevo reporte\r\nconst NuevoReporteModal = ({ show, onClose, onSave }) => {\r\n  const [formData, setFormData] = useState({\r\n    nombre: \"\",\r\n    descripcion: \"\",\r\n    plantilla: \"\",\r\n    sqlPersonalizado: \"\"\r\n  });\r\n\r\n  const [usarPlantilla, setUsarPlantilla] = useState(true);\r\n\r\n  const handleSave = () => {\r\n    if (!formData.nombre.trim()) {\r\n      alert(\"El nombre del reporte es obligatorio\");\r\n      return;\r\n    }\r\n\r\n    let sqlFinal = \"\";\r\n    if (usarPlantilla && formData.plantilla) {\r\n      const plantilla = PLANTILLAS_RRHH.find(p => p.id === formData.plantilla);\r\n      sqlFinal = plantilla ? plantilla.sql : \"\";\r\n    } else {\r\n      sqlFinal = formData.sqlPersonalizado;\r\n    }\r\n\r\n    if (!sqlFinal.trim()) {\r\n      alert(\"Debe seleccionar una plantilla o escribir SQL personalizado\");\r\n      return;\r\n    }\r\n\r\n    const reporte = {\r\n      nombre: formData.nombre.trim(),\r\n      descripcion: formData.descripcion.trim(),\r\n      origen: \"personalizado\",\r\n      configuracion: {\r\n        tipo: usarPlantilla ? 'plantilla' : 'personalizado',\r\n        plantillaId: formData.plantilla,\r\n        sqlQuery: sqlFinal\r\n      }\r\n    };\r\n\r\n    onSave(reporte);\r\n    resetForm();\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      nombre: \"\",\r\n      descripcion: \"\", \r\n      plantilla: \"\",\r\n      sqlPersonalizado: \"\"\r\n    });\r\n    setUsarPlantilla(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    resetForm();\r\n    onClose();\r\n  };\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\">\r\n      <div className=\"bg-white p-6 rounded-lg shadow-xl w-[600px] max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h3 className=\"text-xl font-bold text-gray-800\">Crear Nuevo Reporte</h3>\r\n          <button onClick={handleClose} className=\"text-gray-500 hover:text-gray-700\">\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"space-y-4\">\r\n          {/* Información básica */}\r\n          <div>\r\n            <label className=\"block font-medium mb-2 text-gray-700\">Nombre del Reporte *</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.nombre}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, nombre: e.target.value }))}\r\n              className=\"w-full border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              placeholder=\"Ej: Reporte Mensual de Empleados\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block font-medium mb-2 text-gray-700\">Descripción</label>\r\n            <textarea\r\n              value={formData.descripcion}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, descripcion: e.target.value }))}\r\n              className=\"w-full border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              rows={3}\r\n              placeholder=\"Describe brevemente este reporte...\"\r\n            />\r\n          </div>\r\n\r\n          {/* Selector de tipo */}\r\n          <div className=\"border-t pt-4\">\r\n            <label className=\"block font-medium mb-3 text-gray-700\">Tipo de Reporte</label>\r\n            <div className=\"flex gap-4\">\r\n              <label className=\"flex items-center cursor-pointer\">\r\n                <input\r\n                  type=\"radio\"\r\n                  checked={usarPlantilla}\r\n                  onChange={() => setUsarPlantilla(true)}\r\n                  className=\"mr-2\"\r\n                />\r\n                <span>Usar plantilla predefinida</span>\r\n              </label>\r\n              <label className=\"flex items-center cursor-pointer\">\r\n                <input\r\n                  type=\"radio\"\r\n                  checked={!usarPlantilla}\r\n                  onChange={() => setUsarPlantilla(false)}\r\n                  className=\"mr-2\"\r\n                />\r\n                <span>SQL personalizado</span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Plantillas predefinidas */}\r\n          {usarPlantilla && (\r\n            <div>\r\n              <label className=\"block font-medium mb-2 text-gray-700\">Seleccionar Plantilla *</label>\r\n              <select\r\n                value={formData.plantilla}\r\n                onChange={(e) => setFormData(prev => ({ ...prev, plantilla: e.target.value }))}\r\n                className=\"w-full border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              >\r\n                <option value=\"\">-- Seleccione una plantilla --</option>\r\n                {PLANTILLAS_RRHH.map(plantilla => (\r\n                  <option key={plantilla.id} value={plantilla.id}>\r\n                    {plantilla.nombre} - {plantilla.descripcion}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          )}\r\n\r\n          {/* SQL personalizado */}\r\n          {!usarPlantilla && (\r\n            <div>\r\n              <label className=\"block font-medium mb-2 text-gray-700\">Consulta SQL *</label>\r\n              <textarea\r\n                value={formData.sqlPersonalizado}\r\n                onChange={(e) => setFormData(prev => ({ ...prev, sqlPersonalizado: e.target.value }))}\r\n                className=\"w-full border border-gray-300 p-3 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                rows={6}\r\n                placeholder=\"SELECT columna1, columna2 FROM tabla WHERE condicion...\"\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex justify-end gap-3 mt-6 pt-4 border-t\">\r\n          <button \r\n            onClick={handleClose} \r\n            className=\"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors\"\r\n          >\r\n            Cancelar\r\n          </button>\r\n          <button\r\n            onClick={handleSave}\r\n            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2\"\r\n          >\r\n            <Save className=\"w-4 h-4\" />\r\n            Crear Reporte\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Componente principal\r\nconst ReportesModule = () => {\r\n  const { getStoredToken } = useAuth();\r\n  \r\n  // Estados principales\r\n  const [reportes, setReportes] = useState([]);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [sqlQuery, setSqlQuery] = useState(\"\");\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [exportLoading, setExportLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  \r\n  // Estados para plantillas rápidas\r\n  const [plantillaSeleccionada, setPlantillaSeleccionada] = useState(\"\");\r\n\r\n  // Cargar reportes guardados\r\n  useEffect(() => {\r\n    cargarReportes();\r\n  }, []);\r\n\r\n  const cargarReportes = async () => {\r\n    try {\r\n      const token = getStoredToken();\r\n      if (!token) return;\r\n\r\n      const response = await fetch(`${API_URL}/reportes/guardados`, {\r\n        headers: { \r\n          Authorization: `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setReportes(Array.isArray(data) ? data : []);\r\n      } else if (response.status !== 403) {\r\n        console.warn(\"Error cargando reportes:\", response.status);\r\n      }\r\n    } catch (err) {\r\n      console.warn(\"Error conectando:\", err.message);\r\n    }\r\n  };\r\n\r\n  // Ejecutar consulta\r\n  const ejecutarConsulta = async (sql = null) => {\r\n    const queryToExecute = sql || sqlQuery;\r\n    \r\n    if (!queryToExecute.trim()) {\r\n      alert(\"Escriba una consulta SQL o seleccione una plantilla\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch(`${API_URL}/reportes/custom`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${getStoredToken()}`\r\n        },\r\n        body: JSON.stringify({ sqlQuery: queryToExecute })\r\n      });\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setData(result.data || []);\r\n      } else {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.details || `Error ${response.status}`);\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n      console.error(\"Error ejecutando consulta:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Guardar reporte\r\n  const guardarReporte = async (nuevoReporte) => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/reportes/guardados`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${getStoredToken()}`\r\n        },\r\n        body: JSON.stringify(nuevoReporte)\r\n      });\r\n\r\n      if (response.ok) {\r\n        const saved = await response.json();\r\n        setReportes(prev => [...prev, saved]);\r\n        setShowModal(false);\r\n        alert(\"Reporte guardado exitosamente\");\r\n      } else {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.details || `Error ${response.status}`);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error guardando reporte:\", err);\r\n      alert(\"Error guardando reporte: \" + err.message);\r\n    }\r\n  };\r\n\r\n  // Ejecutar plantilla rápida\r\n  const ejecutarPlantilla = (plantillaId) => {\r\n    const plantilla = PLANTILLAS_RRHH.find(p => p.id === plantillaId);\r\n    if (plantilla) {\r\n      setSqlQuery(plantilla.sql);\r\n      ejecutarConsulta(plantilla.sql);\r\n    }\r\n  };\r\n\r\n  // Exportar datos\r\n  const exportarDatos = async (formato) => {\r\n    if (data.length === 0) {\r\n      alert(\"No hay datos para exportar\");\r\n      return;\r\n    }\r\n\r\n    setExportLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(`${API_URL}/reportes/export`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${getStoredToken()}`\r\n        },\r\n        body: JSON.stringify({\r\n          formato,\r\n          data,\r\n          nombre: `reporte_rrhh_${new Date().toISOString().split('T')[0]}`\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        const blob = await response.blob();\r\n        const url = window.URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        \r\n        const extensions = {\r\n          excel: 'xlsx',\r\n          csv: 'csv',\r\n          pdf: 'pdf',\r\n          json: 'json'\r\n        };\r\n        \r\n        link.download = `reporte_rrhh_${new Date().toISOString().split('T')[0]}.${extensions[formato]}`;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        window.URL.revokeObjectURL(url);\r\n      } else {\r\n        throw new Error(`Error ${response.status}`);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error exportando:\", err);\r\n      alert(\"Error al exportar: \" + err.message);\r\n    } finally {\r\n      setExportLoading(false);\r\n    }\r\n  };\r\n\r\n  // Cargar reporte guardado\r\n  const cargarReporte = (reporte) => {\r\n    if (reporte.configuracion && reporte.configuracion.sqlQuery) {\r\n      setSqlQuery(reporte.configuracion.sqlQuery);\r\n      ejecutarConsulta(reporte.configuracion.sqlQuery);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-7xl mx-auto\">\r\n      {/* Header */}\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold flex items-center gap-3 text-gray-800\">\r\n            <BarChart3 className=\"w-8 h-8 text-blue-600\" />\r\n            Reportes RRHH\r\n          </h1>\r\n          <p className=\"text-gray-600 mt-2\">Genera reportes personalizados para recursos humanos</p>\r\n        </div>\r\n        <button\r\n          onClick={() => setShowModal(true)}\r\n          className=\"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 shadow-lg\"\r\n        >\r\n          <Plus className=\"w-5 h-5\" />\r\n          Nuevo Reporte\r\n        </button>\r\n      </div>\r\n\r\n      {/* Error */}\r\n      {error && (\r\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex justify-between items-center\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-4 h-4 bg-red-500 rounded-full\"></div>\r\n            <span className=\"text-red-700\">{error}</span>\r\n          </div>\r\n          <button onClick={() => setError(null)} className=\"text-red-500 hover:text-red-700\">\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Plantillas rápidas */}\r\n      <div className=\"bg-white rounded-lg shadow-sm mb-6\">\r\n        <div className=\"p-6 border-b border-gray-200\">\r\n          <h3 className=\"text-lg font-semibold flex items-center gap-2 text-gray-800\">\r\n            <Users className=\"w-5 h-5 text-blue-600\" />\r\n            Plantillas Rápidas\r\n          </h3>\r\n          <p className=\"text-sm text-gray-600 mt-1\">Reportes predefinidos más utilizados</p>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n            {PLANTILLAS_RRHH.map(plantilla => (\r\n              <button\r\n                key={plantilla.id}\r\n                onClick={() => ejecutarPlantilla(plantilla.id)}\r\n                disabled={loading}\r\n                className=\"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all disabled:opacity-50 text-left group\"\r\n              >\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <Building className=\"w-4 h-4 text-blue-600 group-hover:text-blue-700\" />\r\n                  <h4 className=\"font-medium text-gray-800 group-hover:text-blue-700\">\r\n                    {plantilla.nombre}\r\n                  </h4>\r\n                </div>\r\n                <p className=\"text-sm text-gray-600 group-hover:text-gray-700\">\r\n                  {plantilla.descripcion}\r\n                </p>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Editor SQL */}\r\n      <div className=\"bg-white rounded-lg shadow-sm mb-6\">\r\n        <div className=\"p-6 border-b border-gray-200\">\r\n          <h3 className=\"text-lg font-semibold flex items-center gap-2 text-gray-800\">\r\n            <Database className=\"w-5 h-5 text-green-600\" />\r\n            Editor de Consultas\r\n          </h3>\r\n          <p className=\"text-sm text-gray-600 mt-1\">Escribe tu consulta SQL personalizada</p>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          <textarea\r\n            value={sqlQuery}\r\n            onChange={(e) => setSqlQuery(e.target.value)}\r\n            className=\"w-full border border-gray-300 rounded-lg p-4 font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            rows={8}\r\n            placeholder=\"SELECT e.Nombre, e.Apellido, d.Nombre as Departamento \r\nFROM Empleados e \r\nLEFT JOIN Departamentos d ON e.DepartamentoID = d.DepartamentoID \r\nWHERE e.Estado = 1\"\r\n          />\r\n          \r\n          <div className=\"flex justify-between items-center mt-4\">\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={() => ejecutarConsulta()}\r\n                disabled={loading || !sqlQuery.trim()}\r\n                className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center gap-2\"\r\n              >\r\n                <Play className=\"w-4 h-4\" />\r\n                {loading ? \"Ejecutando...\" : \"Ejecutar Consulta\"}\r\n              </button>\r\n              \r\n              <button\r\n                onClick={() => setSqlQuery(\"\")}\r\n                className=\"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors\"\r\n              >\r\n                Limpiar\r\n              </button>\r\n            </div>\r\n\r\n            {data.length > 0 && (\r\n              <div className=\"flex gap-2\">\r\n                <button\r\n                  onClick={() => exportarDatos('excel')}\r\n                  disabled={exportLoading}\r\n                  className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center gap-1\"\r\n                >\r\n                  <Download className=\"w-4 h-4\" />\r\n                  Excel\r\n                </button>\r\n                <button\r\n                  onClick={() => exportarDatos('csv')}\r\n                  disabled={exportLoading}\r\n                  className=\"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 disabled:opacity-50 transition-colors flex items-center gap-1\"\r\n                >\r\n                  <Download className=\"w-4 h-4\" />\r\n                  CSV\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Reportes guardados */}\r\n      <div className=\"bg-white rounded-lg shadow-sm mb-6\">\r\n        <div className=\"p-6 border-b border-gray-200\">\r\n          <h3 className=\"text-lg font-semibold flex items-center gap-2 text-gray-800\">\r\n            <FileText className=\"w-5 h-5 text-purple-600\" />\r\n            Reportes Guardados ({reportes.length})\r\n          </h3>\r\n        </div>\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-6 py-4 text-left text-sm font-medium text-gray-700\">Nombre</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-medium text-gray-700\">Descripción</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-medium text-gray-700\">Fecha Creación</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-medium text-gray-700\">Acciones</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-200\">\r\n              {reportes.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan=\"4\" className=\"px-6 py-8 text-center text-gray-500\">\r\n                    No hay reportes guardados. Crea tu primer reporte personalizado.\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                reportes.map((reporte) => (\r\n                  <tr key={reporte.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                    <td className=\"px-6 py-4 font-medium text-gray-900\">{reporte.nombre}</td>\r\n                    <td className=\"px-6 py-4 text-gray-600\">{reporte.descripcion || \"-\"}</td>\r\n                    <td className=\"px-6 py-4 text-gray-600\">{reporte.fechaCreacion || \"-\"}</td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex gap-2\">\r\n                        <button \r\n                          onClick={() => cargarReporte(reporte)}\r\n                          className=\"text-blue-600 hover:text-blue-800 hover:underline text-sm font-medium\"\r\n                        >\r\n                          Ejecutar\r\n                        </button>\r\n                        <button className=\"text-green-600 hover:text-green-800 hover:underline text-sm font-medium\">\r\n                          Editar\r\n                        </button>\r\n                        <button className=\"text-red-600 hover:text-red-800 hover:underline text-sm font-medium\">\r\n                          Eliminar\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Resultados */}\r\n      {data.length > 0 && (\r\n        <div className=\"bg-white rounded-lg shadow-sm\">\r\n          <div className=\"p-6 border-b border-gray-200\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <h3 className=\"text-lg font-semibold text-gray-800\">\r\n                Resultados ({data.length} registros)\r\n              </h3>\r\n              <div className=\"text-sm text-gray-600\">\r\n                Consulta ejecutada exitosamente\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"p-6\">\r\n            {/* Gráfico simple */}\r\n            {data.length > 0 && Object.keys(data[0]).length >= 2 && (\r\n              <div className=\"mb-6\">\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <BarChart data={data.slice(0, 10)}>\r\n                    <XAxis dataKey={Object.keys(data[0])[0]} />\r\n                    <YAxis />\r\n                    <Tooltip />\r\n                    <Legend />\r\n                    <Bar dataKey={Object.keys(data[0])[1]} fill=\"#3B82F6\" />\r\n                  </BarChart>\r\n                </ResponsiveContainer>\r\n              </div>\r\n            )}\r\n\r\n            {/* Tabla de datos */}\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full border border-gray-200 rounded-lg\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    {Object.keys(data[0] || {}).map((key) => (\r\n                      <th key={key} className=\"border-b border-gray-200 px-4 py-3 text-left font-medium text-sm text-gray-700\">\r\n                        {key}\r\n                      </th>\r\n                    ))}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {data.slice(0, 100).map((row, index) => (\r\n                    <tr key={index} className=\"hover:bg-gray-50 transition-colors\">\r\n                      {Object.values(row).map((value, cellIndex) => (\r\n                        <td key={cellIndex} className=\"border-b border-gray-100 px-4 py-3 text-sm text-gray-900\">\r\n                          {value}\r\n                        </td>\r\n                      ))}\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n              {data.length > 100 && (\r\n                <p className=\"text-sm text-gray-500 mt-3 text-center\">\r\n                  Mostrando primeros 100 de {data.length} registros\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal */}\r\n      <NuevoReporteModal\r\n        show={showModal}\r\n        onClose={() => setShowModal(false)}\r\n        onSave={guardarReporte}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportesModule;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
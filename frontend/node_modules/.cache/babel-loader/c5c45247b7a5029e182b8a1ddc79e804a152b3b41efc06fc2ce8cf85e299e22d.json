{"ast":null,"code":"// src/api/api.js\nimport axios from'axios';const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';console.log('üåê Configurando API con URL base:',API_BASE_URL);const api=axios.create({baseURL:API_BASE_URL,timeout:30000,// 30 segundos\nheaders:{'Content-Type':'application/json'}});// Interceptor de REQUEST\napi.interceptors.request.use(config=>{var _config$method;const token=localStorage.getItem('rrhh_token');console.log('üì§ REQUEST:',{method:(_config$method=config.method)===null||_config$method===void 0?void 0:_config$method.toUpperCase(),url:config.url,baseURL:config.baseURL,fullURL:`${config.baseURL}${config.url}`,hasToken:!!token,tokenPreview:token?`${token.substring(0,20)}...`:null});if(token){// Validar que el token no est√© corrupto\nif(token==='undefined'||token==='null'||token.length<10){console.error('üö® Token inv√°lido detectado - removiendo');localStorage.removeItem('rrhh_token');window.location.reload();return Promise.reject(new Error('Token inv√°lido'));}config.headers.Authorization=`Bearer ${token}`;}return config;},error=>{console.error('‚ùå Error en REQUEST interceptor:',error);return Promise.reject(error);});// Interceptor de RESPONSE\napi.interceptors.response.use(response=>{console.log('üì• RESPONSE SUCCESS:',{status:response.status,url:response.config.url,dataType:typeof response.data,dataSize:response.data?JSON.stringify(response.data).length:0,data:response.data});return response;},error=>{var _error$response,_error$response2,_error$config,_error$response3,_error$response4,_error$response5,_error$response6;const errorDetails={message:error.message,status:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,statusText:(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.statusText,url:(_error$config=error.config)===null||_error$config===void 0?void 0:_error$config.url,data:(_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.data,headers:(_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.headers};console.error('‚ùå RESPONSE ERROR:',errorDetails);// Manejo espec√≠fico de errores de autenticaci√≥n\nif(((_error$response5=error.response)===null||_error$response5===void 0?void 0:_error$response5.status)===401){console.warn('üîê Error 401 - Token expirado o inv√°lido');localStorage.removeItem('rrhh_token');// Solo redirigir si no estamos ya en login\nif(!window.location.pathname.includes('/login')){window.location.href='/login';}}// Manejo de errores de conexi√≥n\nif(error.code==='ECONNABORTED'||error.message.includes('timeout')){console.error('‚è±Ô∏è Timeout de conexi√≥n');return Promise.reject(new Error('Tiempo de espera agotado. Verifique su conexi√≥n.'));}// Manejo de errores de red\nif(error.code==='ERR_NETWORK'||!error.response){console.error('üåê Error de red o servidor no disponible');return Promise.reject(new Error('No se pudo conectar con el servidor. Verifique que est√© ejecut√°ndose.'));}// Si el error es \"tr\" o similar, es probable un problema de parsing/token\nif(error.message==='tr'||((_error$response6=error.response)===null||_error$response6===void 0?void 0:_error$response6.data)==='tr'){console.error('üö® Error \"tr\" detectado - posible problema de token o servidor');localStorage.removeItem('rrhh_token');return Promise.reject(new Error('Error de autenticaci√≥n - por favor inicie sesi√≥n nuevamente'));}return Promise.reject(error);});// Funci√≥n de utilidad para testing\napi.testConnection=async()=>{try{console.log('üß™ Probando conexi√≥n con la API...');const response=await api.get('/health');console.log('‚úÖ Conexi√≥n exitosa');return true;}catch(error){console.error('‚ùå Error de conexi√≥n:',error.message);return false;}};export default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","console","log","api","create","baseURL","timeout","headers","interceptors","request","use","config","_config$method","token","localStorage","getItem","method","toUpperCase","url","fullURL","hasToken","tokenPreview","substring","length","error","removeItem","window","location","reload","Promise","reject","Error","Authorization","response","status","dataType","data","dataSize","JSON","stringify","_error$response","_error$response2","_error$config","_error$response3","_error$response4","_error$response5","_error$response6","errorDetails","message","statusText","warn","pathname","includes","href","code","testConnection","get"],"sources":["C:/Users/josemontedeoca/rrhh-system/frontend/src/api/vacantesService.js"],"sourcesContent":["// src/api/api.js\r\nimport axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nconsole.log('üåê Configurando API con URL base:', API_BASE_URL);\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 30000, // 30 segundos\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Interceptor de REQUEST\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('rrhh_token');\r\n    \r\n    console.log('üì§ REQUEST:', {\r\n      method: config.method?.toUpperCase(),\r\n      url: config.url,\r\n      baseURL: config.baseURL,\r\n      fullURL: `${config.baseURL}${config.url}`,\r\n      hasToken: !!token,\r\n      tokenPreview: token ? `${token.substring(0, 20)}...` : null\r\n    });\r\n\r\n    if (token) {\r\n      // Validar que el token no est√© corrupto\r\n      if (token === 'undefined' || token === 'null' || token.length < 10) {\r\n        console.error('üö® Token inv√°lido detectado - removiendo');\r\n        localStorage.removeItem('rrhh_token');\r\n        window.location.reload();\r\n        return Promise.reject(new Error('Token inv√°lido'));\r\n      }\r\n      \r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n\r\n    return config;\r\n  },\r\n  (error) => {\r\n    console.error('‚ùå Error en REQUEST interceptor:', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Interceptor de RESPONSE\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    console.log('üì• RESPONSE SUCCESS:', {\r\n      status: response.status,\r\n      url: response.config.url,\r\n      dataType: typeof response.data,\r\n      dataSize: response.data ? JSON.stringify(response.data).length : 0,\r\n      data: response.data\r\n    });\r\n    \r\n    return response;\r\n  },\r\n  (error) => {\r\n    const errorDetails = {\r\n      message: error.message,\r\n      status: error.response?.status,\r\n      statusText: error.response?.statusText,\r\n      url: error.config?.url,\r\n      data: error.response?.data,\r\n      headers: error.response?.headers\r\n    };\r\n\r\n    console.error('‚ùå RESPONSE ERROR:', errorDetails);\r\n\r\n    // Manejo espec√≠fico de errores de autenticaci√≥n\r\n    if (error.response?.status === 401) {\r\n      console.warn('üîê Error 401 - Token expirado o inv√°lido');\r\n      localStorage.removeItem('rrhh_token');\r\n      \r\n      // Solo redirigir si no estamos ya en login\r\n      if (!window.location.pathname.includes('/login')) {\r\n        window.location.href = '/login';\r\n      }\r\n    }\r\n\r\n    // Manejo de errores de conexi√≥n\r\n    if (error.code === 'ECONNABORTED' || error.message.includes('timeout')) {\r\n      console.error('‚è±Ô∏è Timeout de conexi√≥n');\r\n      return Promise.reject(new Error('Tiempo de espera agotado. Verifique su conexi√≥n.'));\r\n    }\r\n\r\n    // Manejo de errores de red\r\n    if (error.code === 'ERR_NETWORK' || !error.response) {\r\n      console.error('üåê Error de red o servidor no disponible');\r\n      return Promise.reject(new Error('No se pudo conectar con el servidor. Verifique que est√© ejecut√°ndose.'));\r\n    }\r\n\r\n    // Si el error es \"tr\" o similar, es probable un problema de parsing/token\r\n    if (error.message === 'tr' || error.response?.data === 'tr') {\r\n      console.error('üö® Error \"tr\" detectado - posible problema de token o servidor');\r\n      localStorage.removeItem('rrhh_token');\r\n      return Promise.reject(new Error('Error de autenticaci√≥n - por favor inicie sesi√≥n nuevamente'));\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Funci√≥n de utilidad para testing\r\napi.testConnection = async () => {\r\n  try {\r\n    console.log('üß™ Probando conexi√≥n con la API...');\r\n    const response = await api.get('/health');\r\n    console.log('‚úÖ Conexi√≥n exitosa');\r\n    return true;\r\n  } catch (error) {\r\n    console.error('‚ùå Error de conexi√≥n:', error.message);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
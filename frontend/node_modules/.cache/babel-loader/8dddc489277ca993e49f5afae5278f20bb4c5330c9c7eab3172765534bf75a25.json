{"ast":null,"code":"/// src/context/AuthContext.jsx\nimport React,{createContext,useContext,useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[permisos,setPermisos]=useState([]);const[loading,setLoading]=useState(true);const API_URL=process.env.REACT_APP_API_URL||'http://192.168.0.239:5000/api';// ============================\n// FUNCIÓN PARA OBTENER TOKEN\n// ============================\nconst getStoredToken=()=>{const token=localStorage.getItem('rrhh_token');console.log('getStoredToken llamado, token:',token?'presente':'ausente');return token;};// ============================\n// CONFIGURAR AXIOS INTERCEPTORS\n// ============================\nuseEffect(()=>{const requestInterceptor=axios.interceptors.request.use(config=>{const token=getStoredToken();if(token)config.headers.Authorization=`Bearer ${token}`;return config;},error=>Promise.reject(error));const responseInterceptor=axios.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401)logout();return Promise.reject(error);});return()=>{axios.interceptors.request.eject(requestInterceptor);axios.interceptors.response.eject(responseInterceptor);};},[]);// ============================\n// VALIDAR TOKEN\n// ============================\nconst isTokenValid=token=>{if(!token)return false;try{if(token.length<10)return false;if(token.includes('.')){const parts=token.split('.');if(parts.length!==3)return false;const payload=JSON.parse(atob(parts[1]));if(!payload.exp)return true;const currentTime=Date.now()/1000;return payload.exp>currentTime;}else{return true;}}catch(error){console.error('Error validando token:',error);return false;}};const mapEstado=estado=>estado===1||estado===true?'Activo':'Inactivo';const formatUser=userData=>({id:userData.id,name:`${userData.nombre||''} ${userData.apellido||''}`.trim()||'Usuario',position:userData.puesto||userData.rol||'',role:userData.rol||'Sistema',email:userData.email,empleadoId:userData.empleadoId,estado:mapEstado(userData.estado)});// ============================\n// LOGIN\n// ============================\nconst login=async(email,password)=>{setLoading(true);try{const res=await fetch(`${API_URL}/auth/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});const data=await res.json();if(!res.ok)throw new Error(data.message||'Error al iniciar sesión');localStorage.setItem('rrhh_token',data.token);const formattedUser=formatUser(data.user);setUser(formattedUser);setPermisos(data.permisos||[]);return{success:true};}catch(error){console.error('Error en login:',error);return{success:false,error:error.message};}finally{setLoading(false);}};// ============================\n// LOGOUT\n// ============================\nconst logout=()=>{localStorage.removeItem('rrhh_token');setUser(null);setPermisos([]);};// ============================\n// VERIFICAR USUARIO\n// ============================\nconst verifyUser=async()=>{setLoading(true);const token=getStoredToken();if(!token||!isTokenValid(token)){logout();setLoading(false);return;}try{var _data$user$estado;const res=await fetch(`${API_URL}/auth/verify`,{headers:{'Content-Type':'application/json',Authorization:`Bearer ${token}`}});const data=await res.json();if(!data.user){logout();return;}const userEstado=(_data$user$estado=data.user.estado)!==null&&_data$user$estado!==void 0?_data$user$estado:1;if(userEstado===1||userEstado===true){setUser(formatUser(data.user));setPermisos(data.permisos||[]);}else{logout();}}catch(error){console.error('Error verificando usuario:',error);logout();}finally{setLoading(false);}};useEffect(()=>{verifyUser();},[]);// ============================\n// FORGOT PASSWORD\n// ============================\nconst forgotPassword=async email=>{try{const res=await fetch(`${API_URL}/auth/forgot-password`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email})});const data=await res.json();if(!res.ok)throw new Error(data.message||'Error al enviar email');return{success:true,message:data.message||'Email enviado correctamente'};}catch(error){return{success:false,error:error.message};}};// ============================\n// RESET PASSWORD\n// ============================\nconst resetPassword=async(token,newPassword)=>{try{const res=await fetch(`${API_URL}/auth/reset-password`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({token,newPassword})});const data=await res.json();if(!res.ok)throw new Error(data.message||'Error al restablecer contraseña');return{success:true,message:data.message||'Contraseña actualizada correctamente'};}catch(error){return{success:false,error:error.message};}};// ============================\n// CHANGE PASSWORD (usuario logueado)\n// ============================\nconst changePassword=async(currentPassword,newPassword)=>{const token=getStoredToken();if(!token||!isTokenValid(token))return{success:false,error:'No estás autenticado'};try{const res=await fetch(`${API_URL}/auth/change-password`,{method:'POST',headers:{'Content-Type':'application/json',Authorization:`Bearer ${token}`},body:JSON.stringify({currentPassword,newPassword})});const data=await res.json();if(!res.ok){if(res.status===401)logout();throw new Error(data.message||'Error cambiando contraseña');}return{success:true,message:data.message||'Contraseña cambiada correctamente'};}catch(error){return{success:false,error:error.message};}};// ============================\n// FUNCIONES DE DEBUG\n// ============================\nconst getTokenInfo=()=>{const token=getStoredToken();if(!token)return{hasToken:false};const info={hasToken:true,tokenLength:token.length,tokenPreview:token.substring(0,20)+'...',isValid:isTokenValid(token)};if(token.includes('.')){try{info.payload=JSON.parse(atob(token.split('.')[1]));info.isJWT=true;}catch(e){info.isJWT=false;info.parseError=e.message;}}else{info.isJWT=false;info.tokenType='simple';}return info;};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,permisos,login,logout,getStoredToken,forgotPassword,resetPassword,changePassword,loading,isTokenValid,getTokenInfo,verifyUser},children:children});};export const useAuth=()=>{const context=useContext(AuthContext);if(!context)throw new Error('useAuth debe usarse dentro de un AuthProvider');return context;};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","axios","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","permisos","setPermisos","loading","setLoading","API_URL","process","env","REACT_APP_API_URL","getStoredToken","token","localStorage","getItem","console","log","requestInterceptor","interceptors","request","use","config","headers","Authorization","error","Promise","reject","responseInterceptor","response","_error$response","status","logout","eject","isTokenValid","length","includes","parts","split","payload","JSON","parse","atob","exp","currentTime","Date","now","mapEstado","estado","formatUser","userData","id","name","nombre","apellido","trim","position","puesto","rol","role","email","empleadoId","login","password","res","fetch","method","body","stringify","data","json","ok","Error","message","setItem","formattedUser","success","removeItem","verifyUser","_data$user$estado","userEstado","forgotPassword","resetPassword","newPassword","changePassword","currentPassword","getTokenInfo","hasToken","info","tokenLength","tokenPreview","substring","isValid","isJWT","e","parseError","tokenType","Provider","value","useAuth","context"],"sources":["C:/Users/josemontedeoca/rrhh-system/frontend/src/context/AuthContext.jsx"],"sourcesContent":["/// src/context/AuthContext.jsx\r\nimport React, { createContext, useContext, useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\n\r\nconst AuthContext = createContext()\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null)\r\n  const [permisos, setPermisos] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const API_URL = process.env.REACT_APP_API_URL || 'http://192.168.0.239:5000/api'\r\n\r\n  // ============================\r\n  // FUNCIÓN PARA OBTENER TOKEN\r\n  // ============================\r\n  const getStoredToken = () => {\r\n    const token = localStorage.getItem('rrhh_token')\r\n    console.log('getStoredToken llamado, token:', token ? 'presente' : 'ausente')\r\n    return token\r\n  }\r\n\r\n  // ============================\r\n  // CONFIGURAR AXIOS INTERCEPTORS\r\n  // ============================\r\n  useEffect(() => {\r\n    const requestInterceptor = axios.interceptors.request.use(\r\n      (config) => {\r\n        const token = getStoredToken()\r\n        if (token) config.headers.Authorization = `Bearer ${token}`\r\n        return config\r\n      },\r\n      (error) => Promise.reject(error)\r\n    )\r\n\r\n    const responseInterceptor = axios.interceptors.response.use(\r\n      (response) => response,\r\n      (error) => {\r\n        if (error.response?.status === 401) logout()\r\n        return Promise.reject(error)\r\n      }\r\n    )\r\n\r\n    return () => {\r\n      axios.interceptors.request.eject(requestInterceptor)\r\n      axios.interceptors.response.eject(responseInterceptor)\r\n    }\r\n  }, [])\r\n\r\n  // ============================\r\n  // VALIDAR TOKEN\r\n  // ============================\r\n  const isTokenValid = (token) => {\r\n    if (!token) return false\r\n\r\n    try {\r\n      if (token.length < 10) return false\r\n\r\n      if (token.includes('.')) {\r\n        const parts = token.split('.')\r\n        if (parts.length !== 3) return false\r\n\r\n        const payload = JSON.parse(atob(parts[1]))\r\n        if (!payload.exp) return true\r\n\r\n        const currentTime = Date.now() / 1000\r\n        return payload.exp > currentTime\r\n      } else {\r\n        return true\r\n      }\r\n    } catch (error) {\r\n      console.error('Error validando token:', error)\r\n      return false\r\n    }\r\n  }\r\n\r\n  const mapEstado = (estado) => (estado === 1 || estado === true ? 'Activo' : 'Inactivo')\r\n\r\n  const formatUser = (userData) => ({\r\n    id: userData.id,\r\n    name: `${userData.nombre || ''} ${userData.apellido || ''}`.trim() || 'Usuario',\r\n    position: userData.puesto || userData.rol || '',\r\n    role: userData.rol || 'Sistema',\r\n    email: userData.email,\r\n    empleadoId: userData.empleadoId,\r\n    estado: mapEstado(userData.estado),\r\n  })\r\n\r\n  // ============================\r\n  // LOGIN\r\n  // ============================\r\n  const login = async (email, password) => {\r\n    setLoading(true)\r\n    try {\r\n      const res = await fetch(`${API_URL}/auth/login`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, password }),\r\n      })\r\n\r\n      const data = await res.json()\r\n      if (!res.ok) throw new Error(data.message || 'Error al iniciar sesión')\r\n\r\n      localStorage.setItem('rrhh_token', data.token)\r\n      const formattedUser = formatUser(data.user)\r\n      setUser(formattedUser)\r\n      setPermisos(data.permisos || [])\r\n      return { success: true }\r\n    } catch (error) {\r\n      console.error('Error en login:', error)\r\n      return { success: false, error: error.message }\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  // ============================\r\n  // LOGOUT\r\n  // ============================\r\n  const logout = () => {\r\n    localStorage.removeItem('rrhh_token')\r\n    setUser(null)\r\n    setPermisos([])\r\n  }\r\n\r\n  // ============================\r\n  // VERIFICAR USUARIO\r\n  // ============================\r\n  const verifyUser = async () => {\r\n    setLoading(true)\r\n    const token = getStoredToken()\r\n\r\n    if (!token || !isTokenValid(token)) {\r\n      logout()\r\n      setLoading(false)\r\n      return\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(`${API_URL}/auth/verify`, {\r\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\r\n      })\r\n\r\n      const data = await res.json()\r\n\r\n      if (!data.user) {\r\n        logout()\r\n        return\r\n      }\r\n\r\n      const userEstado = data.user.estado ?? 1\r\n      if (userEstado === 1 || userEstado === true) {\r\n        setUser(formatUser(data.user))\r\n        setPermisos(data.permisos || [])\r\n      } else {\r\n        logout()\r\n      }\r\n    } catch (error) {\r\n      console.error('Error verificando usuario:', error)\r\n      logout()\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    verifyUser()\r\n  }, [])\r\n\r\n  // ============================\r\n  // FORGOT PASSWORD\r\n  // ============================\r\n  const forgotPassword = async (email) => {\r\n    try {\r\n      const res = await fetch(`${API_URL}/auth/forgot-password`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email }),\r\n      })\r\n      const data = await res.json()\r\n      if (!res.ok) throw new Error(data.message || 'Error al enviar email')\r\n      return { success: true, message: data.message || 'Email enviado correctamente' }\r\n    } catch (error) {\r\n      return { success: false, error: error.message }\r\n    }\r\n  }\r\n\r\n  // ============================\r\n  // RESET PASSWORD\r\n  // ============================\r\n  const resetPassword = async (token, newPassword) => {\r\n    try {\r\n      const res = await fetch(`${API_URL}/auth/reset-password`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ token, newPassword }),\r\n      })\r\n      const data = await res.json()\r\n      if (!res.ok) throw new Error(data.message || 'Error al restablecer contraseña')\r\n      return { success: true, message: data.message || 'Contraseña actualizada correctamente' }\r\n    } catch (error) {\r\n      return { success: false, error: error.message }\r\n    }\r\n  }\r\n\r\n  // ============================\r\n  // CHANGE PASSWORD (usuario logueado)\r\n  // ============================\r\n  const changePassword = async (currentPassword, newPassword) => {\r\n    const token = getStoredToken()\r\n    if (!token || !isTokenValid(token)) return { success: false, error: 'No estás autenticado' }\r\n\r\n    try {\r\n      const res = await fetch(`${API_URL}/auth/change-password`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\r\n        body: JSON.stringify({ currentPassword, newPassword }),\r\n      })\r\n\r\n      const data = await res.json()\r\n      if (!res.ok) {\r\n        if (res.status === 401) logout()\r\n        throw new Error(data.message || 'Error cambiando contraseña')\r\n      }\r\n\r\n      return { success: true, message: data.message || 'Contraseña cambiada correctamente' }\r\n    } catch (error) {\r\n      return { success: false, error: error.message }\r\n    }\r\n  }\r\n\r\n  // ============================\r\n  // FUNCIONES DE DEBUG\r\n  // ============================\r\n  const getTokenInfo = () => {\r\n    const token = getStoredToken()\r\n    if (!token) return { hasToken: false }\r\n\r\n    const info = {\r\n      hasToken: true,\r\n      tokenLength: token.length,\r\n      tokenPreview: token.substring(0, 20) + '...',\r\n      isValid: isTokenValid(token),\r\n    }\r\n\r\n    if (token.includes('.')) {\r\n      try {\r\n        info.payload = JSON.parse(atob(token.split('.')[1]))\r\n        info.isJWT = true\r\n      } catch (e) {\r\n        info.isJWT = false\r\n        info.parseError = e.message\r\n      }\r\n    } else {\r\n      info.isJWT = false\r\n      info.tokenType = 'simple'\r\n    }\r\n\r\n    return info\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user,\r\n        permisos,\r\n        login,\r\n        logout,\r\n        getStoredToken,\r\n        forgotPassword,\r\n        resetPassword,\r\n        changePassword,\r\n        loading,\r\n        isTokenValid,\r\n        getTokenInfo,\r\n        verifyUser,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext)\r\n  if (!context) throw new Error('useAuth debe usarse dentro de un AuthProvider')\r\n  return context\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
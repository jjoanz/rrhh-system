{"ast":null,"code":"// src/modules/ReportesModule.jsx\nimport React,{useState,useEffect}from\"react\";import axios from\"axios\";import{DndProvider,useDrag,useDrop}from\"react-dnd\";import{HTML5Backend}from\"react-dnd-html5-backend\";import{BarChart,Bar,XAxis,YAxis,Tooltip,Legend,ResponsiveContainer}from\"recharts\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||\"http://localhost:5000/api\";// ===================== CONFIGURACIÓN DE AXIOS =====================\n// Crear una instancia de axios con configuración base\nconst apiClient=axios.create({baseURL:API_URL,timeout:10000});// Interceptor para agregar el token a todas las peticiones\napiClient.interceptors.request.use(config=>{// Buscar token en localStorage o sessionStorage\nconst token=localStorage.getItem('token')||localStorage.getItem('authToken')||sessionStorage.getItem('token')||sessionStorage.getItem('authToken');if(token){config.headers.Authorization=`Bearer ${token}`;}console.log('Enviando petición con headers:',config.headers);return config;},error=>{return Promise.reject(error);});// Interceptor para manejar respuestas y errores 401\napiClient.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){console.error('Error 401: Token inválido o expirado');// Limpiar tokens\nlocalStorage.removeItem('token');localStorage.removeItem('authToken');sessionStorage.removeItem('token');sessionStorage.removeItem('authToken');// Opcionalmente redirigir al login\n// window.location.href = '/login';\n// O mostrar un mensaje al usuario\nalert('Sesión expirada. Por favor, inicia sesión nuevamente.');}return Promise.reject(error);});/* ----------------------- COMPONENTES DRAG & DROP ----------------------- */const DraggableField=_ref=>{let{name,table}=_ref;const[{isDragging},drag]=useDrag(()=>({type:\"FIELD\",item:{name,table},collect:monitor=>({isDragging:!!monitor.isDragging()})}));return/*#__PURE__*/_jsxs(\"div\",{ref:drag,className:\"p-1 m-1 border bg-white shadow rounded cursor-pointer text-sm\",style:{opacity:isDragging?0.5:1},children:[table,\".\",name]});};const DropZone=_ref2=>{let{onDrop,title,fields}=_ref2;const[{isOver},drop]=useDrop(()=>({accept:\"FIELD\",drop:item=>onDrop(item),collect:monitor=>({isOver:!!monitor.isOver()})}));return/*#__PURE__*/_jsxs(\"div\",{ref:drop,className:`p-2 border rounded min-h-[60px] mb-4 ${isOver?\"bg-green-100\":\"bg-gray-50\"}`,children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-2\",children:title}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap\",children:fields.map((f,i)=>/*#__PURE__*/_jsxs(\"span\",{className:\"px-2 py-1 m-1 bg-blue-200 text-xs rounded\",children:[f.table,\".\",f.name]},i))})]});};/* ----------------------- MODULO PRINCIPAL ----------------------- */const ReportesModule=()=>{const[metadata,setMetadata]=useState({});const[rows,setRows]=useState([]);const[cols,setCols]=useState([]);const[metrics,setMetrics]=useState([]);const[data,setData]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[tipoReporte,setTipoReporte]=useState(\"empleados_por_departamento\");const[sqlQuery,setSqlQuery]=useState(\"\");// Cargar metadata para constructor drag & drop\nuseEffect(()=>{const loadMetadata=async()=>{try{setLoading(true);setError(null);const res=await apiClient.get('/reportes/metadata');setMetadata(res.data);}catch(err){console.error('Error cargando metadata:',err);setError('Error al cargar la estructura de la base de datos');}finally{setLoading(false);}};loadMetadata();},[]);// Reporte predefinido\nconst fetchPredefinido=async()=>{try{setLoading(true);setError(null);const res=await apiClient.get(`/reportes/predefinidos/${tipoReporte}`);setData(res.data);}catch(err){console.error('Error en reporte predefinido:',err);setError('Error al generar el reporte predefinido');}finally{setLoading(false);}};// Reporte SQL libre\nconst fetchCustom=async()=>{try{setLoading(true);setError(null);const res=await apiClient.post('/reportes/custom',{sqlQuery});setData(res.data);}catch(err){console.error('Error en SQL custom:',err);setError('Error al ejecutar la consulta SQL');}finally{setLoading(false);}};// Reporte dinámico (drag & drop)\nconst generarSQL=()=>{if(rows.length===0||metrics.length===0)return\"\";const tablas=new Set([...rows,...cols,...metrics].map(f=>f.table));const select=[...rows,...cols,...metrics].map(f=>`${f.table}.${f.name}`);let query=`SELECT ${select.join(\", \")} FROM ${Array.from(tablas).join(\", \")}`;query+=\" /* TODO: relaciones automáticas */ \";return query;};const ejecutarReporte=async()=>{const sqlQuery=generarSQL();if(!sqlQuery){setError(\"Debes seleccionar al menos una fila y una métrica\");return;}try{setLoading(true);setError(null);const res=await apiClient.post('/reportes/custom',{sqlQuery});setData(res.data);}catch(err){console.error('Error ejecutando reporte:',err);setError('Error al ejecutar el reporte dinámico');}finally{setLoading(false);}};// Exportación\nconst exportar=async formato=>{try{setLoading(true);const res=await apiClient.post('/reportes/export',{formato,data},{responseType:\"blob\"});const url=window.URL.createObjectURL(new Blob([res.data]));const link=document.createElement(\"a\");link.href=url;link.setAttribute(\"download\",`reporte.${formato}`);document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);}catch(err){console.error('Error exportando:',err);setError('Error al exportar el reporte');}finally{setLoading(false);}};// Función para verificar el estado del token\nconst verificarToken=()=>{const token=localStorage.getItem('token')||localStorage.getItem('authToken')||sessionStorage.getItem('token')||sessionStorage.getItem('authToken');console.log('Token actual:',token?'Presente':'No encontrado');console.log('Headers de axios:',apiClient.defaults.headers.common);};return/*#__PURE__*/_jsx(DndProvider,{backend:HTML5Backend,children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"M\\xF3dulo de Reportes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:verificarToken,className:\"px-3 py-1 bg-gray-500 text-white rounded text-sm\",children:\"Verificar Token\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded\",children:error}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-blue-100 border border-blue-400 text-blue-700 rounded\",children:\"Cargando...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"Reportes Predefinidos\"}),/*#__PURE__*/_jsxs(\"select\",{value:tipoReporte,onChange:e=>setTipoReporte(e.target.value),disabled:loading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"empleados_por_departamento\",children:\"Empleados por departamento\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vacantes_abiertas\",children:\"Vacantes abiertas\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchPredefinido,disabled:loading,className:\"ml-2 px-4 py-1 bg-blue-500 text-white rounded disabled:opacity-50\",children:loading?'Generando...':'Generar'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"SQL Personalizado\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"border w-full p-2\",rows:3,placeholder:\"Escribe tu consulta SQL (solo SELECT)...\",value:sqlQuery,onChange:e=>setSqlQuery(e.target.value),disabled:loading}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchCustom,disabled:loading||!sqlQuery.trim(),className:\"mt-2 px-4 py-1 bg-green-500 text-white rounded disabled:opacity-50\",children:loading?'Ejecutando...':'Ejecutar SQL'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"Constructor Visual\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-1 border p-2 rounded\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"Campos disponibles\"}),Object.keys(metadata).length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Cargando estructura...\"}):Object.entries(metadata).map(_ref3=>{let[table,fields]=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold\",children:table}),fields.map(field=>/*#__PURE__*/_jsx(DraggableField,{name:field,table:table},field))]},table);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(DropZone,{title:\"Filas\",fields:rows,onDrop:item=>setRows([...rows,item])}),/*#__PURE__*/_jsx(DropZone,{title:\"Columnas\",fields:cols,onDrop:item=>setCols([...cols,item])}),/*#__PURE__*/_jsx(DropZone,{title:\"M\\xE9tricas\",fields:metrics,onDrop:item=>setMetrics([...metrics,item])}),/*#__PURE__*/_jsx(\"button\",{onClick:ejecutarReporte,disabled:loading||rows.length===0||metrics.length===0,className:\"px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-50\",children:loading?'Generando...':'Generar Reporte'})]})]})]}),data.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold mb-2\",children:\"Resultado\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>exportar(\"csv\"),disabled:loading,className:\"mr-2 px-4 py-1 bg-gray-600 text-white rounded disabled:opacity-50\",children:\"CSV\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>exportar(\"excel\"),disabled:loading,className:\"mr-2 px-4 py-1 bg-yellow-600 text-white rounded disabled:opacity-50\",children:\"Excel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>exportar(\"pdf\"),disabled:loading,className:\"px-4 py-1 bg-red-600 text-white rounded disabled:opacity-50\",children:\"PDF\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table-auto border-collapse border border-gray-400 w-full mb-6\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:Object.keys(data[0]).map(key=>/*#__PURE__*/_jsx(\"th\",{className:\"border px-2 py-1\",children:key},key))})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map((row,i)=>/*#__PURE__*/_jsx(\"tr\",{children:Object.values(row).map((val,j)=>/*#__PURE__*/_jsx(\"td\",{className:\"border px-2 py-1\",children:val},j))},i))})]}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",height:400},children:/*#__PURE__*/_jsx(ResponsiveContainer,{children:/*#__PURE__*/_jsxs(BarChart,{data:data,children:[/*#__PURE__*/_jsx(XAxis,{dataKey:Object.keys(data[0])[0]}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:Object.keys(data[0])[1],fill:\"#8884d8\"})]})})})]})]})});};export default ReportesModule;","map":{"version":3,"names":["React","useState","useEffect","axios","DndProvider","useDrag","useDrop","HTML5Backend","BarChart","Bar","XAxis","YAxis","Tooltip","Legend","ResponsiveContainer","jsxs","_jsxs","jsx","_jsx","API_URL","process","env","REACT_APP_API_URL","apiClient","create","baseURL","timeout","interceptors","request","use","config","token","localStorage","getItem","sessionStorage","headers","Authorization","console","log","error","Promise","reject","response","_error$response","status","removeItem","alert","DraggableField","_ref","name","table","isDragging","drag","type","item","collect","monitor","ref","className","style","opacity","children","DropZone","_ref2","onDrop","title","fields","isOver","drop","accept","map","f","i","ReportesModule","metadata","setMetadata","rows","setRows","cols","setCols","metrics","setMetrics","data","setData","loading","setLoading","setError","tipoReporte","setTipoReporte","sqlQuery","setSqlQuery","loadMetadata","res","get","err","fetchPredefinido","fetchCustom","post","generarSQL","length","tablas","Set","select","query","join","Array","from","ejecutarReporte","exportar","formato","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","removeChild","revokeObjectURL","verificarToken","defaults","common","backend","onClick","value","onChange","e","target","disabled","placeholder","trim","Object","keys","entries","_ref3","field","key","row","values","val","j","width","height","dataKey","fill"],"sources":["C:/Users/josemontedeoca/rrhh-system/frontend/src/components/modules/Reportes/ReportesModule.jsx"],"sourcesContent":["// src/modules/ReportesModule.jsx\r\nimport React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { DndProvider, useDrag, useDrop } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\r\n\r\n// ===================== CONFIGURACIÓN DE AXIOS =====================\r\n// Crear una instancia de axios con configuración base\r\nconst apiClient = axios.create({\r\n  baseURL: API_URL,\r\n  timeout: 10000,\r\n});\r\n\r\n// Interceptor para agregar el token a todas las peticiones\r\napiClient.interceptors.request.use(\r\n  (config) => {\r\n    // Buscar token en localStorage o sessionStorage\r\n    const token = localStorage.getItem('token') || \r\n                 localStorage.getItem('authToken') || \r\n                 sessionStorage.getItem('token') ||\r\n                 sessionStorage.getItem('authToken');\r\n    \r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    \r\n    console.log('Enviando petición con headers:', config.headers);\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Interceptor para manejar respuestas y errores 401\r\napiClient.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      console.error('Error 401: Token inválido o expirado');\r\n      // Limpiar tokens\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('authToken');\r\n      sessionStorage.removeItem('token');\r\n      sessionStorage.removeItem('authToken');\r\n      \r\n      // Opcionalmente redirigir al login\r\n      // window.location.href = '/login';\r\n      \r\n      // O mostrar un mensaje al usuario\r\n      alert('Sesión expirada. Por favor, inicia sesión nuevamente.');\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n/* ----------------------- COMPONENTES DRAG & DROP ----------------------- */\r\nconst DraggableField = ({ name, table }) => {\r\n  const [{ isDragging }, drag] = useDrag(() => ({\r\n    type: \"FIELD\",\r\n    item: { name, table },\r\n    collect: (monitor) => ({\r\n      isDragging: !!monitor.isDragging(),\r\n    }),\r\n  }));\r\n\r\n  return (\r\n    <div\r\n      ref={drag}\r\n      className=\"p-1 m-1 border bg-white shadow rounded cursor-pointer text-sm\"\r\n      style={{ opacity: isDragging ? 0.5 : 1 }}\r\n    >\r\n      {table}.{name}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst DropZone = ({ onDrop, title, fields }) => {\r\n  const [{ isOver }, drop] = useDrop(() => ({\r\n    accept: \"FIELD\",\r\n    drop: (item) => onDrop(item),\r\n    collect: (monitor) => ({\r\n      isOver: !!monitor.isOver(),\r\n    }),\r\n  }));\r\n\r\n  return (\r\n    <div\r\n      ref={drop}\r\n      className={`p-2 border rounded min-h-[60px] mb-4 ${\r\n        isOver ? \"bg-green-100\" : \"bg-gray-50\"\r\n      }`}\r\n    >\r\n      <h4 className=\"font-semibold mb-2\">{title}</h4>\r\n      <div className=\"flex flex-wrap\">\r\n        {fields.map((f, i) => (\r\n          <span\r\n            key={i}\r\n            className=\"px-2 py-1 m-1 bg-blue-200 text-xs rounded\"\r\n          >\r\n            {f.table}.{f.name}\r\n          </span>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n/* ----------------------- MODULO PRINCIPAL ----------------------- */\r\nconst ReportesModule = () => {\r\n  const [metadata, setMetadata] = useState({});\r\n  const [rows, setRows] = useState([]);\r\n  const [cols, setCols] = useState([]);\r\n  const [metrics, setMetrics] = useState([]);\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const [tipoReporte, setTipoReporte] = useState(\"empleados_por_departamento\");\r\n  const [sqlQuery, setSqlQuery] = useState(\"\");\r\n\r\n  // Cargar metadata para constructor drag & drop\r\n  useEffect(() => {\r\n    const loadMetadata = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        const res = await apiClient.get('/reportes/metadata');\r\n        setMetadata(res.data);\r\n      } catch (err) {\r\n        console.error('Error cargando metadata:', err);\r\n        setError('Error al cargar la estructura de la base de datos');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadMetadata();\r\n  }, []);\r\n\r\n  // Reporte predefinido\r\n  const fetchPredefinido = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const res = await apiClient.get(`/reportes/predefinidos/${tipoReporte}`);\r\n      setData(res.data);\r\n    } catch (err) {\r\n      console.error('Error en reporte predefinido:', err);\r\n      setError('Error al generar el reporte predefinido');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Reporte SQL libre\r\n  const fetchCustom = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const res = await apiClient.post('/reportes/custom', { sqlQuery });\r\n      setData(res.data);\r\n    } catch (err) {\r\n      console.error('Error en SQL custom:', err);\r\n      setError('Error al ejecutar la consulta SQL');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Reporte dinámico (drag & drop)\r\n  const generarSQL = () => {\r\n    if (rows.length === 0 || metrics.length === 0) return \"\";\r\n\r\n    const tablas = new Set([...rows, ...cols, ...metrics].map((f) => f.table));\r\n    const select = [...rows, ...cols, ...metrics].map(\r\n      (f) => `${f.table}.${f.name}`\r\n    );\r\n\r\n    let query = `SELECT ${select.join(\", \")} FROM ${Array.from(tablas).join(\r\n      \", \"\r\n    )}`;\r\n    query += \" /* TODO: relaciones automáticas */ \";\r\n\r\n    return query;\r\n  };\r\n\r\n  const ejecutarReporte = async () => {\r\n    const sqlQuery = generarSQL();\r\n    if (!sqlQuery) {\r\n      setError(\"Debes seleccionar al menos una fila y una métrica\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const res = await apiClient.post('/reportes/custom', { sqlQuery });\r\n      setData(res.data);\r\n    } catch (err) {\r\n      console.error('Error ejecutando reporte:', err);\r\n      setError('Error al ejecutar el reporte dinámico');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Exportación\r\n  const exportar = async (formato) => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await apiClient.post(\r\n        '/reportes/export',\r\n        { formato, data },\r\n        { responseType: \"blob\" }\r\n      );\r\n      \r\n      const url = window.URL.createObjectURL(new Blob([res.data]));\r\n      const link = document.createElement(\"a\");\r\n      link.href = url;\r\n      link.setAttribute(\"download\", `reporte.${formato}`);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      window.URL.revokeObjectURL(url);\r\n    } catch (err) {\r\n      console.error('Error exportando:', err);\r\n      setError('Error al exportar el reporte');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Función para verificar el estado del token\r\n  const verificarToken = () => {\r\n    const token = localStorage.getItem('token') || \r\n                 localStorage.getItem('authToken') || \r\n                 sessionStorage.getItem('token') ||\r\n                 sessionStorage.getItem('authToken');\r\n    \r\n    console.log('Token actual:', token ? 'Presente' : 'No encontrado');\r\n    console.log('Headers de axios:', apiClient.defaults.headers.common);\r\n  };\r\n\r\n  return (\r\n    <DndProvider backend={HTML5Backend}>\r\n      <div className=\"p-6\">\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <h2 className=\"text-2xl font-bold\">Módulo de Reportes</h2>\r\n          <button\r\n            onClick={verificarToken}\r\n            className=\"px-3 py-1 bg-gray-500 text-white rounded text-sm\"\r\n          >\r\n            Verificar Token\r\n          </button>\r\n        </div>\r\n\r\n        {/* Mostrar errores */}\r\n        {error && (\r\n          <div className=\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        {/* Indicador de carga */}\r\n        {loading && (\r\n          <div className=\"mb-4 p-3 bg-blue-100 border border-blue-400 text-blue-700 rounded\">\r\n            Cargando...\r\n          </div>\r\n        )}\r\n\r\n        {/* ----------- Reportes Predefinidos ----------- */}\r\n        <div className=\"mb-6\">\r\n          <h3 className=\"font-semibold mb-2\">Reportes Predefinidos</h3>\r\n          <select\r\n            value={tipoReporte}\r\n            onChange={(e) => setTipoReporte(e.target.value)}\r\n            disabled={loading}\r\n          >\r\n            <option value=\"empleados_por_departamento\">Empleados por departamento</option>\r\n            <option value=\"vacantes_abiertas\">Vacantes abiertas</option>\r\n          </select>\r\n          <button\r\n            onClick={fetchPredefinido}\r\n            disabled={loading}\r\n            className=\"ml-2 px-4 py-1 bg-blue-500 text-white rounded disabled:opacity-50\"\r\n          >\r\n            {loading ? 'Generando...' : 'Generar'}\r\n          </button>\r\n        </div>\r\n\r\n        {/* ----------- SQL Libre ----------- */}\r\n        <div className=\"mb-6\">\r\n          <h3 className=\"font-semibold mb-2\">SQL Personalizado</h3>\r\n          <textarea\r\n            className=\"border w-full p-2\"\r\n            rows={3}\r\n            placeholder=\"Escribe tu consulta SQL (solo SELECT)...\"\r\n            value={sqlQuery}\r\n            onChange={(e) => setSqlQuery(e.target.value)}\r\n            disabled={loading}\r\n          />\r\n          <button\r\n            onClick={fetchCustom}\r\n            disabled={loading || !sqlQuery.trim()}\r\n            className=\"mt-2 px-4 py-1 bg-green-500 text-white rounded disabled:opacity-50\"\r\n          >\r\n            {loading ? 'Ejecutando...' : 'Ejecutar SQL'}\r\n          </button>\r\n        </div>\r\n\r\n        {/* ----------- Constructor Drag & Drop ----------- */}\r\n        <div className=\"mb-6\">\r\n          <h3 className=\"font-semibold mb-2\">Constructor Visual</h3>\r\n          <div className=\"grid grid-cols-3 gap-4\">\r\n            {/* Campos disponibles */}\r\n            <div className=\"col-span-1 border p-2 rounded\">\r\n              <h3 className=\"font-semibold mb-2\">Campos disponibles</h3>\r\n              {Object.keys(metadata).length === 0 ? (\r\n                <p className=\"text-gray-500\">Cargando estructura...</p>\r\n              ) : (\r\n                Object.entries(metadata).map(([table, fields]) => (\r\n                  <div key={table} className=\"mb-2\">\r\n                    <h4 className=\"font-bold\">{table}</h4>\r\n                    {fields.map((field) => (\r\n                      <DraggableField key={field} name={field} table={table} />\r\n                    ))}\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n\r\n            {/* Constructor zonas */}\r\n            <div className=\"col-span-2\">\r\n              <DropZone title=\"Filas\" fields={rows} onDrop={(item) => setRows([...rows, item])} />\r\n              <DropZone title=\"Columnas\" fields={cols} onDrop={(item) => setCols([...cols, item])} />\r\n              <DropZone title=\"Métricas\" fields={metrics} onDrop={(item) => setMetrics([...metrics, item])} />\r\n\r\n              <button\r\n                onClick={ejecutarReporte}\r\n                disabled={loading || rows.length === 0 || metrics.length === 0}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-50\"\r\n              >\r\n                {loading ? 'Generando...' : 'Generar Reporte'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ----------- Resultados ----------- */}\r\n        {data.length > 0 && (\r\n          <div className=\"mt-6\">\r\n            <h3 className=\"text-lg font-bold mb-2\">Resultado</h3>\r\n\r\n            {/* Exportación */}\r\n            <div className=\"mb-4\">\r\n              <button\r\n                onClick={() => exportar(\"csv\")}\r\n                disabled={loading}\r\n                className=\"mr-2 px-4 py-1 bg-gray-600 text-white rounded disabled:opacity-50\"\r\n              >\r\n                CSV\r\n              </button>\r\n              <button\r\n                onClick={() => exportar(\"excel\")}\r\n                disabled={loading}\r\n                className=\"mr-2 px-4 py-1 bg-yellow-600 text-white rounded disabled:opacity-50\"\r\n              >\r\n                Excel\r\n              </button>\r\n              <button\r\n                onClick={() => exportar(\"pdf\")}\r\n                disabled={loading}\r\n                className=\"px-4 py-1 bg-red-600 text-white rounded disabled:opacity-50\"\r\n              >\r\n                PDF\r\n              </button>\r\n            </div>\r\n\r\n            {/* Tabla */}\r\n            <table className=\"table-auto border-collapse border border-gray-400 w-full mb-6\">\r\n              <thead>\r\n                <tr>\r\n                  {Object.keys(data[0]).map((key) => (\r\n                    <th key={key} className=\"border px-2 py-1\">\r\n                      {key}\r\n                    </th>\r\n                  ))}\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {data.map((row, i) => (\r\n                  <tr key={i}>\r\n                    {Object.values(row).map((val, j) => (\r\n                      <td key={j} className=\"border px-2 py-1\">\r\n                        {val}\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n\r\n            {/* Gráfico */}\r\n            <div style={{ width: \"100%\", height: 400 }}>\r\n              <ResponsiveContainer>\r\n                <BarChart data={data}>\r\n                  <XAxis dataKey={Object.keys(data[0])[0]} />\r\n                  <YAxis />\r\n                  <Tooltip />\r\n                  <Legend />\r\n                  <Bar dataKey={Object.keys(data[0])[1]} fill=\"#8884d8\" />\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </DndProvider>\r\n  );\r\n};\r\n\r\nexport default ReportesModule;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}